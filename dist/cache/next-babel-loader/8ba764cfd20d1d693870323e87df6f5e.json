{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ruala\\\\Desktop\\\\ASahak\\\\daser\\\\next\\\\CryptoGraphy\\\\components\\\\elements\\\\PrivateMessageContent.jsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React from 'react';\nimport PropTypes from 'prop-types';\nimport { connect } from \"react-redux\";\nimport UI_ELEMENTS from \"components/shared/UI\";\nimport * as moment from 'moment';\nimport Icon from 'components/Icons/icon';\nimport debounce from \"lodash.debounce\";\nimport { __LOAD_MORE_MESSAGES } from 'store/actions';\nimport { Bus } from 'components/shared/helpers/Bus';\nimport { _EVERY_PAGE_LIMIT_MESSAGES } from 'components/shared/helpers/constants';\nimport { __getUserMessages } from 'store/reselect';\nimport { __detectCryptIcon } from 'components/shared/helpers/global-functions';\nimport { __EDIT_MESSAGE, __REMOVE_MESSAGE } from \"store/saga\";\n\nclass PrivateMessageContent extends React.PureComponent {\n  constructor(props) {\n    var _this$props$activeUse, _this$props$loggedUse;\n\n    super(props);\n    this.state = {\n      leftColor: this.props.activeUser && ((_this$props$activeUse = this.props.activeUser) === null || _this$props$activeUse === void 0 ? void 0 : _this$props$activeUse.color) || '#0C4651',\n      rightColor: this.props.activeUser && ((_this$props$loggedUse = this.props.loggedUser) === null || _this$props$loggedUse === void 0 ? void 0 : _this$props$loggedUse.color) || '#1BBC9B',\n      scrollLoadingAllow: true,\n      messagesSelector: [],\n      encryptIcon: true,\n      scrollPosition: null,\n      previousScrollHeight: 0,\n      previousScrollTop: 0,\n      loadingMessages: false,\n      isEditing: false,\n      isRemoving: false,\n      editingMsgIndex: null\n    };\n    this._messagesEnd = null;\n    this._handleDomClick = null;\n    this._handleClickRemove = null;\n    this.__scrollToBottom = this.__scrollToBottom.bind(this);\n    this.__handleScrollTop = this.__handleScrollTop.bind(this);\n    this.__showEncryptPopUp = this.__showEncryptPopUp.bind(this);\n    this.__doEncryptType = this.__doEncryptType.bind(this);\n    this.__hidePopUpEncrypt = this.__hidePopUpEncrypt.bind(this);\n    this.__editMessage = this.__editMessage.bind(this);\n    this.__removeMessageConfirm = this.__removeMessageConfirm.bind(this);\n    this.__removeMessage = this.__removeMessage.bind(this);\n    this.__clickRemovePopUp = this.__clickRemovePopUp.bind(this);\n    this._scrollContent = React.createRef();\n    Bus.subscribe('cancelEditing', () => {\n      this.setState({\n        isEditing: false\n      });\n    });\n    Bus.subscribe('endEditing', () => {\n      this.setState({\n        isEditing: false,\n        isRemoving: false,\n        editingMsgIndex: null\n      });\n    });\n  }\n\n  __scrollToBottom(behavior) {\n    setTimeout(() => {\n      var _this$_messagesEnd;\n\n      (_this$_messagesEnd = this._messagesEnd) === null || _this$_messagesEnd === void 0 ? void 0 : _this$_messagesEnd.scrollIntoView({\n        behavior: behavior ? 'smooth' : 'auto'\n      });\n    }, 0);\n  }\n\n  __handleScrollTop(e) {\n    if (this.state.scrollLoadingAllow && e.target.scrollTop < 50) {\n      var _this$_scrollContent, _this$_scrollContent2;\n\n      this.setState({\n        previousScrollTop: (_this$_scrollContent = this._scrollContent) === null || _this$_scrollContent === void 0 ? void 0 : _this$_scrollContent.scrollTop,\n        previousScrollHeight: (_this$_scrollContent2 = this._scrollContent) === null || _this$_scrollContent2 === void 0 ? void 0 : _this$_scrollContent2.scrollHeight,\n        scrollLoadingAllow: false,\n        loadingMessages: true\n      }, () => {\n        setTimeout(() => {\n          this.props.__LOAD_MORE_MESSAGES(1);\n        }, 1000);\n      });\n    } else {\n      this.setState({\n        scrollLoadingAllow: true\n      });\n    }\n  }\n\n  __showEncryptPopUp(evt, index, isKey) {\n    if (evt.target.closest('.remove-confirm-container')) return;\n\n    const _currentSrc = evt.target.closest('.separate-p');\n\n    if (document.body.querySelector('.opened-encryptPopUp') && document.body.querySelector('.opened-encryptPopUp') !== _currentSrc) {\n      document.body.querySelector('.opened-encryptPopUp').setAttribute('data-hint-encrypt', false);\n      document.body.querySelector('.opened-encryptPopUp').classList.remove('opened-encryptPopUp');\n    }\n\n    if (isKey) return;\n\n    if (_currentSrc) {\n      const dataIcon = _currentSrc.getAttribute('data-hint-encrypt');\n\n      this.state.messagesSelector = [...this.state.messagesSelector];\n      this.state.messagesSelector[index].isEncrypt = false;\n      this.setState({\n        encryptIcon: JSON.parse(dataIcon),\n        messagesSelector: this.state.messagesSelector\n      }, () => this.forceUpdate());\n\n      _currentSrc.classList.toggle('opened-encryptPopUp');\n    }\n\n    setTimeout(() => {\n      addEventListener('click', this._handleDomClick = this.__hidePopUpEncrypt.bind(this, index));\n    }, 0);\n  }\n\n  __hidePopUpEncrypt(index, e) {\n    this.state.messagesSelector = [...this.state.messagesSelector];\n    delete this.state.messagesSelector[index].isEncrypt;\n    this.setState({\n      messagesSelector: this.state.messagesSelector\n    }, () => this.forceUpdate());\n    removeEventListener('click', this._handleDomClick);\n\n    if (!e.target.closest('div[data-hint-encrypt]') && document.body.querySelector('.opened-encryptPopUp')) {\n      document.body.querySelector('.opened-encryptPopUp').setAttribute('data-hint-encrypt', false);\n      document.body.querySelector('.opened-encryptPopUp').classList.remove('opened-encryptPopUp');\n    }\n  }\n\n  __doEncryptType(e, index) {\n    const _currentSrc = e.target.closest('.separate-p');\n\n    e.stopPropagation();\n    this.setState({\n      encryptIcon: !this.state.encryptIcon\n    }, () => {\n      _currentSrc.setAttribute('data-hint-encrypt', this.state.encryptIcon);\n\n      const newEncryption = [...this.state.messagesSelector];\n      newEncryption[index].isEncrypt = this.state.encryptIcon;\n      this.setState({\n        messagesSelector: newEncryption\n      });\n    });\n  }\n\n  __editMessage(evt, msg, time) {\n    var _this$props$activeUse2, _this$props$loggedUse2;\n\n    const index = this.props.messages.findIndex(msg => msg.time === time);\n\n    __EDIT_MESSAGE(null, index, {\n      idUser: (_this$props$activeUse2 = this.props.activeUser) === null || _this$props$activeUse2 === void 0 ? void 0 : _this$props$activeUse2.id,\n      myId: (_this$props$loggedUse2 = this.props.loggedUser) === null || _this$props$loggedUse2 === void 0 ? void 0 : _this$props$loggedUse2.id\n    }).next();\n\n    evt.stopPropagation();\n    this.setState({\n      isEditing: true,\n      editingMsgIndex: index\n    }, () => {\n      Bus.dispatch('editMessage', {\n        msg,\n        index\n      });\n    });\n  }\n\n  __removeMessageConfirm(evt) {\n    var _evt$target$closest;\n\n    evt.stopPropagation();\n\n    const _currentSrc = evt.target.closest('.separate-p');\n\n    const alreadyDeclared = (_evt$target$closest = evt.target.closest('.messages-content')) === null || _evt$target$closest === void 0 ? void 0 : _evt$target$closest.querySelector('.opened-pop-confirm-remove');\n\n    if (alreadyDeclared) {\n      alreadyDeclared.classList.remove('opened-pop-confirm-remove');\n    }\n\n    _currentSrc.classList.add('opened-pop-confirm-remove');\n\n    setTimeout(() => {\n      addEventListener('click', this._handleClickRemove = this.__clickRemovePopUp.bind(this));\n    }, 0);\n  }\n\n  __removeMessage(time) {\n    var _this$props$activeUse3, _this$props$loggedUse3;\n\n    __REMOVE_MESSAGE(time, {\n      idUser: (_this$props$activeUse3 = this.props.activeUser) === null || _this$props$activeUse3 === void 0 ? void 0 : _this$props$activeUse3.id,\n      myId: (_this$props$loggedUse3 = this.props.loggedUser) === null || _this$props$loggedUse3 === void 0 ? void 0 : _this$props$loggedUse3.id\n    }).next();\n  }\n\n  __clickRemovePopUp(evt) {\n    var _evt$target$closest2;\n\n    const alreadyDeclared = (_evt$target$closest2 = evt.target.closest('.messages-content')) === null || _evt$target$closest2 === void 0 ? void 0 : _evt$target$closest2.querySelector('.opened-pop-confirm-remove');\n\n    if (alreadyDeclared && !evt.target.closest('.remove-confirm-container') || evt.target.closest('.trigger-close-dialog')) {\n      alreadyDeclared.classList.remove('opened-pop-confirm-remove');\n      removeEventListener('click', this._handleClickRemove);\n    }\n  }\n\n  componentDidUpdate(prevProps, prevState, snapshot) {\n    var _this$props$activeUse4, _prevProps$messages$t, _this$props$messages$, _this$props$activeUse5, _this$props$activeUse6, _this$props$activeUse7;\n\n    // if (prevProps.activeUser.isTyping !== this.props.activeUser.isTyping) { todo\n    //     this.props.activeUser.isTyping && this.__scrollToBottom('behavior');\n    // }\n    // Detect if there are removed message\n    if (((_this$props$activeUse4 = this.props.activeUser) === null || _this$props$activeUse4 === void 0 ? void 0 : _this$props$activeUse4.removedMessageIndex) >= 0 && (((_prevProps$messages$t = prevProps.messages[this.props.activeUser.removedMessageIndex]) === null || _prevProps$messages$t === void 0 ? void 0 : _prevProps$messages$t.removed) !== ((_this$props$messages$ = this.props.messages[this.props.activeUser.removedMessageIndex]) === null || _this$props$messages$ === void 0 ? void 0 : _this$props$messages$.removed) || !(() => {\n      var _this$state$messagesS;\n\n      const currentIndex = this.state.messagesSelector.length - (this.props.messages.length - this.props.activeUser.removedMessageIndex);\n      if (currentIndex < 0) return false;\n      return (_this$state$messagesS = this.state.messagesSelector[currentIndex]) === null || _this$state$messagesS === void 0 ? void 0 : _this$state$messagesS.removed;\n    })())) {\n      const currentIndex = this.state.messagesSelector.length - (this.props.messages.length - this.props.activeUser.removedMessageIndex);\n\n      if (currentIndex >= 0) {\n        const newEncryption = [...this.state.messagesSelector];\n\n        if (newEncryption[currentIndex]) {\n          newEncryption[currentIndex].removed = true;\n          this.setState({\n            messagesSelector: newEncryption\n          });\n        }\n      }\n    } // when editing have been finished\n\n\n    if (((_this$props$activeUse5 = this.props.activeUser) === null || _this$props$activeUse5 === void 0 ? void 0 : _this$props$activeUse5.editedMsgIndex) >= 0 && (this.props.messages[(_this$props$activeUse6 = this.props.activeUser) === null || _this$props$activeUse6 === void 0 ? void 0 : _this$props$activeUse6.editedMsgIndex].message !== prevProps.messages[(_this$props$activeUse7 = this.props.activeUser) === null || _this$props$activeUse7 === void 0 ? void 0 : _this$props$activeUse7.editedMsgIndex].message || (() => {\n      var _this$props$activeUse8, _this$props$activeUse9;\n\n      const currentIndex = this.state.messagesSelector.length - (this.props.messages.length - ((_this$props$activeUse8 = this.props.activeUser) === null || _this$props$activeUse8 === void 0 ? void 0 : _this$props$activeUse8.editedMsgIndex));\n      if (currentIndex < 0) return false;\n      return this.state.messagesSelector[currentIndex].message !== this.props.messages[(_this$props$activeUse9 = this.props.activeUser) === null || _this$props$activeUse9 === void 0 ? void 0 : _this$props$activeUse9.editedMsgIndex].message;\n    })())) {\n      var _this$props$activeUse10;\n\n      const currentIndex = this.state.messagesSelector.length - (this.props.messages.length - ((_this$props$activeUse10 = this.props.activeUser) === null || _this$props$activeUse10 === void 0 ? void 0 : _this$props$activeUse10.editedMsgIndex));\n\n      if (currentIndex >= 0) {\n        var _this$props$activeUse11;\n\n        const editedArray = [...this.state.messagesSelector];\n        editedArray[currentIndex] = this.props.messages[(_this$props$activeUse11 = this.props.activeUser) === null || _this$props$activeUse11 === void 0 ? void 0 : _this$props$activeUse11.editedMsgIndex];\n        this.setState({\n          isEditing: false,\n          isRemoving: false,\n          editingMsgIndex: null,\n          messagesSelector: editedArray\n        });\n      }\n    } // Sending notification when there was not any messages\n\n\n    if (this.props.messages.length === 1 && this.props.messages[0].message === '' || prevProps.messages.length === 1 && prevProps.messages[0].message === '') {\n      this.props.messagesHaveBeenDeleted();\n    } // Update message list\n\n\n    if (prevProps.messagesPage !== this.props.messagesPage || prevProps.messages.length !== this.props.messages.length) {\n      if ((this.props.messagesPage - 1) * _EVERY_PAGE_LIMIT_MESSAGES <= this.props.messages.length) {\n        this.setState({\n          scrollLoadingAllow: true,\n          loadingMessages: false,\n          messagesSelector: __getUserMessages({\n            data: this.props.messages,\n            page: this.props.messagesPage\n          })\n        }, () => {\n          if (prevProps.messages.length !== this.props.messages.length) {\n            this.__scrollToBottom('behavior');\n          } else {\n            this._scrollContent.scrollTo(0, this._scrollContent.scrollHeight - this.state.previousScrollHeight + this.state.previousScrollTop - 45);\n          }\n        });\n      } else {\n        this.props.__LOAD_MORE_MESSAGES(-1);\n      }\n    }\n  }\n\n  componentDidMount() {\n    this.setState({\n      messagesSelector: __getUserMessages({\n        data: this.props.messages,\n        page: this.props.messagesPage\n      })\n    }, () => {\n      this._scrollContent.onscroll = debounce(e => {\n        if (this.props.messages.length > _EVERY_PAGE_LIMIT_MESSAGES) {\n          this.__handleScrollTop(e);\n        }\n      }, 100);\n\n      this.__scrollToBottom();\n    });\n  }\n\n  componentWillUnmount() {\n    removeEventListener('click', this._handleClickRemove);\n    removeEventListener('click', this._handleDomClick);\n    Bus.unsubscribe('cancelEditing');\n    Bus.unsubscribe('endEditing');\n  }\n\n  get FN() {\n    return this.props.activeUser ? this.props.activeUser.fullName.split(' ')[0].slice(0, 1).toUpperCase() : '';\n  }\n\n  get LN() {\n    return this.props.activeUser ? this.props.activeUser.fullName.split(' ')[1].slice(0, 1) || ''.toUpperCase() : '';\n  }\n\n  render() {\n    return __jsx(React.Fragment, null, __jsx(\"div\", {\n      ref: el => this._scrollContent = el,\n      className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + `messages-content ${this.state.loadingMessages ? 'scroll-disable' : ''}`,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 288,\n        columnNumber: 17\n      }\n    }, this.state.loadingMessages && __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"sbl-circ\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 291,\n        columnNumber: 52\n      }\n    }), this.state.messagesSelector.map((message, index) => {\n      const _isOwner = message.owner === 'Me';\n\n      const _dataMSG = _isOwner ? this.props.loggedUser : this.props.activeUser;\n\n      if (!_dataMSG) return '';\n      return __jsx(\"div\", {\n        key: message.time + index,\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + ((_isOwner ? 'content-right_owner' : 'content-left_owner') || \"\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 29\n        }\n      }, __jsx(UI_ELEMENTS.UserImage, {\n        firstName: _dataMSG.fullName.split(' ')[0],\n        lastName: _dataMSG.fullName.split(' ')[1] || '',\n        fill: _dataMSG.color,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 33\n        }\n      }), message.removed ? __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"removed-message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 52\n        }\n      }, \"Removed message\") : __jsx(\"div\", {\n        \"data-message-type\": message.encryptType,\n        \"data-message-key\": message.key,\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + `message-time ${__detectCryptIcon(message) ? 'crypt-message' : ''}`,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 33\n        }\n      }, __jsx(\"div\", {\n        onClick: e => this.__showEncryptPopUp(e, index, __detectCryptIcon(message)),\n        \"data-hint-encrypt\": false,\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"separate-p\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 37\n        }\n      }, _isOwner && !__detectCryptIcon(message) && !this.state.isEditing && !this.state.isRemoving && __jsx(\"span\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"edit-remove\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 313,\n          columnNumber: 41\n        }\n      }, __jsx(\"i\", {\n        onClick: e => this.__editMessage(e, message, message.time),\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"lnr lnr-pencil\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 45\n        }\n      }), __jsx(\"i\", {\n        onClick: e => this.__removeMessageConfirm(e),\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"lnr lnr-cross\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 45\n        }\n      }), __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"remove-confirm-container\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 45\n        }\n      }, \"Are you sure?\", __jsx(\"p\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 318,\n          columnNumber: 49\n        }\n      }, __jsx(\"a\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"trigger-close-dialog\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 53\n        }\n      }, \"No\"), __jsx(\"a\", {\n        onClick: () => this.__removeMessage(message.time),\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 53\n        }\n      }, \"Yes\")))), __jsx(\"span\", {\n        onClick: e => this.__doEncryptType(e, index),\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"encryptPopUp\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 325,\n          columnNumber: 41\n        }\n      }, this.state.encryptIcon ? __jsx(Icon, {\n        name: \"unlocked\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 71\n        }\n      }) : __jsx(Icon, {\n        name: \"locked\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 45\n        }\n      })), __detectCryptIcon(message) ? __jsx(\"img\", {\n        src: \"./assets/images/key.png\",\n        alt: \"iconSend\",\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 71\n        }\n      }) : __jsx(\"span\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 45\n        }\n      }, message.isEncrypt === false ? message.decryptedMsg : //there will be some case which is equal undefined\n      message.isEncrypt === true ? message.encryptedMsg : message.message, \" \"), \" \", message.edited && __jsx(\"span\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"edited-msg\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 334,\n          columnNumber: 146\n        }\n      }, \"(edited)\")), __jsx(\"span\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"time-wrap\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 37\n        }\n      }, moment(+message.time).format('lll')), _isOwner ? index === this.state.messagesSelector.length - 1 ? this.props.activeUser.isSeen ? __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"status-message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 41\n        }\n      }, \"Seen\") : __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"status-message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 85\n        }\n      }, \"Delivered\") : '' : ''));\n    }), __jsx(\"div\", {\n      ref: el => {\n        this._messagesEnd = el;\n      },\n      className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]),\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 21\n      }\n    })), this.props.activeUser.isTyping && __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + \"is-typing-wrap\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345,\n        columnNumber: 52\n      }\n    }, this.FN + this.LN + ' is typing ', __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + 'spinner',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 347,\n        columnNumber: 21\n      }\n    }, __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + 'bounce1',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 25\n      }\n    }), __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + 'bounce2',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 349,\n        columnNumber: 25\n      }\n    }), __jsx(\"div\", {\n      className: _JSXStyle.dynamic([[\"2020876622\", [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor]]]) + \" \" + 'bounce3',\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 350,\n        columnNumber: 25\n      }\n    }))), __jsx(_JSXStyle, {\n      id: \"2020876622\",\n      dynamic: [this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.rightColor, this.state.leftColor, this.state.rightColor, this.state.leftColor],\n      __self: this\n    }, `.sbl-circ{height:35px;width:35px;color:#5a5a5a;position:relative;display:block;border:2px solid;border-radius:50%;border-top-color:transparent;-webkit-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;margin:5px auto;}@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}@keyframes rotate{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}.messages-content{height:100%;overflow-x:hidden;position:relative;padding-top:10px;}.scroll-disable{overflow:hidden;}.messages-content::-webkit-scrollbar{width:0px;height:10px;}.messages-content::-webkit-scrollbar-thumb{background:transparent;}.messages-content::-webkit-scrollbar-track{background:transparent;}.content-right_owner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-flow:row-reverse;-ms-flex-flow:row-reverse;flex-flow:row-reverse;text-align:right;padding:0 10px;margin:7px;}.content-left_owner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;text-align:left;padding:0 10px;margin:7px;}.content-left_owner .message-time{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:5px 10px;max-width:50%;position:relative;}.content-left_owner .removed-message,.content-right_owner .removed-message{padding:5px 10px;max-width:50%;position:relative;background-color:#d9d7d7;border-radius:6px;font-size:14px;height:27px;font-style:italic;color:#767575;margin-top:5px;margin-bottom:10px;}.content-left_owner .removed-message{margin-left:10px;}.content-right_owner .removed-message{margin-right:10px;}.content-right_owner .message-time{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;padding:5px 10px;max-width:50%;position:relative;}.content-left_owner .message-time>div.separate-p .edited-msg,.content-right_owner .message-time>div.separate-p .edited-msg{font-size:10px;font-family:sans-serif;font-style:italic;}.content-left_owner .crypt-message>div.separate-p,.content-right_owner .crypt-message>div.separate-p{background-color:transparent !important;padding:0 !important;height:27px;}.content-left_owner .crypt-message>div.separate-p img,.content-right_owner .crypt-message>div.separate-p img{width:30px;}.content-left_owner .crypt-message>div.separate-p:before,.content-right_owner .crypt-message>div.separate-p:before{border-color:transparent !important;}.message-time .status-message{font-size:12px;color:#424242;}.message-time:hover>span{opacity:1 !important;visibility:visible !important;}.content-right_owner .message-time>span,.content-left_owner .message-time>span{opacity:0;-webkit-transition:.4s;transition:.4s;font-size:9px;font-family:sans-serif;position:absolute;top:-13px;text-align:center;min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content;background-color:red;padding:3px 5px;color:#fff;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;white-space:nowrap;border-radius:4px;visibility:hidden;}.content-right_owner .message-time>div.separate-p .edit-remove i{padding:2px 4px;position:relative;}.content-right_owner .message-time>div.separate-p .edit-remove i.lnr-pencil:after{content:'';position:absolute;width:5px;height:5px;background:${this.state.rightColor};top:0;right:-5px;}.content-right_owner .message-time>div.separate-p .edit-remove i.lnr-cross:after{content:'';position:absolute;width:5px;height:5px;background:${this.state.rightColor};bottom:0;right:-5px;}.content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container p{margin:4px 0 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}.content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container p>a:first-child{height:19px;display:inline-block;border:1px solid #ccc;width:25px;border-radius:2px;text-align:center;font-size:12px;vertical-align:middle;margin-right:7px;background-color:${this.state.rightColor};color:#fff;cursor:pointer;}.opened-pop-confirm-remove .edit-remove{opacity:1 !important;visibility:visible !important;left:-18px !important;}.content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container p>a:last-child{height:19px;display:inline-block;border:1px solid #ccc;width:25px;border-radius:2px;text-align:center;font-size:12px;vertical-align:middle;background-color:#c5cbca;color:#fff;cursor:pointer;}.content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container{position:absolute;width:120px;right:24px;padding:6px;color:#000;font-size:13px;border:1px solid #ccc;border-radius:3px;top:14px;bottom:0;margin:auto;height:55px;opacity:0;z-index:22;background:#fff;-webkit-transition:.4s;transition:.4s;visibility:hidden;cursor:default;}.content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container:after{content:'';width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:4px solid #dcdcdc;position:absolute;right:-4px;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);top:21px;}.content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container:before{content:'';width:0;height:0;border-top:3px solid transparent;border-bottom:3px solid transparent;border-left:3px solid #fff;position:absolute;right:-3px;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);top:22px;z-index:22;}.opened-pop-confirm-remove .remove-confirm-container{opacity:1 !important;visibility:visible !important;}.opened-pop-confirm-remove+.time-wrap{display:none;}.content-right_owner .message-time>div.separate-p .edit-remove{position:absolute;left:-15px;background:${this.state.rightColor};display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;top:0;width:18px;font-size:9px;height:27px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-right:1px solid;opacity:0;-webkit-transition:.2s;transition:.2s;visibility:hidden;}.content-right_owner .message-time>div.separate-p:hover .edit-remove{opacity:1;visibility:visible;left:-18px;}.content-right_owner .message-time>div.separate-p .edit-remove:after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;height:0.8px;width:18px;margin:auto;background:#fff;}.content-right_owner .message-time>div.separate-p .edit-remove:before{content:'';position:absolute;top:0;bottom:0;right:-1px;height:27px;width:0.8px;margin:auto;background:#fff;z-index:2;}.opened-encryptPopUp .edit-remove{display:none !important;}.content-right_owner .message-time>div.separate-p .encryptPopUp,.content-left_owner .message-time>div.separate-p .encryptPopUp{position:absolute;height:25px;display:none;width:25px;padding:2px;bottom:0;top:0;margin:auto;cursor:pointer;border-radius:5px;}.content-right_owner .message-time>div.separate-p .encryptPopUp{left:-30px;}.content-left_owner .message-time>div.separate-p .encryptPopUp{right:-30px;}.opened-encryptPopUp{background-color:#e7e7e7 !important;color:#000 !important;}.opened-encryptPopUp:before{border-left-color:#e7e7e7 !important;}.opened-encryptPopUp .encryptPopUp{display:block !important;}.content-right_owner .message-time>div.separate-p,.content-left_owner .message-time>div.separate-p{cursor:pointer;text-align:left;margin:0 0 5px 0;display:inline-block;padding:5px 10px;color:#fff;font-size:13px;border-radius:5px;position:relative;min-height:27px;word-break:break-all;}.content-right_owner .message-time>div.separate-p,.content-right_owner .message-time>span{background-color:${this.state.rightColor};}.content-left_owner .message-time>div.separate-p,.content-left_owner .message-time>span{background-color:${this.state.leftColor};}.content-right_owner .message-time>div.separate-p:before{content:'';width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:4px solid ${this.state.rightColor};position:absolute;right:-3px;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);top:7px;}.content-left_owner .message-time>div.separate-p:before{content:'';width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:4px solid ${this.state.leftColor};position:absolute;left:-3px;-webkit-transform:rotate(-180deg);-ms-transform:rotate(-180deg);transform:rotate(-180deg);top:7px;}.is-typing-wrap{margin-left:20px;margin-bottom:7px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:13px;}.is-typing-wrap .spinner{margin-top:5px;margin-left:10px;}\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccnVhbGFcXERlc2t0b3BcXEFTYWhha1xcZGFzZXJcXG5leHRcXENyeXB0b0dyYXBoeVxcY29tcG9uZW50c1xcZWxlbWVudHNcXFByaXZhdGVNZXNzYWdlQ29udGVudC5qc3giXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBZ1dtQyxBQUdtQyxBQWNVLEFBRUssQUFJYixBQU1JLEFBR1IsQUFLYSxBQUlBLEFBR1IsQUFRQSxBQU9BLEFBUUksQUFhQSxBQUdDLEFBR0wsQUFTRSxBQU15QixBQU03QixBQUd5QixBQUdyQixBQUlNLEFBS1gsQUFpQk0sQUFJTCxBQVNBLEFBU0ksQUFLSCxBQWNTLEFBS1QsQUFhTSxBQW9CUCxBQWNBLEFBZVUsQUFJUixBQUdLLEFBd0JSLEFBS0MsQUFZQSxBQVlhLEFBS04sQUFhUCxBQUdDLEFBSXdCLEFBSUMsQUFHWixBQUlWLEFBYStCLEFBR0EsQUFHbkMsQUFZQSxBQWFNLEFBT0YsVUF6V0wsQUEwRkssQUE0SkksQ0EzS3ZCLEFBb0NzQixBQVNBLEFBa0VWLEFBY0EsQUFtRFUsQUFZQSxBQThCdEIsQUFxQ1ksQUFZQSxDQW5YQyxBQW9CUyxBQStJRyxBQW1CQSxBQStJekIsQ0E3RUEsRUE1SjJCLEFBa0JULEFBZ0RELEFBc0xFLEFBbURFLENBN1dyQixBQThHc0IsQ0F4RUosQUFhbEIsQUFtVHNCLENBaFR0QixBQW1IZ0IsQUF3REQsQUEwREMsQ0E3RkgsQUFjQSxBQWtJQSxBQVlBLEVBbFFxQixBQStEQSxBQW1FQSxDQXRObEMsQ0E3QmdCLEFBaUNoQixBQUlBLENBMFFBLENBZ0NBLEdBdkhxQyxBQWNBLEFBa0lBLEFBWUEsQ0F0UXJDLEFBOEJjLEFBU0EsQUFzRzhCLEFBd0I3QixBQUtMLEFBWUEsQ0FoUlksQUErS1AsQUFrSEUsQ0FyUEssQUFvUkQsQ0FtRHJCLENBcE8wQixBQW1CQSxDQTlDMUIsQ0FpSmEsQUFZQSxBQTJGSSxDQXRSakIsQUE4TjBCLENBdlVOLEFBMlVwQixDQWhQc0IsQ0FpRFAsQUFTQSxDQXJEVSxBQW1MekIsQ0FoRmdCLEVBa0hELENBNUJKLEFBWUksRUEwRGYsQUFHQSxFQTlVcUIsQUFrR0gsQUE4Tk8sQ0FwUkksQ0E2RWUsQUFTQSxDQXJDNUMsQUErRDBCLEFBbUUxQixBQXVDWSxFQXRGRyxDQWtIQyxDQXJUQSxBQWtLRCxBQW1CQSxBQWdIQyxDQTFNaEIsRUE0T0EsQ0E3Q2lCLEVBMUxELEFBdUh3QixBQWNBLEFBa0lBLEFBWUEsQ0E3UGIsRUE4RVIsQ0FoTG5CLENBK0lzQixBQW1CQSxBQWdJVCxDQWhCRyxFQXJTRyxBQXlQSyxBQTBGSCxHQTFVSSxBQWlSVixDQTFMZixBQStFQSxDQTFJK0IsQUFRUCxBQU9FLEFBV0osQUFnQkksQ0F1T2hCLElBbEhnQixBQWtHVixFQWlCQSxFQTVCQSxDQXhITSxBQW1CQSxDQWhFQSxDQXJIRixBQW1WTCxDQXpVZSxFQWdKRCxBQStGSixDQTlHZixBQVNHLENBa0pPLENBdk9ELENBd1BBLEVBNUJDLENBL0lMLENBMEVtQixBQWNILEFBZ0haLEFBa0JvQyxBQVlBLEVBN054QyxFQStDTyxDQWpDSCxBQW1CQSxDQWhFTCxDQXJIaUIsR0ErRGYsQUE2RWhCLEFBMEpjLENBaUJRLENBcUVDLENBdk92QixBQW9Hd0IsQ0FrQ3hCLENBeURzQixDQTlOQSxJQTZDSSxBQW1CQSxBQWlIMUIsRUF2T3NCLEFBb0lULEtBZ0NTLEVBcUZ0QixDQW5Hc0IsQ0FqQlQsRUFxREksQUEyRkssQ0E5TkksRUF0SFksSUFnRXBCLEFBcUlGLEVBbENLLEFBbUJRLEdBOENkLEdBZEEsR0ErSEssQUFnQkUsQUFZQSxDQTNLTixFQXJJRyxDQWZRLEFBMkJGLENBd0pVLEdBakVlLEFBbURmLEtBNUtmLEFBNEpOLEdBaEJDLEFBK0pVLEVBcFJGLEFBb1NSLEFBWUQsS0ExS0MsSUFoQkksQ0EyTFcsQ0F2VVgsQUEyVFEsRUFwVUQsR0FzS04sRUE2QlcsQ0FuSy9CLEFBb1JBLENBOUxBLENBK0QrQixHQS9CL0IsRUE1SWUsTUE2SkksSUFyQ0osQUF1TkksQ0E5VW5CLENBNE1rQyxNQW5JVCxDQWdIRSxFQXRPVCxBQXFLQyxDQW1EUSxHQW9LM0IsV0F0TkEsQ0FyS0EsRUFzSG9CLEdBbUlVLEVBaERSLFdBbEZQLE1BM0NNLENBOEhGLEdBeEtFLENBc0ZILEFBOE9OLEVBNUdjLENBek1MLEtBc1RyQixBQVdZLEdBdktaLENBOUhrQixJQTFDQyxBQWdWbkIsSUFqVWtCLE1BNEJJLEtBMUNQLEdBZU8sQUFtTFQsR0FkQSxLQW5MYixDQWtNZSxDQXhKZixFQTBJQSxNQXJLQSxFQW9MQSxFQS9HdUIsbUJBQ0QsS0FpSVosTUFDSyxPQWpJTyxJQWtJSixjQWpJbEIsQUFrSWdCLFlBQ2EseUJBQ2Esc0NBQ2hCLHNCQUNRLG1IQUNQLHVCQUNiLFVBQ0ssc0NBQ0csa0JBQ3RCIiwiZmlsZSI6IkM6XFxVc2Vyc1xccnVhbGFcXERlc2t0b3BcXEFTYWhha1xcZGFzZXJcXG5leHRcXENyeXB0b0dyYXBoeVxcY29tcG9uZW50c1xcZWxlbWVudHNcXFByaXZhdGVNZXNzYWdlQ29udGVudC5qc3giLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xyXG5pbXBvcnQgUHJvcFR5cGVzIGZyb20gJ3Byb3AtdHlwZXMnO1xyXG5pbXBvcnQge2Nvbm5lY3R9IGZyb20gXCJyZWFjdC1yZWR1eFwiO1xyXG5pbXBvcnQgVUlfRUxFTUVOVFMgZnJvbSBcImNvbXBvbmVudHMvc2hhcmVkL1VJXCI7XHJcbmltcG9ydCAqIGFzIG1vbWVudCBmcm9tICdtb21lbnQnO1xyXG5pbXBvcnQgSWNvbiBmcm9tICdjb21wb25lbnRzL0ljb25zL2ljb24nO1xyXG5pbXBvcnQgZGVib3VuY2UgZnJvbSBcImxvZGFzaC5kZWJvdW5jZVwiO1xyXG5pbXBvcnQge1xyXG4gICAgX19MT0FEX01PUkVfTUVTU0FHRVMsXHJcbn0gZnJvbSAnc3RvcmUvYWN0aW9ucyc7XHJcbmltcG9ydCB7IEJ1cyB9IGZyb20gJ2NvbXBvbmVudHMvc2hhcmVkL2hlbHBlcnMvQnVzJztcclxuaW1wb3J0IHtcclxuICAgIF9FVkVSWV9QQUdFX0xJTUlUX01FU1NBR0VTXHJcbn0gZnJvbSAnY29tcG9uZW50cy9zaGFyZWQvaGVscGVycy9jb25zdGFudHMnO1xyXG5pbXBvcnQgeyBfX2dldFVzZXJNZXNzYWdlcyB9IGZyb20gJ3N0b3JlL3Jlc2VsZWN0JztcclxuaW1wb3J0IHtcclxuICAgIF9fZGV0ZWN0Q3J5cHRJY29uXHJcbn0gZnJvbSAnY29tcG9uZW50cy9zaGFyZWQvaGVscGVycy9nbG9iYWwtZnVuY3Rpb25zJztcclxuaW1wb3J0IHtcclxuICAgIF9fRURJVF9NRVNTQUdFLFxyXG4gICAgX19SRU1PVkVfTUVTU0FHRSxcclxufSBmcm9tIFwic3RvcmUvc2FnYVwiO1xyXG5cclxuY2xhc3MgUHJpdmF0ZU1lc3NhZ2VDb250ZW50IGV4dGVuZHMgUmVhY3QuUHVyZUNvbXBvbmVudHtcclxuICAgIGNvbnN0cnVjdG9yIChwcm9wcykge1xyXG4gICAgICAgIHN1cGVyKHByb3BzKTtcclxuICAgICAgICB0aGlzLnN0YXRlID0ge1xyXG4gICAgICAgICAgICBsZWZ0Q29sb3I6IHRoaXMucHJvcHMuYWN0aXZlVXNlciAmJiB0aGlzLnByb3BzLmFjdGl2ZVVzZXI/LmNvbG9yIHx8ICcjMEM0NjUxJyxcclxuICAgICAgICAgICAgcmlnaHRDb2xvcjogdGhpcy5wcm9wcy5hY3RpdmVVc2VyICYmIHRoaXMucHJvcHMubG9nZ2VkVXNlcj8uY29sb3IgfHwgJyMxQkJDOUInLFxyXG4gICAgICAgICAgICBzY3JvbGxMb2FkaW5nQWxsb3c6IHRydWUsXHJcbiAgICAgICAgICAgIG1lc3NhZ2VzU2VsZWN0b3I6IFtdLFxyXG4gICAgICAgICAgICBlbmNyeXB0SWNvbjogdHJ1ZSxcclxuICAgICAgICAgICAgc2Nyb2xsUG9zaXRpb246IG51bGwsXHJcbiAgICAgICAgICAgIHByZXZpb3VzU2Nyb2xsSGVpZ2h0OiAwLFxyXG4gICAgICAgICAgICBwcmV2aW91c1Njcm9sbFRvcDogMCxcclxuICAgICAgICAgICAgbG9hZGluZ01lc3NhZ2VzOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNFZGl0aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgaXNSZW1vdmluZzogZmFsc2UsXHJcbiAgICAgICAgICAgIGVkaXRpbmdNc2dJbmRleDogbnVsbCxcclxuICAgICAgICB9O1xyXG4gICAgICAgIHRoaXMuX21lc3NhZ2VzRW5kICAgICAgICAgICA9IG51bGw7XHJcbiAgICAgICAgdGhpcy5faGFuZGxlRG9tQ2xpY2sgICAgICAgID0gbnVsbDtcclxuICAgICAgICB0aGlzLl9oYW5kbGVDbGlja1JlbW92ZSAgICAgPSBudWxsO1xyXG4gICAgICAgIHRoaXMuX19zY3JvbGxUb0JvdHRvbSAgICAgICA9IHRoaXMuX19zY3JvbGxUb0JvdHRvbS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX19oYW5kbGVTY3JvbGxUb3AgICAgICA9IHRoaXMuX19oYW5kbGVTY3JvbGxUb3AuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9fc2hvd0VuY3J5cHRQb3BVcCAgICAgPSB0aGlzLl9fc2hvd0VuY3J5cHRQb3BVcC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX19kb0VuY3J5cHRUeXBlICAgICAgICA9IHRoaXMuX19kb0VuY3J5cHRUeXBlLmJpbmQodGhpcyk7XHJcbiAgICAgICAgdGhpcy5fX2hpZGVQb3BVcEVuY3J5cHQgICAgID0gdGhpcy5fX2hpZGVQb3BVcEVuY3J5cHQuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9fZWRpdE1lc3NhZ2UgICAgICAgICAgPSB0aGlzLl9fZWRpdE1lc3NhZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9fcmVtb3ZlTWVzc2FnZUNvbmZpcm0gPSB0aGlzLl9fcmVtb3ZlTWVzc2FnZUNvbmZpcm0uYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9fcmVtb3ZlTWVzc2FnZSAgICAgICAgPSB0aGlzLl9fcmVtb3ZlTWVzc2FnZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX19jbGlja1JlbW92ZVBvcFVwID0gdGhpcy5fX2NsaWNrUmVtb3ZlUG9wVXAuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9zY3JvbGxDb250ZW50ICAgICA9IFJlYWN0LmNyZWF0ZVJlZigpO1xyXG4gICAgICAgIEJ1cy5zdWJzY3JpYmUoJ2NhbmNlbEVkaXRpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgaXNFZGl0aW5nOiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIEJ1cy5zdWJzY3JpYmUoJ2VuZEVkaXRpbmcnLCAoKSA9PiB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgaXNFZGl0aW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgIGlzUmVtb3Zpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgZWRpdGluZ01zZ0luZGV4OiBudWxsLFxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG4gICAgX19zY3JvbGxUb0JvdHRvbSAoYmVoYXZpb3IpIHtcclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgdGhpcy5fbWVzc2FnZXNFbmQ/LnNjcm9sbEludG9WaWV3KHsgYmVoYXZpb3I6IChiZWhhdmlvciA/ICdzbW9vdGgnIDogJ2F1dG8nKX0pO1xyXG4gICAgICAgIH0sIDApXHJcbiAgICB9XHJcblxyXG4gICAgX19oYW5kbGVTY3JvbGxUb3AgKGUpIHtcclxuXHJcbiAgICAgICAgaWYgKHRoaXMuc3RhdGUuc2Nyb2xsTG9hZGluZ0FsbG93ICYmIGUudGFyZ2V0LnNjcm9sbFRvcCA8IDUwKSB7XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgcHJldmlvdXNTY3JvbGxUb3A6IHRoaXMuX3Njcm9sbENvbnRlbnQ/LnNjcm9sbFRvcCxcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzU2Nyb2xsSGVpZ2h0OiB0aGlzLl9zY3JvbGxDb250ZW50Py5zY3JvbGxIZWlnaHQsXHJcbiAgICAgICAgICAgICAgICBzY3JvbGxMb2FkaW5nQWxsb3c6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgbG9hZGluZ01lc3NhZ2VzOiB0cnVlLFxyXG4gICAgICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLl9fTE9BRF9NT1JFX01FU1NBR0VTKDEpO1xyXG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XHJcbiAgICAgICAgICAgIH0pXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBzY3JvbGxMb2FkaW5nQWxsb3c6IHRydWVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX19zaG93RW5jcnlwdFBvcFVwIChldnQsIGluZGV4LCBpc0tleSkge1xyXG4gICAgICAgIGlmIChldnQudGFyZ2V0LmNsb3Nlc3QoJy5yZW1vdmUtY29uZmlybS1jb250YWluZXInKSkgcmV0dXJuO1xyXG5cclxuICAgICAgICBjb25zdCBfY3VycmVudFNyYyA9IGV2dC50YXJnZXQuY2xvc2VzdCgnLnNlcGFyYXRlLXAnKTtcclxuICAgICAgICBpZiAoZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcub3BlbmVkLWVuY3J5cHRQb3BVcCcpICYmXHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignLm9wZW5lZC1lbmNyeXB0UG9wVXAnKSAhPT0gX2N1cnJlbnRTcmNcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcub3BlbmVkLWVuY3J5cHRQb3BVcCcpLnNldEF0dHJpYnV0ZSgnZGF0YS1oaW50LWVuY3J5cHQnLCBmYWxzZSk7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignLm9wZW5lZC1lbmNyeXB0UG9wVXAnKS5jbGFzc0xpc3QucmVtb3ZlKCdvcGVuZWQtZW5jcnlwdFBvcFVwJylcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGlzS2V5KSByZXR1cm47XHJcbiAgICAgICAgaWYgKF9jdXJyZW50U3JjKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGRhdGFJY29uID0gX2N1cnJlbnRTcmMuZ2V0QXR0cmlidXRlKCdkYXRhLWhpbnQtZW5jcnlwdCcpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXRlLm1lc3NhZ2VzU2VsZWN0b3IgPSBbLi4udGhpcy5zdGF0ZS5tZXNzYWdlc1NlbGVjdG9yXTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5tZXNzYWdlc1NlbGVjdG9yW2luZGV4XS5pc0VuY3J5cHQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0SWNvbjogSlNPTi5wYXJzZShkYXRhSWNvbiksXHJcbiAgICAgICAgICAgICAgICBtZXNzYWdlc1NlbGVjdG9yOiB0aGlzLnN0YXRlLm1lc3NhZ2VzU2VsZWN0b3JcclxuICAgICAgICAgICAgfSwgKCkgPT4gdGhpcy5mb3JjZVVwZGF0ZSgpKTtcclxuICAgICAgICAgICAgX2N1cnJlbnRTcmMuY2xhc3NMaXN0LnRvZ2dsZSgnb3BlbmVkLWVuY3J5cHRQb3BVcCcpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBzZXRUaW1lb3V0KCgpID0+IHtcclxuICAgICAgICAgICAgYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEb21DbGljayA9IHRoaXMuX19oaWRlUG9wVXBFbmNyeXB0LmJpbmQodGhpcywgaW5kZXgpKVxyXG4gICAgICAgIH0sIDApXHJcbiAgICB9XHJcblxyXG4gICAgX19oaWRlUG9wVXBFbmNyeXB0IChpbmRleCwgZSkge1xyXG4gICAgICAgIHRoaXMuc3RhdGUubWVzc2FnZXNTZWxlY3RvciA9IFsuLi50aGlzLnN0YXRlLm1lc3NhZ2VzU2VsZWN0b3JdO1xyXG4gICAgICAgIGRlbGV0ZSB0aGlzLnN0YXRlLm1lc3NhZ2VzU2VsZWN0b3JbaW5kZXhdLmlzRW5jcnlwdDtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgbWVzc2FnZXNTZWxlY3RvcjogdGhpcy5zdGF0ZS5tZXNzYWdlc1NlbGVjdG9yXHJcbiAgICAgICAgfSwgKCkgPT4gdGhpcy5mb3JjZVVwZGF0ZSgpKTtcclxuXHJcbiAgICAgICAgcmVtb3ZlRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVEb21DbGljayk7XHJcbiAgICAgICAgaWYgKCFlLnRhcmdldC5jbG9zZXN0KCdkaXZbZGF0YS1oaW50LWVuY3J5cHRdJykgJiYgZG9jdW1lbnQuYm9keS5xdWVyeVNlbGVjdG9yKCcub3BlbmVkLWVuY3J5cHRQb3BVcCcpKSB7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmJvZHkucXVlcnlTZWxlY3RvcignLm9wZW5lZC1lbmNyeXB0UG9wVXAnKS5zZXRBdHRyaWJ1dGUoJ2RhdGEtaGludC1lbmNyeXB0JywgZmFsc2UpO1xyXG4gICAgICAgICAgICBkb2N1bWVudC5ib2R5LnF1ZXJ5U2VsZWN0b3IoJy5vcGVuZWQtZW5jcnlwdFBvcFVwJykuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkLWVuY3J5cHRQb3BVcCcpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIF9fZG9FbmNyeXB0VHlwZSAoZSwgaW5kZXgpIHtcclxuICAgICAgICBjb25zdCBfY3VycmVudFNyYyA9IGUudGFyZ2V0LmNsb3Nlc3QoJy5zZXBhcmF0ZS1wJyk7XHJcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuXHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIGVuY3J5cHRJY29uOiAhdGhpcy5zdGF0ZS5lbmNyeXB0SWNvblxyXG4gICAgICAgIH0sICgpID0+IHtcclxuICAgICAgICAgICAgX2N1cnJlbnRTcmMuc2V0QXR0cmlidXRlKCdkYXRhLWhpbnQtZW5jcnlwdCcsIHRoaXMuc3RhdGUuZW5jcnlwdEljb24pO1xyXG4gICAgICAgICAgICBjb25zdCBuZXdFbmNyeXB0aW9uID0gWy4uLnRoaXMuc3RhdGUubWVzc2FnZXNTZWxlY3Rvcl07XHJcbiAgICAgICAgICAgIG5ld0VuY3J5cHRpb25baW5kZXhdLmlzRW5jcnlwdCA9IHRoaXMuc3RhdGUuZW5jcnlwdEljb247XHJcbiAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgbWVzc2FnZXNTZWxlY3RvcjogbmV3RW5jcnlwdGlvblxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgX19lZGl0TWVzc2FnZSAoZXZ0LCBtc2csIHRpbWUpIHtcclxuICAgICAgICBjb25zdCBpbmRleCA9IHRoaXMucHJvcHMubWVzc2FnZXMuZmluZEluZGV4KG1zZyA9PiBtc2cudGltZSA9PT0gdGltZSk7XHJcbiAgICAgICAgX19FRElUX01FU1NBR0UobnVsbCwgaW5kZXgsIHtpZFVzZXI6IHRoaXMucHJvcHMuYWN0aXZlVXNlcj8uaWQsIG15SWQ6IHRoaXMucHJvcHMubG9nZ2VkVXNlcj8uaWR9KS5uZXh0KCk7XHJcbiAgICAgICAgZXZ0LnN0b3BQcm9wYWdhdGlvbigpO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBpc0VkaXRpbmc6IHRydWUsXHJcbiAgICAgICAgICAgIGVkaXRpbmdNc2dJbmRleDogaW5kZXhcclxuICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIEJ1cy5kaXNwYXRjaCgnZWRpdE1lc3NhZ2UnLCB7bXNnLCBpbmRleH0pO1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgIF9fcmVtb3ZlTWVzc2FnZUNvbmZpcm0gKGV2dCkge1xyXG4gICAgICAgIGV2dC5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICBjb25zdCBfY3VycmVudFNyYyAgICAgID0gZXZ0LnRhcmdldC5jbG9zZXN0KCcuc2VwYXJhdGUtcCcpO1xyXG4gICAgICAgIGNvbnN0IGFscmVhZHlEZWNsYXJlZCAgPSBldnQudGFyZ2V0LmNsb3Nlc3QoJy5tZXNzYWdlcy1jb250ZW50Jyk/LnF1ZXJ5U2VsZWN0b3IoJy5vcGVuZWQtcG9wLWNvbmZpcm0tcmVtb3ZlJyk7XHJcbiAgICAgICAgaWYgKGFscmVhZHlEZWNsYXJlZCkge1xyXG4gICAgICAgICAgICBhbHJlYWR5RGVjbGFyZWQuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkLXBvcC1jb25maXJtLXJlbW92ZScpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBfY3VycmVudFNyYy5jbGFzc0xpc3QuYWRkKCdvcGVuZWQtcG9wLWNvbmZpcm0tcmVtb3ZlJyk7XHJcbiAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgIGFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlQ2xpY2tSZW1vdmUgPSB0aGlzLl9fY2xpY2tSZW1vdmVQb3BVcC5iaW5kKHRoaXMpKVxyXG4gICAgICAgIH0sIDApO1xyXG4gICAgfVxyXG5cclxuICAgIF9fcmVtb3ZlTWVzc2FnZSAodGltZSkge1xyXG4gICAgICAgIF9fUkVNT1ZFX01FU1NBR0UodGltZSwge2lkVXNlcjogdGhpcy5wcm9wcy5hY3RpdmVVc2VyPy5pZCwgbXlJZDogdGhpcy5wcm9wcy5sb2dnZWRVc2VyPy5pZH0pLm5leHQoKTtcclxuICAgIH1cclxuXHJcbiAgICBfX2NsaWNrUmVtb3ZlUG9wVXAgKGV2dCkge1xyXG4gICAgICAgIGNvbnN0IGFscmVhZHlEZWNsYXJlZCAgPSBldnQudGFyZ2V0LmNsb3Nlc3QoJy5tZXNzYWdlcy1jb250ZW50Jyk/LnF1ZXJ5U2VsZWN0b3IoJy5vcGVuZWQtcG9wLWNvbmZpcm0tcmVtb3ZlJyk7XHJcbiAgICAgICAgaWYgKGFscmVhZHlEZWNsYXJlZCAmJiAhZXZ0LnRhcmdldC5jbG9zZXN0KCcucmVtb3ZlLWNvbmZpcm0tY29udGFpbmVyJykgfHwgZXZ0LnRhcmdldC5jbG9zZXN0KCcudHJpZ2dlci1jbG9zZS1kaWFsb2cnKSkge1xyXG4gICAgICAgICAgICBhbHJlYWR5RGVjbGFyZWQuY2xhc3NMaXN0LnJlbW92ZSgnb3BlbmVkLXBvcC1jb25maXJtLXJlbW92ZScpO1xyXG4gICAgICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsaWNrUmVtb3ZlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkVXBkYXRlKHByZXZQcm9wcywgcHJldlN0YXRlLCBzbmFwc2hvdCkge1xyXG4gICAgICAgIC8vIGlmIChwcmV2UHJvcHMuYWN0aXZlVXNlci5pc1R5cGluZyAhPT0gdGhpcy5wcm9wcy5hY3RpdmVVc2VyLmlzVHlwaW5nKSB7IHRvZG9cclxuICAgICAgICAvLyAgICAgdGhpcy5wcm9wcy5hY3RpdmVVc2VyLmlzVHlwaW5nICYmIHRoaXMuX19zY3JvbGxUb0JvdHRvbSgnYmVoYXZpb3InKTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIC8vIERldGVjdCBpZiB0aGVyZSBhcmUgcmVtb3ZlZCBtZXNzYWdlXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMuYWN0aXZlVXNlcj8ucmVtb3ZlZE1lc3NhZ2VJbmRleCA+PSAwICYmXHJcbiAgICAgICAgICAgIChwcmV2UHJvcHMubWVzc2FnZXNbdGhpcy5wcm9wcy5hY3RpdmVVc2VyLnJlbW92ZWRNZXNzYWdlSW5kZXhdPy5yZW1vdmVkICE9PSB0aGlzLnByb3BzLm1lc3NhZ2VzW3RoaXMucHJvcHMuYWN0aXZlVXNlci5yZW1vdmVkTWVzc2FnZUluZGV4XT8ucmVtb3ZlZCB8fFxyXG4gICAgICAgICAgICAhKCgpID0+IHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHRoaXMuc3RhdGUubWVzc2FnZXNTZWxlY3Rvci5sZW5ndGggLSAodGhpcy5wcm9wcy5tZXNzYWdlcy5sZW5ndGggLSB0aGlzLnByb3BzLmFjdGl2ZVVzZXIucmVtb3ZlZE1lc3NhZ2VJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4IDwgMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUubWVzc2FnZXNTZWxlY3RvcltjdXJyZW50SW5kZXhdPy5yZW1vdmVkXHJcbiAgICAgICAgICAgIH0pKCkpXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnRJbmRleCA9IHRoaXMuc3RhdGUubWVzc2FnZXNTZWxlY3Rvci5sZW5ndGggLSAodGhpcy5wcm9wcy5tZXNzYWdlcy5sZW5ndGggLSB0aGlzLnByb3BzLmFjdGl2ZVVzZXIucmVtb3ZlZE1lc3NhZ2VJbmRleCk7XHJcbiAgICAgICAgICAgIGlmIChjdXJyZW50SW5kZXggPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgY29uc3QgbmV3RW5jcnlwdGlvbiA9IFsuLi50aGlzLnN0YXRlLm1lc3NhZ2VzU2VsZWN0b3JdO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5ld0VuY3J5cHRpb25bY3VycmVudEluZGV4XSkge1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0VuY3J5cHRpb25bY3VycmVudEluZGV4XS5yZW1vdmVkID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZXNTZWxlY3RvcjogbmV3RW5jcnlwdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIHdoZW4gZWRpdGluZyBoYXZlIGJlZW4gZmluaXNoZWRcclxuICAgICAgICBpZiAodGhpcy5wcm9wcy5hY3RpdmVVc2VyPy5lZGl0ZWRNc2dJbmRleCA+PSAwICYmXHJcbiAgICAgICAgICAgICh0aGlzLnByb3BzLm1lc3NhZ2VzW3RoaXMucHJvcHMuYWN0aXZlVXNlcj8uZWRpdGVkTXNnSW5kZXhdLm1lc3NhZ2UgIT09IHByZXZQcm9wcy5tZXNzYWdlc1t0aGlzLnByb3BzLmFjdGl2ZVVzZXI/LmVkaXRlZE1zZ0luZGV4XS5tZXNzYWdlIHx8XHJcbiAgICAgICAgICAgICgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBjdXJyZW50SW5kZXggPSB0aGlzLnN0YXRlLm1lc3NhZ2VzU2VsZWN0b3IubGVuZ3RoIC0gKHRoaXMucHJvcHMubWVzc2FnZXMubGVuZ3RoIC0gdGhpcy5wcm9wcy5hY3RpdmVVc2VyPy5lZGl0ZWRNc2dJbmRleCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoY3VycmVudEluZGV4IDwgMCkgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RhdGUubWVzc2FnZXNTZWxlY3RvcltjdXJyZW50SW5kZXhdLm1lc3NhZ2UgIT09IHRoaXMucHJvcHMubWVzc2FnZXNbdGhpcy5wcm9wcy5hY3RpdmVVc2VyPy5lZGl0ZWRNc2dJbmRleF0ubWVzc2FnZTtcclxuICAgICAgICAgICAgfSkoKSlcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgY29uc3QgY3VycmVudEluZGV4ID0gdGhpcy5zdGF0ZS5tZXNzYWdlc1NlbGVjdG9yLmxlbmd0aCAtICh0aGlzLnByb3BzLm1lc3NhZ2VzLmxlbmd0aCAtIHRoaXMucHJvcHMuYWN0aXZlVXNlcj8uZWRpdGVkTXNnSW5kZXgpO1xyXG4gICAgICAgICAgICBpZiAoY3VycmVudEluZGV4ID49IDApIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVkaXRlZEFycmF5ID0gWy4uLnRoaXMuc3RhdGUubWVzc2FnZXNTZWxlY3Rvcl07XHJcbiAgICAgICAgICAgICAgICBlZGl0ZWRBcnJheVtjdXJyZW50SW5kZXhdID0gdGhpcy5wcm9wcy5tZXNzYWdlc1t0aGlzLnByb3BzLmFjdGl2ZVVzZXI/LmVkaXRlZE1zZ0luZGV4XTtcclxuICAgICAgICAgICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICAgICAgICAgIGlzRWRpdGluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgaXNSZW1vdmluZzogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZWRpdGluZ01zZ0luZGV4OiBudWxsLFxyXG4gICAgICAgICAgICAgICAgICAgIG1lc3NhZ2VzU2VsZWN0b3I6IGVkaXRlZEFycmF5XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBTZW5kaW5nIG5vdGlmaWNhdGlvbiB3aGVuIHRoZXJlIHdhcyBub3QgYW55IG1lc3NhZ2VzXHJcbiAgICAgICAgaWYgKHRoaXMucHJvcHMubWVzc2FnZXMubGVuZ3RoID09PSAxICYmIHRoaXMucHJvcHMubWVzc2FnZXNbMF0ubWVzc2FnZSA9PT0gJycgfHwgcHJldlByb3BzLm1lc3NhZ2VzLmxlbmd0aCA9PT0gMSAmJiBwcmV2UHJvcHMubWVzc2FnZXNbMF0ubWVzc2FnZSA9PT0gJycpIHtcclxuICAgICAgICAgICAgdGhpcy5wcm9wcy5tZXNzYWdlc0hhdmVCZWVuRGVsZXRlZCgpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLyBVcGRhdGUgbWVzc2FnZSBsaXN0XHJcbiAgICAgICAgaWYgKChwcmV2UHJvcHMubWVzc2FnZXNQYWdlICE9PSB0aGlzLnByb3BzLm1lc3NhZ2VzUGFnZSB8fCBwcmV2UHJvcHMubWVzc2FnZXMubGVuZ3RoICE9PSB0aGlzLnByb3BzLm1lc3NhZ2VzLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgaWYgKCh0aGlzLnByb3BzLm1lc3NhZ2VzUGFnZSAtIDEpICogX0VWRVJZX1BBR0VfTElNSVRfTUVTU0FHRVMgPD0gdGhpcy5wcm9wcy5tZXNzYWdlcy5sZW5ndGggKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxMb2FkaW5nQWxsb3c6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ01lc3NhZ2VzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBtZXNzYWdlc1NlbGVjdG9yOiBfX2dldFVzZXJNZXNzYWdlcyh7ZGF0YTogdGhpcy5wcm9wcy5tZXNzYWdlcywgcGFnZTogdGhpcy5wcm9wcy5tZXNzYWdlc1BhZ2V9KVxyXG4gICAgICAgICAgICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChwcmV2UHJvcHMubWVzc2FnZXMubGVuZ3RoICE9PSB0aGlzLnByb3BzLm1lc3NhZ2VzLmxlbmd0aCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLl9fc2Nyb2xsVG9Cb3R0b20oJ2JlaGF2aW9yJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5fc2Nyb2xsQ29udGVudC5zY3JvbGxUbygwLCAodGhpcy5fc2Nyb2xsQ29udGVudC5zY3JvbGxIZWlnaHQgLVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zdGF0ZS5wcmV2aW91c1Njcm9sbEhlaWdodCArIHRoaXMuc3RhdGUucHJldmlvdXNTY3JvbGxUb3AgLSA0NSkpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5fX0xPQURfTU9SRV9NRVNTQUdFUygtMSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29tcG9uZW50RGlkTW91bnQoKSB7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIG1lc3NhZ2VzU2VsZWN0b3I6IF9fZ2V0VXNlck1lc3NhZ2VzKHtkYXRhOiB0aGlzLnByb3BzLm1lc3NhZ2VzLCBwYWdlOiB0aGlzLnByb3BzLm1lc3NhZ2VzUGFnZX0pXHJcbiAgICAgICAgfSwgKCkgPT4ge1xyXG4gICAgICAgICAgICB0aGlzLl9zY3JvbGxDb250ZW50Lm9uc2Nyb2xsID0gZGVib3VuY2UoKGUpID0+IHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLm1lc3NhZ2VzLmxlbmd0aCA+IF9FVkVSWV9QQUdFX0xJTUlUX01FU1NBR0VTKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fX2hhbmRsZVNjcm9sbFRvcChlKVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LCAxMDApO1xyXG4gICAgICAgICAgICB0aGlzLl9fc2Nyb2xsVG9Cb3R0b20oKTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBjb21wb25lbnRXaWxsVW5tb3VudCgpIHtcclxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZUNsaWNrUmVtb3ZlKTtcclxuICAgICAgICByZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZURvbUNsaWNrKTtcclxuICAgICAgICBCdXMudW5zdWJzY3JpYmUoJ2NhbmNlbEVkaXRpbmcnKTtcclxuICAgICAgICBCdXMudW5zdWJzY3JpYmUoJ2VuZEVkaXRpbmcnKTtcclxuICAgIH1cclxuXHJcbiAgICBnZXQgRk4gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmFjdGl2ZVVzZXIgPyB0aGlzLnByb3BzLmFjdGl2ZVVzZXIuZnVsbE5hbWUuc3BsaXQoJyAnKVswXS5zbGljZSgwLCAxKS50b1VwcGVyQ2FzZSgpIDogJyc7XHJcbiAgICB9XHJcbiAgICBnZXQgTE4gKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLnByb3BzLmFjdGl2ZVVzZXIgPyB0aGlzLnByb3BzLmFjdGl2ZVVzZXIuZnVsbE5hbWUuc3BsaXQoJyAnKVsxXS5zbGljZSgwLCAxKSB8fCAnJy50b1VwcGVyQ2FzZSgpIDogJyc7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyICgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8PlxyXG4gICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgIGNsYXNzTmFtZT17YG1lc3NhZ2VzLWNvbnRlbnQgJHt0aGlzLnN0YXRlLmxvYWRpbmdNZXNzYWdlcyA/ICdzY3JvbGwtZGlzYWJsZScgOiAnJ31gfVxyXG4gICAgICAgICAgICAgICAgICAgIHJlZj17KGVsKSA9PiB0aGlzLl9zY3JvbGxDb250ZW50ID0gZWx9PlxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmxvYWRpbmdNZXNzYWdlcyAmJiA8ZGl2IGNsYXNzTmFtZT1cInNibC1jaXJjXCI+PC9kaXY+fVxyXG4gICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLm1lc3NhZ2VzU2VsZWN0b3IubWFwKChtZXNzYWdlLCBpbmRleCkgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBfaXNPd25lciA9IG1lc3NhZ2Uub3duZXIgPT09ICdNZSc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IF9kYXRhTVNHID0gX2lzT3duZXIgPyB0aGlzLnByb3BzLmxvZ2dlZFVzZXIgOiB0aGlzLnByb3BzLmFjdGl2ZVVzZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmICghX2RhdGFNU0cpIHJldHVybiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIChcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYga2V5PXttZXNzYWdlLnRpbWUgKyBpbmRleH0gY2xhc3NOYW1lPXtfaXNPd25lciA/ICdjb250ZW50LXJpZ2h0X293bmVyJyA6ICdjb250ZW50LWxlZnRfb3duZXInfT5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8VUlfRUxFTUVOVFMuVXNlckltYWdlXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpcnN0TmFtZT17X2RhdGFNU0cuZnVsbE5hbWUuc3BsaXQoJyAnKVswXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbGFzdE5hbWU9e19kYXRhTVNHLmZ1bGxOYW1lLnNwbGl0KCcgJylbMV0gfHwgJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZpbGw9e19kYXRhTVNHLmNvbG9yfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAge21lc3NhZ2UucmVtb3ZlZCA/IDxkaXYgY2xhc3NOYW1lPVwicmVtb3ZlZC1tZXNzYWdlXCI+UmVtb3ZlZCBtZXNzYWdlPC9kaXY+IDpcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT17YG1lc3NhZ2UtdGltZSAke19fZGV0ZWN0Q3J5cHRJY29uKG1lc3NhZ2UpID8gJ2NyeXB0LW1lc3NhZ2UnIDogJyd9YH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGRhdGEtbWVzc2FnZS10eXBlPXttZXNzYWdlLmVuY3J5cHRUeXBlfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1tZXNzYWdlLWtleT17bWVzc2FnZS5rZXl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9XCJzZXBhcmF0ZS1wXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB0aGlzLl9fc2hvd0VuY3J5cHRQb3BVcChlLCBpbmRleCwgX19kZXRlY3RDcnlwdEljb24obWVzc2FnZSkpfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgZGF0YS1oaW50LWVuY3J5cHQ9e2ZhbHNlfT5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7KF9pc093bmVyICYmICFfX2RldGVjdENyeXB0SWNvbihtZXNzYWdlKSAmJiAoIXRoaXMuc3RhdGUuaXNFZGl0aW5nICYmICF0aGlzLnN0YXRlLmlzUmVtb3ZpbmcpKSAmJlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZWRpdC1yZW1vdmVcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8aSBjbGFzc05hbWU9XCJsbnIgbG5yLXBlbmNpbFwiIG9uQ2xpY2s9eyhlKSA9PiB0aGlzLl9fZWRpdE1lc3NhZ2UoZSwgbWVzc2FnZSwgbWVzc2FnZS50aW1lKX0+PC9pPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxpIGNsYXNzTmFtZT1cImxuciBsbnItY3Jvc3NcIiBvbkNsaWNrPXsoZSkgPT4gdGhpcy5fX3JlbW92ZU1lc3NhZ2VDb25maXJtKGUpfT48L2k+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJyZW1vdmUtY29uZmlybS1jb250YWluZXJcIj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgQXJlIHlvdSBzdXJlP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxhIGNsYXNzTmFtZT1cInRyaWdnZXItY2xvc2UtZGlhbG9nXCI+Tm88L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8YSBvbkNsaWNrPXsoKSA9PiB0aGlzLl9fcmVtb3ZlTWVzc2FnZShtZXNzYWdlLnRpbWUpfT5ZZXM8L2E+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvcD5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj59XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4gY2xhc3NOYW1lPVwiZW5jcnlwdFBvcFVwXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9uQ2xpY2s9eyhlKSA9PiB0aGlzLl9fZG9FbmNyeXB0VHlwZShlLCBpbmRleCl9PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHt0aGlzLnN0YXRlLmVuY3J5cHRJY29uID8gPEljb24gbmFtZT1cInVubG9ja2VkXCIgLz4gOlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxJY29uIG5hbWU9XCJsb2NrZWRcIiAvPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvc3Bhbj5cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7X19kZXRlY3RDcnlwdEljb24obWVzc2FnZSkgPyA8aW1nIHNyYz1cIi4vYXNzZXRzL2ltYWdlcy9rZXkucG5nXCIgYWx0PVwiaWNvblNlbmRcIi8+IDpcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPHNwYW4+e21lc3NhZ2UuaXNFbmNyeXB0ID09PSBmYWxzZSA/IG1lc3NhZ2UuZGVjcnlwdGVkTXNnIDovL3RoZXJlIHdpbGwgYmUgc29tZSBjYXNlIHdoaWNoIGlzIGVxdWFsIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtZXNzYWdlLmlzRW5jcnlwdCA9PT0gdHJ1ZSA/IG1lc3NhZ2UuZW5jcnlwdGVkTXNnIDogbWVzc2FnZS5tZXNzYWdlfSA8L3NwYW4+fSB7bWVzc2FnZS5lZGl0ZWQgJiYgPHNwYW4gY2xhc3NOYW1lPVwiZWRpdGVkLW1zZ1wiPihlZGl0ZWQpPC9zcGFuPn1cclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxzcGFuIGNsYXNzTmFtZT1cInRpbWUtd3JhcFwiPnttb21lbnQoK21lc3NhZ2UudGltZSkuZm9ybWF0KCdsbGwnKX08L3NwYW4+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHtfaXNPd25lciA/IChpbmRleCA9PT0gdGhpcy5zdGF0ZS5tZXNzYWdlc1NlbGVjdG9yLmxlbmd0aCAtIDEpID8gdGhpcy5wcm9wcy5hY3RpdmVVc2VyLmlzU2VlbiA/XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInN0YXR1cy1tZXNzYWdlXCI+U2VlbjwvZGl2PjogPGRpdiBjbGFzc05hbWU9XCJzdGF0dXMtbWVzc2FnZVwiPkRlbGl2ZXJlZDwvZGl2PiA6ICcnIDogJyd9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+fVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIClcclxuICAgICAgICAgICAgICAgICAgICB9KX1cclxuICAgICAgICAgICAgICAgICAgICA8ZGl2IHJlZj17KGVsKSA9PiB7IHRoaXMuX21lc3NhZ2VzRW5kID0gZWwgfX0+ey8qU2Nyb2xsIEludG8gVmlldyovfTwvZGl2PlxyXG4gICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICB7dGhpcy5wcm9wcy5hY3RpdmVVc2VyLmlzVHlwaW5nICYmIDxkaXYgY2xhc3NOYW1lPVwiaXMtdHlwaW5nLXdyYXBcIj5cclxuICAgICAgICAgICAgICAgICAgICB7dGhpcy5GTiArIHRoaXMuTE4gKyAnIGlzIHR5cGluZyAnfVxyXG4gICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdzcGlubmVyJz5cclxuICAgICAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9J2JvdW5jZTEnPjwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT0nYm91bmNlMic+PC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPSdib3VuY2UzJz48L2Rpdj5cclxuICAgICAgICAgICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICAgICAgICAgIDwvZGl2Pn1cclxuICAgICAgICAgICAgICAgIDxzdHlsZSBqc3ggZ2xvYmFsPntgXHJcbiAgICAgICAgICAgICAgICAgICAgLnNibC1jaXJjIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMzVweDtcclxuICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAzNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICM1YTVhNWE7XHJcbiAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBibG9jaztcclxuICAgICAgICAgICAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNTAlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXRvcC1jb2xvcjogdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICBhbmltYXRpb246IHJvdGF0ZSAxcyBsaW5lYXIgaW5maW5pdGU7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiA1cHggYXV0bztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIEBrZXlmcmFtZXMgcm90YXRlIHtcclxuICAgICAgICAgICAgICAgICAgICAgIDAlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMCk7IH1cclxuICAgICAgICAgICAgICAgICAgICAgIDEwMCUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0cmFuc2Zvcm06IHJvdGF0ZSgzNjBkZWcpOyB9IFxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLm1lc3NhZ2VzLWNvbnRlbnQge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDEwMCU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nLXRvcDogMTBweDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLnNjcm9sbC1kaXNhYmxlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLm1lc3NhZ2VzLWNvbnRlbnQgOjotd2Via2l0LXNjcm9sbGJhciB7XHJcbiAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAubWVzc2FnZXMtY29udGVudCA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRodW1iIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAubWVzc2FnZXMtY29udGVudCA6Oi13ZWJraXQtc2Nyb2xsYmFyLXRyYWNrIHtcclxuICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6IHRyYW5zcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1yaWdodF9vd25lciB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogZmxleC1zdGFydDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxleC1mbG93OiByb3ctcmV2ZXJzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogcmlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDAgMTBweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luOiA3cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LWxlZnRfb3duZXIge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGVuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogbGVmdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDdweDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtbGVmdF9vd25lciAubWVzc2FnZS10aW1lIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGZsZXgtc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDVweCAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXgtd2lkdGg6IDUwJTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IHJlbGF0aXZlO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1sZWZ0X293bmVyIC5yZW1vdmVkLW1lc3NhZ2UsIC5jb250ZW50LXJpZ2h0X293bmVyIC5yZW1vdmVkLW1lc3NhZ2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHggMTBweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWF4LXdpZHRoOiA1MCU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2Q5ZDdkNztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNnB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDE0cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjdweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zdHlsZTogaXRhbGljO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzc2NzU3NTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLXRvcDogNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tYm90dG9tOiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1sZWZ0X293bmVyIC5yZW1vdmVkLW1lc3NhZ2Uge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tbGVmdDogMTBweDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtcmlnaHRfb3duZXIgLnJlbW92ZWQtbWVzc2FnZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogMTBweDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtcmlnaHRfb3duZXIgLm1lc3NhZ2UtdGltZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBmbGV4LWVuZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNXB4IDEwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heC13aWR0aDogNTAlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LWxlZnRfb3duZXIgLm1lc3NhZ2UtdGltZSA+IGRpdi5zZXBhcmF0ZS1wIC5lZGl0ZWQtbXNnLCBcclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1yaWdodF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXAgLmVkaXRlZC1tc2d7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTBweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1mYW1pbHk6IHNhbnMtc2VyaWY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc3R5bGU6IGl0YWxpYztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtbGVmdF9vd25lciAuY3J5cHQtbWVzc2FnZSA+IGRpdi5zZXBhcmF0ZS1wLCBcclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1yaWdodF9vd25lciAuY3J5cHQtbWVzc2FnZSA+IGRpdi5zZXBhcmF0ZS1wIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogMCAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI3cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LWxlZnRfb3duZXIgLmNyeXB0LW1lc3NhZ2UgPiBkaXYuc2VwYXJhdGUtcCBpbWcsIFxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LXJpZ2h0X293bmVyIC5jcnlwdC1tZXNzYWdlID4gZGl2LnNlcGFyYXRlLXAgaW1ne1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMzBweDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtbGVmdF9vd25lciAuY3J5cHQtbWVzc2FnZSA+IGRpdi5zZXBhcmF0ZS1wOmJlZm9yZSwgLmNvbnRlbnQtcmlnaHRfb3duZXIgLmNyeXB0LW1lc3NhZ2UgPiBkaXYuc2VwYXJhdGUtcDpiZWZvcmUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItY29sb3I6IHRyYW5zcGFyZW50ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5tZXNzYWdlLXRpbWUgLnN0YXR1cy1tZXNzYWdlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxMnB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzQyNDI0MjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLm1lc3NhZ2UtdGltZTpob3ZlciA+IHNwYW4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtcmlnaHRfb3duZXIgLm1lc3NhZ2UtdGltZSA+IHNwYW4sXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtbGVmdF9vd25lciAubWVzc2FnZS10aW1lID4gc3BhbiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IC40cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiA5cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBzYW5zLXNlcmlmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogLTEzcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWluLXdpZHRoOiBmaXQtY29udGVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogcmVkO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAzcHggNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogI2ZmZjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxleC1zaHJpbms6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdoaXRlLXNwYWNlOiBub3dyYXA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDRweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1yaWdodF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXAgLmVkaXQtcmVtb3ZlIGl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBhZGRpbmc6IDJweCA0cHg7ICAgIFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LXJpZ2h0X293bmVyIC5tZXNzYWdlLXRpbWUgPiBkaXYuc2VwYXJhdGUtcCAuZWRpdC1yZW1vdmUgaS5sbnItcGVuY2lsOmFmdGVye1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDVweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJHt0aGlzLnN0YXRlLnJpZ2h0Q29sb3J9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1yaWdodF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXAgLmVkaXQtcmVtb3ZlIGkubG5yLWNyb3NzOmFmdGVye1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDVweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZDogJHt0aGlzLnN0YXRlLnJpZ2h0Q29sb3J9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3R0b206IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1yaWdodF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXAgLmVkaXQtcmVtb3ZlIC5yZW1vdmUtY29uZmlybS1jb250YWluZXIgcCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbjogNHB4IDAgMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBmbGV4LWVuZDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtcmlnaHRfb3duZXIgLm1lc3NhZ2UtdGltZSA+IGRpdi5zZXBhcmF0ZS1wIC5lZGl0LXJlbW92ZSAucmVtb3ZlLWNvbmZpcm0tY29udGFpbmVyIHAgPiBhOmZpcnN0LWNoaWxke1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDE5cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyOiAxcHggc29saWQgI2NjYztcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDI1cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDJweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDEycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZlcnRpY2FsLWFsaWduOiBtaWRkbGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1yaWdodDogN3B4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuc3RhdGUucmlnaHRDb2xvcn07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBcclxuICAgICAgICAgICAgICAgICAgICAub3BlbmVkLXBvcC1jb25maXJtLXJlbW92ZSAuZWRpdC1yZW1vdmUge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvcGFjaXR5OiAxICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGUgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogLTE4cHggIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtcmlnaHRfb3duZXIgLm1lc3NhZ2UtdGltZSA+IGRpdi5zZXBhcmF0ZS1wIC5lZGl0LXJlbW92ZSAucmVtb3ZlLWNvbmZpcm0tY29udGFpbmVyIHAgPiBhOmxhc3QtY2hpbGR7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMTlweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMjVweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMnB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTJweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWwtYWxpZ246IG1pZGRsZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogI2M1Y2JjYTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LXJpZ2h0X293bmVyIC5tZXNzYWdlLXRpbWUgPiBkaXYuc2VwYXJhdGUtcCAuZWRpdC1yZW1vdmUgLnJlbW92ZS1jb25maXJtLWNvbnRhaW5lcnsgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDEyMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByaWdodDogMjRweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGFkZGluZzogNnB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2xvcjogIzAwMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXI6IDFweCBzb2xpZCAjY2NjO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmFkaXVzOiAzcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogMTRweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm90dG9tOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogNTVweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgei1pbmRleDogMjI7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zaXRpb246IC40cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogaGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJzb3I6IGRlZmF1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LXJpZ2h0X293bmVyIC5tZXNzYWdlLXRpbWUgPiBkaXYuc2VwYXJhdGUtcCAuZWRpdC1yZW1vdmUgLnJlbW92ZS1jb25maXJtLWNvbnRhaW5lcjphZnRlcntcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDRweCBzb2xpZCB0cmFuc3BhcmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHRyYW5zcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICNkY2RjZGM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC00cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC13ZWJraXQtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC1tcy10cmFuc2Zvcm06IHJvdGF0ZSgwZGVnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRvcDogMjFweDtcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LXJpZ2h0X293bmVyIC5tZXNzYWdlLXRpbWUgPiBkaXYuc2VwYXJhdGUtcCAuZWRpdC1yZW1vdmUgLnJlbW92ZS1jb25maXJtLWNvbnRhaW5lcjpiZWZvcmV7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOiAzcHggc29saWQgdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDNweCBzb2xpZCB0cmFuc3BhcmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDNweCBzb2xpZCAjZmZmO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJpZ2h0OiAtM3B4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LXRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAtbXMtdHJhbnNmb3JtOiByb3RhdGUoMGRlZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDIycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDIyO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gXHJcbiAgICAgICAgICAgICAgICAgICAgLm9wZW5lZC1wb3AtY29uZmlybS1yZW1vdmUgLnJlbW92ZS1jb25maXJtLWNvbnRhaW5lciB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDEgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmlzaWJpbGl0eTogdmlzaWJsZSAhaW1wb3J0YW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAub3BlbmVkLXBvcC1jb25maXJtLXJlbW92ZSArIC50aW1lLXdyYXAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBub25lO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1yaWdodF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXAgLmVkaXQtcmVtb3Zle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IC0xNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kOiAke3RoaXMuc3RhdGUucmlnaHRDb2xvcn07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IC13ZWJraXQtYm94O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiAtd2Via2l0LWZsZXg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IC1tcy1mbGV4Ym94O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LWZsZXgtZGlyZWN0aW9uOiBjb2x1bW47XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC1tcy1mbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxOHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDlweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAyN3B4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LWJveC1wYWNrOiBqdXN0aWZ5O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAtd2Via2l0LWp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgLW1zLWZsZXgtcGFjazoganVzdGlmeTtcclxuICAgICAgICAgICAgICAgICAgICAgICAganVzdGlmeS1jb250ZW50OiBzcGFjZS1iZXR3ZWVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItcmlnaHQ6IDFweCBzb2xpZDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdHJhbnNpdGlvbjogLjJzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aXNpYmlsaXR5OiBoaWRkZW47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LXJpZ2h0X293bmVyIC5tZXNzYWdlLXRpbWUgPiBkaXYuc2VwYXJhdGUtcDpob3ZlciAuZWRpdC1yZW1vdmV7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG9wYWNpdHk6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZpc2liaWxpdHk6IHZpc2libGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IC0xOHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1yaWdodF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXAgLmVkaXQtcmVtb3ZlOmFmdGVye1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbGVmdDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMC44cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAxOHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LXJpZ2h0X293bmVyIC5tZXNzYWdlLXRpbWUgPiBkaXYuc2VwYXJhdGUtcCAuZWRpdC1yZW1vdmU6YmVmb3Jle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb250ZW50OiAnJztcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0xcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodDogMjdweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDAuOHB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQ6ICNmZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHotaW5kZXg6IDI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5vcGVuZWQtZW5jcnlwdFBvcFVwIC5lZGl0LXJlbW92ZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmUgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtcmlnaHRfb3duZXIgLm1lc3NhZ2UtdGltZSA+IGRpdi5zZXBhcmF0ZS1wIC5lbmNyeXB0UG9wVXAsXHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtbGVmdF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXAgLmVuY3J5cHRQb3BVcHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDI1cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IG5vbmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAyNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiAycHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvdHRvbTogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdG9wOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IGF1dG87XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtcmlnaHRfb3duZXIgLm1lc3NhZ2UtdGltZSA+IGRpdi5zZXBhcmF0ZS1wIC5lbmNyeXB0UG9wVXAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZWZ0OiAtMzBweDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtbGVmdF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXAgLmVuY3J5cHRQb3BVcHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0zMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAub3BlbmVkLWVuY3J5cHRQb3BVcCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICNlN2U3ZTcgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICMwMDAgIWltcG9ydGFudDtcclxuICAgICAgICAgICAgICAgICAgICB9IFxyXG4gICAgICAgICAgICAgICAgICAgIC5vcGVuZWQtZW5jcnlwdFBvcFVwOmJlZm9yZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1sZWZ0LWNvbG9yOiAjZTdlN2U3ICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5vcGVuZWQtZW5jcnlwdFBvcFVwIC5lbmNyeXB0UG9wVXB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrICFpbXBvcnRhbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5jb250ZW50LXJpZ2h0X293bmVyIC5tZXNzYWdlLXRpbWUgPiBkaXYuc2VwYXJhdGUtcCxcclxuICAgICAgICAgICAgICAgICAgICAuY29udGVudC1sZWZ0X293bmVyIC5tZXNzYWdlLXRpbWUgPiBkaXYuc2VwYXJhdGUtcCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjpsZWZ0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW46IDAgMCA1cHggMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwYWRkaW5nOiA1cHggMTBweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sb3I6ICNmZmY7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMTNweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogNXB4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogcmVsYXRpdmU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1pbi1oZWlnaHQ6IDI3cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtcmlnaHRfb3duZXIgLm1lc3NhZ2UtdGltZSA+IGRpdi5zZXBhcmF0ZS1wLCAuY29udGVudC1yaWdodF9vd25lciAubWVzc2FnZS10aW1lID4gc3BhbiB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICR7dGhpcy5zdGF0ZS5yaWdodENvbG9yfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtbGVmdF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXAsIC5jb250ZW50LWxlZnRfb3duZXIgLm1lc3NhZ2UtdGltZSA+IHNwYW4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAke3RoaXMuc3RhdGUubGVmdENvbG9yfTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtcmlnaHRfb3duZXIgLm1lc3NhZ2UtdGltZSA+IGRpdi5zZXBhcmF0ZS1wOmJlZm9yZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRlbnQ6ICcnO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogMDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaGVpZ2h0OiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItdG9wOiA0cHggc29saWQgdHJhbnNwYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci1ib3R0b206IDRweCBzb2xpZCB0cmFuc3BhcmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWxlZnQ6IDRweCBzb2xpZCAke3RoaXMuc3RhdGUucmlnaHRDb2xvcn07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uOiBhYnNvbHV0ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmlnaHQ6IC0zcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKDBkZWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDdweDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLmNvbnRlbnQtbGVmdF9vd25lciAubWVzc2FnZS10aW1lID4gZGl2LnNlcGFyYXRlLXA6YmVmb3JlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29udGVudDogJyc7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdpZHRoOiAwO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJvcmRlci10b3A6IDRweCBzb2xpZCB0cmFuc3BhcmVudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm9yZGVyLWJvdHRvbTogNHB4IHNvbGlkIHRyYW5zcGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBib3JkZXItbGVmdDogNHB4IHNvbGlkICR7dGhpcy5zdGF0ZS5sZWZ0Q29sb3J9O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlZnQ6IC0zcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRyYW5zZm9ybTogcm90YXRlKC0xODBkZWcpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0b3A6IDdweDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgLmlzLXR5cGluZy13cmFwIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luLWxlZnQ6IDIwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDdweDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzcGxheTogZmxleDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZm9udC1zaXplOiAxM3B4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuaXMtdHlwaW5nLXdyYXAgLnNwaW5uZXJ7IFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW4tdG9wOiA1cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1sZWZ0OiAxMHB4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGB9PC9zdHlsZT5cclxuICAgICAgICAgICAgPC8+XHJcbiAgICAgICApXHJcbiAgICB9XHJcbn1cclxuXHJcblByaXZhdGVNZXNzYWdlQ29udGVudC5wcm9wVHlwZXMgPSB7XHJcbiAgICBtZXNzYWdlc0hhdmVCZWVuRGVsZXRlZDogUHJvcFR5cGVzLmZ1bmMsXHJcbn07XHJcblxyXG5jb25zdCBtYXBTdGF0ZVRvUHJvcHMgPSBzdGF0ZSA9PiAoe1xyXG4gICAgbG9nZ2VkVXNlcjogc3RhdGUuY2hhdC5sb2dnZWRVc2VyLFxyXG4gICAgYWN0aXZlVXNlcjogc3RhdGUuY2hhdC5hY3RpdmVVc2VyLFxyXG4gICAgbWVzc2FnZXM6IHN0YXRlLmNoYXQuYWN0aXZlVXNlck1lc3NhZ2VzLFxyXG4gICAgbWVzc2FnZXNQYWdlOiBzdGF0ZS5jaGF0Lm1lc3NhZ2VzUGFnZSxcclxufSk7XHJcblxyXG5jb25zdCBtYXBEaXNwYXRjaFRvUHJvcHMgPSB7XHJcbiAgICBfX0xPQURfTU9SRV9NRVNTQUdFU1xyXG59O1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY29ubmVjdChcclxuICAgIG1hcFN0YXRlVG9Qcm9wcyxcclxuICAgIG1hcERpc3BhdGNoVG9Qcm9wc1xyXG4pKFByaXZhdGVNZXNzYWdlQ29udGVudCk7XHJcbiJdfQ== */\n/*@ sourceURL=C:\\\\Users\\\\ruala\\\\Desktop\\\\ASahak\\\\daser\\\\next\\\\CryptoGraphy\\\\components\\\\elements\\\\PrivateMessageContent.jsx */`));\n  }\n\n}\n\nPrivateMessageContent.propTypes = {\n  messagesHaveBeenDeleted: PropTypes.func\n};\n\nconst mapStateToProps = state => ({\n  loggedUser: state.chat.loggedUser,\n  activeUser: state.chat.activeUser,\n  messages: state.chat.activeUserMessages,\n  messagesPage: state.chat.messagesPage\n});\n\nconst mapDispatchToProps = {\n  __LOAD_MORE_MESSAGES\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(PrivateMessageContent);","map":{"version":3,"sources":["C:/Users/ruala/Desktop/ASahak/daser/next/CryptoGraphy/components/elements/PrivateMessageContent.jsx"],"names":["React","PropTypes","connect","UI_ELEMENTS","moment","Icon","debounce","__LOAD_MORE_MESSAGES","Bus","_EVERY_PAGE_LIMIT_MESSAGES","__getUserMessages","__detectCryptIcon","__EDIT_MESSAGE","__REMOVE_MESSAGE","PrivateMessageContent","PureComponent","constructor","props","state","leftColor","activeUser","color","rightColor","loggedUser","scrollLoadingAllow","messagesSelector","encryptIcon","scrollPosition","previousScrollHeight","previousScrollTop","loadingMessages","isEditing","isRemoving","editingMsgIndex","_messagesEnd","_handleDomClick","_handleClickRemove","__scrollToBottom","bind","__handleScrollTop","__showEncryptPopUp","__doEncryptType","__hidePopUpEncrypt","__editMessage","__removeMessageConfirm","__removeMessage","__clickRemovePopUp","_scrollContent","createRef","subscribe","setState","behavior","setTimeout","scrollIntoView","e","target","scrollTop","scrollHeight","evt","index","isKey","closest","_currentSrc","document","body","querySelector","setAttribute","classList","remove","dataIcon","getAttribute","isEncrypt","JSON","parse","forceUpdate","toggle","addEventListener","removeEventListener","stopPropagation","newEncryption","msg","time","messages","findIndex","idUser","id","myId","next","dispatch","alreadyDeclared","add","componentDidUpdate","prevProps","prevState","snapshot","removedMessageIndex","removed","currentIndex","length","editedMsgIndex","message","editedArray","messagesHaveBeenDeleted","messagesPage","data","page","scrollTo","componentDidMount","onscroll","componentWillUnmount","unsubscribe","FN","fullName","split","slice","toUpperCase","LN","render","el","map","_isOwner","owner","_dataMSG","encryptType","key","decryptedMsg","encryptedMsg","edited","format","isSeen","isTyping","propTypes","func","mapStateToProps","chat","activeUserMessages","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {connect} from \"react-redux\";\r\nimport UI_ELEMENTS from \"components/shared/UI\";\r\nimport * as moment from 'moment';\r\nimport Icon from 'components/Icons/icon';\r\nimport debounce from \"lodash.debounce\";\r\nimport {\r\n    __LOAD_MORE_MESSAGES,\r\n} from 'store/actions';\r\nimport { Bus } from 'components/shared/helpers/Bus';\r\nimport {\r\n    _EVERY_PAGE_LIMIT_MESSAGES\r\n} from 'components/shared/helpers/constants';\r\nimport { __getUserMessages } from 'store/reselect';\r\nimport {\r\n    __detectCryptIcon\r\n} from 'components/shared/helpers/global-functions';\r\nimport {\r\n    __EDIT_MESSAGE,\r\n    __REMOVE_MESSAGE,\r\n} from \"store/saga\";\r\n\r\nclass PrivateMessageContent extends React.PureComponent{\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            leftColor: this.props.activeUser && this.props.activeUser?.color || '#0C4651',\r\n            rightColor: this.props.activeUser && this.props.loggedUser?.color || '#1BBC9B',\r\n            scrollLoadingAllow: true,\r\n            messagesSelector: [],\r\n            encryptIcon: true,\r\n            scrollPosition: null,\r\n            previousScrollHeight: 0,\r\n            previousScrollTop: 0,\r\n            loadingMessages: false,\r\n            isEditing: false,\r\n            isRemoving: false,\r\n            editingMsgIndex: null,\r\n        };\r\n        this._messagesEnd           = null;\r\n        this._handleDomClick        = null;\r\n        this._handleClickRemove     = null;\r\n        this.__scrollToBottom       = this.__scrollToBottom.bind(this);\r\n        this.__handleScrollTop      = this.__handleScrollTop.bind(this);\r\n        this.__showEncryptPopUp     = this.__showEncryptPopUp.bind(this);\r\n        this.__doEncryptType        = this.__doEncryptType.bind(this);\r\n        this.__hidePopUpEncrypt     = this.__hidePopUpEncrypt.bind(this);\r\n        this.__editMessage          = this.__editMessage.bind(this);\r\n        this.__removeMessageConfirm = this.__removeMessageConfirm.bind(this);\r\n        this.__removeMessage        = this.__removeMessage.bind(this);\r\n        this.__clickRemovePopUp = this.__clickRemovePopUp.bind(this);\r\n        this._scrollContent     = React.createRef();\r\n        Bus.subscribe('cancelEditing', () => {\r\n            this.setState({\r\n                isEditing: false\r\n            })\r\n        });\r\n        Bus.subscribe('endEditing', () => {\r\n            this.setState({\r\n                isEditing: false,\r\n                isRemoving: false,\r\n                editingMsgIndex: null,\r\n            })\r\n        });\r\n    }\r\n    __scrollToBottom (behavior) {\r\n        setTimeout(() => {\r\n            this._messagesEnd?.scrollIntoView({ behavior: (behavior ? 'smooth' : 'auto')});\r\n        }, 0)\r\n    }\r\n\r\n    __handleScrollTop (e) {\r\n\r\n        if (this.state.scrollLoadingAllow && e.target.scrollTop < 50) {\r\n            this.setState({\r\n                previousScrollTop: this._scrollContent?.scrollTop,\r\n                previousScrollHeight: this._scrollContent?.scrollHeight,\r\n                scrollLoadingAllow: false,\r\n                loadingMessages: true,\r\n            }, () => {\r\n                setTimeout(() => {\r\n                    this.props.__LOAD_MORE_MESSAGES(1);\r\n                }, 1000);\r\n            })\r\n        } else {\r\n            this.setState({\r\n                scrollLoadingAllow: true\r\n            })\r\n        }\r\n    }\r\n\r\n    __showEncryptPopUp (evt, index, isKey) {\r\n        if (evt.target.closest('.remove-confirm-container')) return;\r\n\r\n        const _currentSrc = evt.target.closest('.separate-p');\r\n        if (document.body.querySelector('.opened-encryptPopUp') &&\r\n            document.body.querySelector('.opened-encryptPopUp') !== _currentSrc\r\n        ) {\r\n            document.body.querySelector('.opened-encryptPopUp').setAttribute('data-hint-encrypt', false);\r\n            document.body.querySelector('.opened-encryptPopUp').classList.remove('opened-encryptPopUp')\r\n        }\r\n        if (isKey) return;\r\n        if (_currentSrc) {\r\n            const dataIcon = _currentSrc.getAttribute('data-hint-encrypt');\r\n            this.state.messagesSelector = [...this.state.messagesSelector];\r\n            this.state.messagesSelector[index].isEncrypt = false;\r\n            this.setState({\r\n                encryptIcon: JSON.parse(dataIcon),\r\n                messagesSelector: this.state.messagesSelector\r\n            }, () => this.forceUpdate());\r\n            _currentSrc.classList.toggle('opened-encryptPopUp');\r\n        }\r\n        setTimeout(() => {\r\n            addEventListener('click', this._handleDomClick = this.__hidePopUpEncrypt.bind(this, index))\r\n        }, 0)\r\n    }\r\n\r\n    __hidePopUpEncrypt (index, e) {\r\n        this.state.messagesSelector = [...this.state.messagesSelector];\r\n        delete this.state.messagesSelector[index].isEncrypt;\r\n        this.setState({\r\n            messagesSelector: this.state.messagesSelector\r\n        }, () => this.forceUpdate());\r\n\r\n        removeEventListener('click', this._handleDomClick);\r\n        if (!e.target.closest('div[data-hint-encrypt]') && document.body.querySelector('.opened-encryptPopUp')) {\r\n            document.body.querySelector('.opened-encryptPopUp').setAttribute('data-hint-encrypt', false);\r\n            document.body.querySelector('.opened-encryptPopUp').classList.remove('opened-encryptPopUp')\r\n        }\r\n    }\r\n\r\n    __doEncryptType (e, index) {\r\n        const _currentSrc = e.target.closest('.separate-p');\r\n        e.stopPropagation();\r\n\r\n        this.setState({\r\n            encryptIcon: !this.state.encryptIcon\r\n        }, () => {\r\n            _currentSrc.setAttribute('data-hint-encrypt', this.state.encryptIcon);\r\n            const newEncryption = [...this.state.messagesSelector];\r\n            newEncryption[index].isEncrypt = this.state.encryptIcon;\r\n            this.setState({\r\n                messagesSelector: newEncryption\r\n            })\r\n        })\r\n    }\r\n\r\n    __editMessage (evt, msg, time) {\r\n        const index = this.props.messages.findIndex(msg => msg.time === time);\r\n        __EDIT_MESSAGE(null, index, {idUser: this.props.activeUser?.id, myId: this.props.loggedUser?.id}).next();\r\n        evt.stopPropagation();\r\n        this.setState({\r\n            isEditing: true,\r\n            editingMsgIndex: index\r\n        }, () => {\r\n            Bus.dispatch('editMessage', {msg, index});\r\n        })\r\n    }\r\n\r\n     __removeMessageConfirm (evt) {\r\n        evt.stopPropagation();\r\n        const _currentSrc      = evt.target.closest('.separate-p');\r\n        const alreadyDeclared  = evt.target.closest('.messages-content')?.querySelector('.opened-pop-confirm-remove');\r\n        if (alreadyDeclared) {\r\n            alreadyDeclared.classList.remove('opened-pop-confirm-remove');\r\n        }\r\n        _currentSrc.classList.add('opened-pop-confirm-remove');\r\n        setTimeout(() => {\r\n            addEventListener('click', this._handleClickRemove = this.__clickRemovePopUp.bind(this))\r\n        }, 0);\r\n    }\r\n\r\n    __removeMessage (time) {\r\n        __REMOVE_MESSAGE(time, {idUser: this.props.activeUser?.id, myId: this.props.loggedUser?.id}).next();\r\n    }\r\n\r\n    __clickRemovePopUp (evt) {\r\n        const alreadyDeclared  = evt.target.closest('.messages-content')?.querySelector('.opened-pop-confirm-remove');\r\n        if (alreadyDeclared && !evt.target.closest('.remove-confirm-container') || evt.target.closest('.trigger-close-dialog')) {\r\n            alreadyDeclared.classList.remove('opened-pop-confirm-remove');\r\n            removeEventListener('click', this._handleClickRemove);\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        // if (prevProps.activeUser.isTyping !== this.props.activeUser.isTyping) { todo\r\n        //     this.props.activeUser.isTyping && this.__scrollToBottom('behavior');\r\n        // }\r\n\r\n        // Detect if there are removed message\r\n        if (this.props.activeUser?.removedMessageIndex >= 0 &&\r\n            (prevProps.messages[this.props.activeUser.removedMessageIndex]?.removed !== this.props.messages[this.props.activeUser.removedMessageIndex]?.removed ||\r\n            !(() => {\r\n                const currentIndex = this.state.messagesSelector.length - (this.props.messages.length - this.props.activeUser.removedMessageIndex);\r\n                if (currentIndex < 0) return false;\r\n                return this.state.messagesSelector[currentIndex]?.removed\r\n            })())\r\n        ) {\r\n            const currentIndex = this.state.messagesSelector.length - (this.props.messages.length - this.props.activeUser.removedMessageIndex);\r\n            if (currentIndex >= 0) {\r\n                const newEncryption = [...this.state.messagesSelector];\r\n                if (newEncryption[currentIndex]) {\r\n                    newEncryption[currentIndex].removed = true;\r\n                    this.setState({\r\n                        messagesSelector: newEncryption\r\n                    })\r\n                }\r\n            }\r\n        }\r\n\r\n        // when editing have been finished\r\n        if (this.props.activeUser?.editedMsgIndex >= 0 &&\r\n            (this.props.messages[this.props.activeUser?.editedMsgIndex].message !== prevProps.messages[this.props.activeUser?.editedMsgIndex].message ||\r\n            (() => {\r\n                const currentIndex = this.state.messagesSelector.length - (this.props.messages.length - this.props.activeUser?.editedMsgIndex);\r\n                if (currentIndex < 0) return false;\r\n                return this.state.messagesSelector[currentIndex].message !== this.props.messages[this.props.activeUser?.editedMsgIndex].message;\r\n            })())\r\n        ) {\r\n            const currentIndex = this.state.messagesSelector.length - (this.props.messages.length - this.props.activeUser?.editedMsgIndex);\r\n            if (currentIndex >= 0) {\r\n                const editedArray = [...this.state.messagesSelector];\r\n                editedArray[currentIndex] = this.props.messages[this.props.activeUser?.editedMsgIndex];\r\n                this.setState({\r\n                    isEditing: false,\r\n                    isRemoving: false,\r\n                    editingMsgIndex: null,\r\n                    messagesSelector: editedArray\r\n                });\r\n            }\r\n        }\r\n        // Sending notification when there was not any messages\r\n        if (this.props.messages.length === 1 && this.props.messages[0].message === '' || prevProps.messages.length === 1 && prevProps.messages[0].message === '') {\r\n            this.props.messagesHaveBeenDeleted();\r\n        }\r\n        // Update message list\r\n        if ((prevProps.messagesPage !== this.props.messagesPage || prevProps.messages.length !== this.props.messages.length)) {\r\n            if ((this.props.messagesPage - 1) * _EVERY_PAGE_LIMIT_MESSAGES <= this.props.messages.length ) {\r\n                this.setState({\r\n                    scrollLoadingAllow: true,\r\n                    loadingMessages: false,\r\n                    messagesSelector: __getUserMessages({data: this.props.messages, page: this.props.messagesPage})\r\n                }, () => {\r\n                    if (prevProps.messages.length !== this.props.messages.length) {\r\n                        this.__scrollToBottom('behavior');\r\n                    } else {\r\n                        this._scrollContent.scrollTo(0, (this._scrollContent.scrollHeight -\r\n                            this.state.previousScrollHeight + this.state.previousScrollTop - 45));\r\n                    }\r\n                });\r\n            } else {\r\n                this.props.__LOAD_MORE_MESSAGES(-1);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setState({\r\n            messagesSelector: __getUserMessages({data: this.props.messages, page: this.props.messagesPage})\r\n        }, () => {\r\n            this._scrollContent.onscroll = debounce((e) => {\r\n                if (this.props.messages.length > _EVERY_PAGE_LIMIT_MESSAGES) {\r\n                    this.__handleScrollTop(e)\r\n                }\r\n            }, 100);\r\n            this.__scrollToBottom();\r\n        });\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        removeEventListener('click', this._handleClickRemove);\r\n        removeEventListener('click', this._handleDomClick);\r\n        Bus.unsubscribe('cancelEditing');\r\n        Bus.unsubscribe('endEditing');\r\n    }\r\n\r\n    get FN () {\r\n        return this.props.activeUser ? this.props.activeUser.fullName.split(' ')[0].slice(0, 1).toUpperCase() : '';\r\n    }\r\n    get LN () {\r\n        return this.props.activeUser ? this.props.activeUser.fullName.split(' ')[1].slice(0, 1) || ''.toUpperCase() : '';\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <>\r\n                <div\r\n                    className={`messages-content ${this.state.loadingMessages ? 'scroll-disable' : ''}`}\r\n                    ref={(el) => this._scrollContent = el}>\r\n                    {this.state.loadingMessages && <div className=\"sbl-circ\"></div>}\r\n                    {this.state.messagesSelector.map((message, index) => {\r\n                        const _isOwner = message.owner === 'Me';\r\n                        const _dataMSG = _isOwner ? this.props.loggedUser : this.props.activeUser;\r\n                        if (!_dataMSG) return '';\r\n                        return (\r\n                            <div key={message.time + index} className={_isOwner ? 'content-right_owner' : 'content-left_owner'}>\r\n                                <UI_ELEMENTS.UserImage\r\n                                    firstName={_dataMSG.fullName.split(' ')[0]}\r\n                                    lastName={_dataMSG.fullName.split(' ')[1] || ''}\r\n                                    fill={_dataMSG.color}\r\n                                />\r\n                                {message.removed ? <div className=\"removed-message\">Removed message</div> :\r\n                                <div className={`message-time ${__detectCryptIcon(message) ? 'crypt-message' : ''}`}\r\n                                     data-message-type={message.encryptType}\r\n                                     data-message-key={message.key}>\r\n                                    <div\r\n                                        className=\"separate-p\"\r\n                                        onClick={(e) => this.__showEncryptPopUp(e, index, __detectCryptIcon(message))}\r\n                                        data-hint-encrypt={false}>\r\n\r\n                                        {(_isOwner && !__detectCryptIcon(message) && (!this.state.isEditing && !this.state.isRemoving)) &&\r\n                                        <span className=\"edit-remove\">\r\n                                            <i className=\"lnr lnr-pencil\" onClick={(e) => this.__editMessage(e, message, message.time)}></i>\r\n                                            <i className=\"lnr lnr-cross\" onClick={(e) => this.__removeMessageConfirm(e)}></i>\r\n                                            <div className=\"remove-confirm-container\">\r\n                                                Are you sure?\r\n                                                <p>\r\n                                                    <a className=\"trigger-close-dialog\">No</a>\r\n                                                    <a onClick={() => this.__removeMessage(message.time)}>Yes</a>\r\n                                                </p>\r\n                                            </div>\r\n                                        </span>}\r\n\r\n                                        <span className=\"encryptPopUp\"\r\n                                              onClick={(e) => this.__doEncryptType(e, index)}>\r\n                                            {this.state.encryptIcon ? <Icon name=\"unlocked\" /> :\r\n                                            <Icon name=\"locked\" />}\r\n                                        </span>\r\n\r\n                                        {__detectCryptIcon(message) ? <img src=\"./assets/images/key.png\" alt=\"iconSend\"/> :\r\n\r\n                                            <span>{message.isEncrypt === false ? message.decryptedMsg ://there will be some case which is equal undefined\r\n                                                message.isEncrypt === true ? message.encryptedMsg : message.message} </span>} {message.edited && <span className=\"edited-msg\">(edited)</span>}\r\n                                    </div>\r\n                                    <span className=\"time-wrap\">{moment(+message.time).format('lll')}</span>\r\n                                    {_isOwner ? (index === this.state.messagesSelector.length - 1) ? this.props.activeUser.isSeen ?\r\n                                        <div className=\"status-message\">Seen</div>: <div className=\"status-message\">Delivered</div> : '' : ''}\r\n                                </div>}\r\n                            </div>\r\n                        )\r\n                    })}\r\n                    <div ref={(el) => { this._messagesEnd = el }}>{/*Scroll Into View*/}</div>\r\n                </div>\r\n                {this.props.activeUser.isTyping && <div className=\"is-typing-wrap\">\r\n                    {this.FN + this.LN + ' is typing '}\r\n                    <div className='spinner'>\r\n                        <div className='bounce1'></div>\r\n                        <div className='bounce2'></div>\r\n                        <div className='bounce3'></div>\r\n                    </div>\r\n                </div>}\r\n                <style jsx global>{`\r\n                    .sbl-circ {\r\n                      height: 35px;\r\n                      width: 35px;\r\n                      color: #5a5a5a;\r\n                      position: relative;\r\n                      display: block;\r\n                      border: 2px solid;\r\n                      border-radius: 50%;\r\n                      border-top-color: transparent;\r\n                      animation: rotate 1s linear infinite; \r\n                      margin: 5px auto;\r\n                    }\r\n\r\n                    @keyframes rotate {\r\n                      0% {\r\n                        transform: rotate(0); }\r\n                      100% {\r\n                        transform: rotate(360deg); } \r\n                    }\r\n                        \r\n                    .messages-content {\r\n                        height: 100%;\r\n                        overflow-x: hidden;\r\n                        position: relative;\r\n                        padding-top: 10px;\r\n                    }\r\n                    .scroll-disable {\r\n                        overflow: hidden;\r\n                    }\r\n                    .messages-content ::-webkit-scrollbar {\r\n                      width: 0px;\r\n                      height: 10px;\r\n                    }\r\n                    \r\n                    .messages-content ::-webkit-scrollbar-thumb {\r\n                      background: transparent;\r\n                    }\r\n                    \r\n                    .messages-content ::-webkit-scrollbar-track {\r\n                      background: transparent;\r\n                    }\r\n                    .content-right_owner {\r\n                        display: flex;\r\n                        justify-content: flex-start;\r\n                        flex-flow: row-reverse;\r\n                        text-align: right;\r\n                        padding: 0 10px;\r\n                        margin: 7px;\r\n                    }\r\n                    .content-left_owner {\r\n                        display: flex;\r\n                        justify-content: end;\r\n                        text-align: left;\r\n                        padding: 0 10px;\r\n                        margin: 7px;\r\n                    }\r\n                    .content-left_owner .message-time {\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        align-items: flex-start;\r\n                        padding: 5px 10px;\r\n                        max-width: 50%;\r\n                        position: relative;\r\n                    }\r\n                    .content-left_owner .removed-message, .content-right_owner .removed-message {\r\n                        padding: 5px 10px;\r\n                        max-width: 50%;\r\n                        position: relative;\r\n                        background-color: #d9d7d7;\r\n                        border-radius: 6px;\r\n                        font-size: 14px;\r\n                        height: 27px;\r\n                        font-style: italic;\r\n                        color: #767575;\r\n                        margin-top: 5px;\r\n                        margin-bottom: 10px;\r\n                    }\r\n                    .content-left_owner .removed-message {\r\n                        margin-left: 10px;\r\n                    }\r\n                    .content-right_owner .removed-message {\r\n                        margin-right: 10px;\r\n                    }\r\n                    .content-right_owner .message-time {\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        align-items: flex-end;\r\n                        padding: 5px 10px;\r\n                        max-width: 50%;\r\n                        position: relative;\r\n                    }\r\n                    .content-left_owner .message-time > div.separate-p .edited-msg, \r\n                    .content-right_owner .message-time > div.separate-p .edited-msg{\r\n                        font-size: 10px;\r\n                        font-family: sans-serif;\r\n                        font-style: italic;\r\n                    }\r\n                    .content-left_owner .crypt-message > div.separate-p, \r\n                    .content-right_owner .crypt-message > div.separate-p {\r\n                        background-color: transparent !important;\r\n                        padding: 0 !important;\r\n                        height: 27px;\r\n                    }\r\n                    .content-left_owner .crypt-message > div.separate-p img, \r\n                    .content-right_owner .crypt-message > div.separate-p img{\r\n                        width: 30px;\r\n                    }\r\n                    .content-left_owner .crypt-message > div.separate-p:before, .content-right_owner .crypt-message > div.separate-p:before {\r\n                        border-color: transparent !important;\r\n                    }\r\n                    .message-time .status-message {\r\n                        font-size: 12px;\r\n                        color: #424242;\r\n                    }\r\n                    .message-time:hover > span {\r\n                        opacity: 1 !important;\r\n                        visibility: visible !important;\r\n                    }\r\n                    .content-right_owner .message-time > span,\r\n                    .content-left_owner .message-time > span {\r\n                        opacity: 0;\r\n                        transition: .4s;\r\n                        font-size: 9px;\r\n                        font-family: sans-serif;\r\n                        position: absolute;\r\n                        top: -13px;\r\n                        text-align: center;\r\n                        min-width: fit-content;\r\n                        background-color: red;\r\n                        padding: 3px 5px;\r\n                        color: #fff;\r\n                        flex-shrink: 0;\r\n                        white-space: nowrap;\r\n                        border-radius: 4px;\r\n                        visibility: hidden;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove i{\r\n                        padding: 2px 4px;    \r\n                        position: relative;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove i.lnr-pencil:after{\r\n                        content: '';\r\n                        position: absolute;\r\n                        width: 5px;\r\n                        height: 5px;\r\n                        background: ${this.state.rightColor};\r\n                        top: 0;\r\n                        right: -5px;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove i.lnr-cross:after{\r\n                        content: '';\r\n                        position: absolute;\r\n                        width: 5px;\r\n                        height: 5px;\r\n                        background: ${this.state.rightColor};\r\n                        bottom: 0;\r\n                        right: -5px;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove .remove-confirm-container p {\r\n                        margin: 4px 0 0;\r\n                        display: flex;\r\n                        justify-content: flex-end;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove .remove-confirm-container p > a:first-child{\r\n                        height: 19px;\r\n                        display: inline-block;\r\n                        border: 1px solid #ccc;\r\n                        width: 25px;\r\n                        border-radius: 2px;\r\n                        text-align: center;\r\n                        font-size: 12px;\r\n                        vertical-align: middle;\r\n                        margin-right: 7px;\r\n                        background-color: ${this.state.rightColor};\r\n                        color: #fff;\r\n                        cursor: pointer;\r\n                    } \r\n                    .opened-pop-confirm-remove .edit-remove {\r\n                        opacity: 1 !important;\r\n                        visibility: visible !important;\r\n                        left: -18px !important;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove .remove-confirm-container p > a:last-child{\r\n                        height: 19px;\r\n                        display: inline-block;\r\n                        border: 1px solid #ccc;\r\n                        width: 25px;\r\n                        border-radius: 2px;\r\n                        text-align: center;\r\n                        font-size: 12px;\r\n                        vertical-align: middle;\r\n                        background-color: #c5cbca;\r\n                        color: #fff;\r\n                        cursor: pointer;\r\n                    } \r\n                    .content-right_owner .message-time > div.separate-p .edit-remove .remove-confirm-container{ \r\n                        position: absolute;\r\n                        width: 120px;\r\n                        right: 24px;\r\n                        padding: 6px;\r\n                        color: #000;\r\n                        font-size: 13px;\r\n                        border: 1px solid #ccc;\r\n                        border-radius: 3px;\r\n                        top: 14px;\r\n                        bottom: 0;\r\n                        margin: auto;\r\n                        height: 55px;\r\n                        opacity: 0;\r\n                        z-index: 22;\r\n                        background: #fff;\r\n                        transition: .4s;\r\n                        visibility: hidden;\r\n                        cursor: default;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove .remove-confirm-container:after{\r\n                        content: '';\r\n                        width: 0;\r\n                        height: 0;\r\n                        border-top: 4px solid transparent;\r\n                        border-bottom: 4px solid transparent;\r\n                        border-left: 4px solid #dcdcdc;\r\n                        position: absolute;\r\n                        right: -4px;\r\n                        -webkit-transform: rotate(0deg);\r\n                        -ms-transform: rotate(0deg);\r\n                        transform: rotate(0deg);\r\n                        top: 21px;\r\n                    } \r\n                    .content-right_owner .message-time > div.separate-p .edit-remove .remove-confirm-container:before{\r\n                        content: '';\r\n                        width: 0;\r\n                        height: 0;\r\n                        border-top: 3px solid transparent;\r\n                        border-bottom: 3px solid transparent;\r\n                        border-left: 3px solid #fff;\r\n                        position: absolute;\r\n                        right: -3px;\r\n                        -webkit-transform: rotate(0deg);\r\n                        -ms-transform: rotate(0deg);\r\n                        transform: rotate(0deg);\r\n                        top: 22px;\r\n                        z-index: 22;\r\n                    } \r\n                    .opened-pop-confirm-remove .remove-confirm-container {\r\n                        opacity: 1 !important;\r\n                        visibility: visible !important;\r\n                    }\r\n                    .opened-pop-confirm-remove + .time-wrap {\r\n                        display: none;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove{\r\n                        position: absolute;\r\n                        left: -15px;\r\n                        background: ${this.state.rightColor};\r\n                        display: -webkit-box;\r\n                        display: -webkit-flex;\r\n                        display: -ms-flexbox;\r\n                        display: flex;\r\n                        -webkit-flex-direction: column;\r\n                        -ms-flex-direction: column;\r\n                        flex-direction: column;\r\n                        top: 0;\r\n                        width: 18px;\r\n                        font-size: 9px;\r\n                        height: 27px;\r\n                        -webkit-box-pack: justify;\r\n                        -webkit-justify-content: space-between;\r\n                        -ms-flex-pack: justify;\r\n                        justify-content: space-between;\r\n                        border-right: 1px solid;\r\n                        opacity: 0;\r\n                        transition: .2s;\r\n                        visibility: hidden;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p:hover .edit-remove{\r\n                        opacity: 1;\r\n                        visibility: visible;\r\n                        left: -18px;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove:after{\r\n                        content: '';\r\n                        position: absolute;\r\n                        top: 0;\r\n                        bottom: 0;\r\n                        left: 0;\r\n                        right: 0;\r\n                        height: 0.8px;\r\n                        width: 18px;\r\n                        margin: auto;\r\n                        background: #fff;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .edit-remove:before{\r\n                        content: '';\r\n                        position: absolute;\r\n                        top: 0;\r\n                        bottom: 0;\r\n                        right: -1px;\r\n                        height: 27px;\r\n                        width: 0.8px;\r\n                        margin: auto;\r\n                        background: #fff;\r\n                        z-index: 2;\r\n                    }\r\n                    .opened-encryptPopUp .edit-remove {\r\n                        display: none !important;\r\n                    }\r\n                    \r\n                    .content-right_owner .message-time > div.separate-p .encryptPopUp,\r\n                    .content-left_owner .message-time > div.separate-p .encryptPopUp{\r\n                        position: absolute;\r\n                        height: 25px;\r\n                        display: none;\r\n                        width: 25px;\r\n                        padding: 2px;\r\n                        bottom: 0;\r\n                        top: 0;\r\n                        margin: auto;\r\n                        cursor: pointer;\r\n                        border-radius: 5px;\r\n                        \r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p .encryptPopUp {\r\n                        left: -30px;\r\n                    }\r\n                    .content-left_owner .message-time > div.separate-p .encryptPopUp{\r\n                        right: -30px;\r\n                    }\r\n                    \r\n                    .opened-encryptPopUp {\r\n                        background-color: #e7e7e7 !important;\r\n                        color: #000 !important;\r\n                    } \r\n                    .opened-encryptPopUp:before {\r\n                        border-left-color: #e7e7e7 !important;\r\n                    }\r\n                    .opened-encryptPopUp .encryptPopUp{\r\n                        display: block !important;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p,\r\n                    .content-left_owner .message-time > div.separate-p {\r\n                        cursor: pointer;\r\n                        text-align:left;\r\n                        margin: 0 0 5px 0;\r\n                        display: inline-block;\r\n                        padding: 5px 10px;\r\n                        color: #fff;\r\n                        font-size: 13px;\r\n                        border-radius: 5px;\r\n                        position: relative;\r\n                        min-height: 27px;\r\n                        word-break: break-all;\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p, .content-right_owner .message-time > span {\r\n                        background-color: ${this.state.rightColor};\r\n                    }\r\n                    .content-left_owner .message-time > div.separate-p, .content-left_owner .message-time > span {\r\n                        background-color: ${this.state.leftColor};\r\n                    }\r\n                    .content-right_owner .message-time > div.separate-p:before {\r\n                        content: '';\r\n                        width: 0;\r\n                        height: 0;\r\n                        border-top: 4px solid transparent;\r\n                        border-bottom: 4px solid transparent;\r\n                        border-left: 4px solid ${this.state.rightColor};\r\n                        position: absolute;\r\n                        right: -3px;\r\n                        transform: rotate(0deg);\r\n                        top: 7px;\r\n                    }\r\n                    .content-left_owner .message-time > div.separate-p:before {\r\n                        content: '';\r\n                        width: 0;\r\n                        height: 0;\r\n                        border-top: 4px solid transparent;\r\n                        border-bottom: 4px solid transparent;\r\n                        border-left: 4px solid ${this.state.leftColor};\r\n                        position: absolute;\r\n                        left: -3px;\r\n                        transform: rotate(-180deg);\r\n                        top: 7px;\r\n                    }\r\n                    \r\n                    .is-typing-wrap {\r\n                        margin-left: 20px;\r\n                        margin-bottom: 7px;\r\n                        display: flex;\r\n                        align-items: center;\r\n                        font-size: 13px;\r\n                    }\r\n                    .is-typing-wrap .spinner{ \r\n                        margin-top: 5px;\r\n                        margin-left: 10px;\r\n                    }\r\n                `}</style>\r\n            </>\r\n       )\r\n    }\r\n}\r\n\r\nPrivateMessageContent.propTypes = {\r\n    messagesHaveBeenDeleted: PropTypes.func,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n    loggedUser: state.chat.loggedUser,\r\n    activeUser: state.chat.activeUser,\r\n    messages: state.chat.activeUserMessages,\r\n    messagesPage: state.chat.messagesPage,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    __LOAD_MORE_MESSAGES\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(PrivateMessageContent);\r\n"]},"metadata":{},"sourceType":"module"}