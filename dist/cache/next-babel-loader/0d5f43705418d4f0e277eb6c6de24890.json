{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\ruala\\\\Desktop\\\\ASahak\\\\daser\\\\next\\\\CryptoGraphy\\\\components\\\\Messages.jsx\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { connect } from \"react-redux\";\nimport { __GET_ACTIVE_USERS_MESSAGES, __ADD_MESSAGE, __GET_CHAT_USERS, __IS_TYPING_TO_ACTIVE_USER, __EDIT_MESSAGE } from 'store/saga';\nimport { __SET_ENCRYPT_DATA } from 'store/actions';\nimport TextAreaMessage from 'components/elements/TextAreaMessage';\nimport Skeleton from \"./Skeleton\";\nimport PrivateMessageContent from \"components/elements/PrivateMessageContent\";\nimport { Modal } from 'components/shared/UI/Modal';\nimport UI_ELEMENTS from \"./shared/UI\";\nimport { Bus } from \"components/shared/helpers/Bus\";\nimport { Vigenere, RSA, Caesar, Playfair, Vernam, Substitution } from 'libraries';\n\nvar Messages = /*#__PURE__*/function (_React$Component) {\n  _inherits(Messages, _React$Component);\n\n  var _super = _createSuper(Messages);\n\n  function Messages(props) {\n    var _this;\n\n    _classCallCheck(this, Messages);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      startMessageNotify: '',\n      skeletonLoading: true,\n      noChatUser: false,\n      activeUserData: {},\n      showModal: false,\n      beforeClose: false,\n      sendMessage: '',\n      modalData: {\n        yourMessage: '',\n        encryptText: '',\n        warningMsg: ''\n      }\n    };\n    _this.__sendMessage = _this.__sendMessage.bind(_assertThisInitialized(_this));\n    _this.__isTyping = _this.__isTyping.bind(_assertThisInitialized(_this));\n    _this.__handleSuccess = _this.__handleSuccess.bind(_assertThisInitialized(_this));\n    _this.__closeModal = _this.__closeModal.bind(_assertThisInitialized(_this));\n    _this.__handleSubmitMessage = _this.__handleSubmitMessage.bind(_assertThisInitialized(_this));\n    _this.__updateStateContent = _this.__updateStateContent.bind(_assertThisInitialized(_this));\n    _this.__messagesHaveBeenDeleted = _this.__messagesHaveBeenDeleted.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Messages, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      var _prevProps$activeUser, _this$props$activeUse, _prevProps$activeUser2, _this$props$activeUse2, _prevProps$activeUser3, _this$props$activeUse4, _this$props$activeUse5;\n\n      var _this$props$activeUse3, startTime, genMessages, endTime, _this$props$activeUse6, _startTime, _genMessages, _endTime;\n\n      return _regeneratorRuntime.async(function componentDidUpdate$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              // Working when my chat list is empty\n              if (!this.state.noChatUser && this.props.usersList && this.props.usersList.length === 0) {\n                this.setState({\n                  noChatUser: true\n                });\n              } else if (this.state.noChatUser && this.props.usersList && this.props.usersList.length !== 0) {\n                this.setState({\n                  noChatUser: false\n                });\n              }\n\n              if (!(!((_prevProps$activeUser = prevProps.activeUser) === null || _prevProps$activeUser === void 0 ? void 0 : _prevProps$activeUser.id) && ((_this$props$activeUse = this.props.activeUser) === null || _this$props$activeUse === void 0 ? void 0 : _this$props$activeUse.id) && ((_prevProps$activeUser2 = prevProps.activeUser) === null || _prevProps$activeUser2 === void 0 ? void 0 : _prevProps$activeUser2.id) !== ((_this$props$activeUse2 = this.props.activeUser) === null || _this$props$activeUse2 === void 0 ? void 0 : _this$props$activeUse2.id))) {\n                _context.next = 11;\n                break;\n              }\n\n              this.setState({\n                startMessageNotify: '',\n                skeletonLoading: true\n              });\n              startTime = new Date().getTime();\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(__GET_ACTIVE_USERS_MESSAGES((_this$props$activeUse3 = this.props.activeUser) === null || _this$props$activeUse3 === void 0 ? void 0 : _this$props$activeUse3.id).next());\n\n            case 6:\n              genMessages = _context.sent;\n              endTime = new Date().getTime();\n\n              this.__updateStateContent(genMessages.value.letters[0].message, endTime, startTime);\n\n              _context.next = 22;\n              break;\n\n            case 11:\n              if (!(((_prevProps$activeUser3 = prevProps.activeUser) === null || _prevProps$activeUser3 === void 0 ? void 0 : _prevProps$activeUser3.id) !== ((_this$props$activeUse4 = this.props.activeUser) === null || _this$props$activeUse4 === void 0 ? void 0 : _this$props$activeUse4.id) && ((_this$props$activeUse5 = this.props.activeUser) === null || _this$props$activeUse5 === void 0 ? void 0 : _this$props$activeUse5.id))) {\n                _context.next = 21;\n                break;\n              }\n\n              this.setState({\n                startMessageNotify: '',\n                skeletonLoading: true\n              });\n              _startTime = new Date().getTime();\n              _context.next = 16;\n              return _regeneratorRuntime.awrap(__GET_ACTIVE_USERS_MESSAGES((_this$props$activeUse6 = this.props.activeUser) === null || _this$props$activeUse6 === void 0 ? void 0 : _this$props$activeUse6.id).next());\n\n            case 16:\n              _genMessages = _context.sent;\n              _endTime = new Date().getTime();\n\n              this.__updateStateContent(_genMessages.value.letters[0].message, _endTime, _startTime);\n\n              _context.next = 22;\n              break;\n\n            case 21:\n              if (prevProps.messages.length === 1 && prevProps.messages[0].message === '' && this.props.messages.length === 1 && this.props.messages[0].message !== '') {\n                this.setState({\n                  startMessageNotify: ''\n                });\n              }\n\n            case 22:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"__messagesHaveBeenDeleted\",\n    value: function __messagesHaveBeenDeleted() {\n      this.setState({\n        startMessageNotify: 'Send the first letter'\n      });\n    }\n  }, {\n    key: \"__updateStateContent\",\n    value: function __updateStateContent(message, endTime, startTime) {\n      var _this2 = this;\n\n      this.setState(_objectSpread({}, message === '' && {\n        startMessageNotify: 'Send the first letter'\n      }));\n\n      if (endTime - startTime < 1000) {\n        setTimeout(function () {\n          _this2.setState({\n            noChatUser: false,\n            skeletonLoading: false\n          });\n        }, 1000);\n      } else {\n        this.setState({\n          noChatUser: false,\n          skeletonLoading: false\n        });\n      }\n    }\n  }, {\n    key: \"__isTyping\",\n    value: function __isTyping(hint) {\n      var _this$props$activeUse7;\n\n      __IS_TYPING_TO_ACTIVE_USER(hint, (_this$props$activeUse7 = this.props.activeUser) === null || _this$props$activeUse7 === void 0 ? void 0 : _this$props$activeUse7.id, this.props.loggedUser.id).next();\n    }\n  }, {\n    key: \"__handleSuccess\",\n    value: function __handleSuccess() {\n      this.setState({\n        beforeClose: true\n      });\n    }\n  }, {\n    key: \"__closeModal\",\n    value: function __closeModal() {\n      var _this3 = this;\n\n      this.setState({\n        beforeClose: false,\n        showModal: false\n      }, function () {\n        if (_this3.state.modalData.encryptText) _this3.__handleSubmitMessage(_this3.state.sendMessage, _this3.state.modalData.encryptText, _this3.state.modalData.decryptText);\n      });\n    }\n  }, {\n    key: \"__handleSubmitMessage\",\n    value: function __handleSubmitMessage(value, encryptedMsg, decryptMsg) {\n      var _this$props$encryptDa, _this$props$activeUse8, _this$props$activeUse9;\n\n      var isKey, messageData;\n      return _regeneratorRuntime.async(function __handleSubmitMessage$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              isKey = value === 'crypt' && value === encryptedMsg && value === decryptMsg && isNaN(decryptMsg);\n              messageData = {\n                time: new Date().getTime(),\n                message: value,\n                encryptedMsg: encryptedMsg,\n                decryptedMsg: decryptMsg,\n                key: isKey ? 'crypt' : (_this$props$encryptDa = this.props.encryptData) === null || _this$props$encryptDa === void 0 ? void 0 : _this$props$encryptDa.key,\n                encryptType: isKey ? 'crypt' : this.props.encryptData.type\n              };\n              _context2.next = 4;\n              return _regeneratorRuntime.awrap(__ADD_MESSAGE({\n                friend: {\n                  friendId: (_this$props$activeUse8 = this.props.activeUser) === null || _this$props$activeUse8 === void 0 ? void 0 : _this$props$activeUse8.id,\n                  loggedUser: this.props.loggedUser,\n                  msgData: _objectSpread({}, messageData, {\n                    owner: this.props.loggedUser.id\n                  })\n                },\n                my: {\n                  friendId: (_this$props$activeUse9 = this.props.activeUser) === null || _this$props$activeUse9 === void 0 ? void 0 : _this$props$activeUse9.id,\n                  loggedUser: this.props.loggedUser,\n                  msgData: _objectSpread({}, messageData, {\n                    owner: 'Me'\n                  })\n                }\n              }).next());\n\n            case 4:\n              __GET_CHAT_USERS().next();\n\n              this.setState({\n                startMessageNotify: ''\n              });\n              Bus.dispatch('messageSendingFinish');\n\n            case 7:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"__encryptCommon\",\n    value: function __encryptCommon(value, key, type) {\n      var _this4 = this;\n\n      var callback = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : function () {};\n      var sendMSG = {};\n\n      switch (type) {\n        case 'vigenere':\n          var encryptedMsgV = Vigenere.doCryptVigenere(false, value, key, function (msg) {\n            callback(msg);\n\n            _this4.props.__SET_ENCRYPT_DATA({\n              type: 'warning',\n              value: true\n            });\n          });\n          return sendMSG = {\n            encryptedMSG: encryptedMsgV,\n            decryptedMSG: Vigenere.doCryptVigenere(true, encryptedMsgV, key, function (msg) {\n              callback(msg);\n\n              _this4.props.__SET_ENCRYPT_DATA({\n                type: 'warning',\n                value: true\n              });\n            })\n          };\n\n        case 'substitution':\n          var encryptedMsgS = Substitution(value);\n          return sendMSG = {\n            encryptedMSG: encryptedMsgS.encrypt,\n            decryptedMSG: encryptedMsgS.decrypt\n          };\n\n        case 'rsa':\n          // Message\n          var message = value; // Generate RSA keys\n\n          var keys = RSA.generate(key);\n          var encoded_message = RSA.encode(message);\n          var encrypted_message = RSA.encrypt(encoded_message, keys.n, keys.e);\n          var decrypted_message = RSA.decrypt(encrypted_message, keys.d, keys.n);\n          var decoded_message = RSA.decode(decrypted_message);\n          return sendMSG = {\n            encryptedMSG: encoded_message.toString(),\n            decryptedMSG: decoded_message\n          };\n\n        case 'caesar':\n          var encryptedMsgC = Caesar.doCrypt(false, value, key, function (msg) {\n            callback(msg);\n          });\n          return sendMSG = {\n            encryptedMSG: encryptedMsgC,\n            decryptedMSG: Caesar.doCrypt(true, encryptedMsgC, key, function (msg) {\n              callback(msg);\n            })\n          };\n\n        case 'playfair':\n          return sendMSG = {\n            encryptedMSG: Playfair.doCipher(value, key, function (msg) {\n              callback(msg);\n            }),\n            decryptedMSG: Playfair.deCodeCipher(value, key)\n          };\n\n        case 'vernam':\n          var _keyE = '';\n          var encryptedMsgVer = Vernam.doEncrypt(value, function (_key) {\n            _keyE = _key;\n\n            _this4.props.__SET_ENCRYPT_DATA({\n              type: 'key',\n              value: _key\n            });\n          });\n          return sendMSG = {\n            encryptedMSG: encryptedMsgVer,\n            decryptedMSG: Vernam.doDecrypt(value, _keyE)\n          };\n\n        default:\n          break;\n      }\n    }\n  }, {\n    key: \"__sendMessage\",\n    value: function __sendMessage(value, isKey) {\n      var _this5 = this;\n\n      var _isKey$mainObj, _isKey$mainObj2, _this$props$activeUse10, _this$props$loggedUse, encryptedMsg, warning;\n\n      return _regeneratorRuntime.async(function __sendMessage$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (!(isKey instanceof Object)) {\n                _context3.next = 9;\n                break;\n              }\n\n              encryptedMsg = this.__encryptCommon.call(this, value, (_isKey$mainObj = isKey.mainObj) === null || _isKey$mainObj === void 0 ? void 0 : _isKey$mainObj.key, (_isKey$mainObj2 = isKey.mainObj) === null || _isKey$mainObj2 === void 0 ? void 0 : _isKey$mainObj2.encryptType);\n              _context3.next = 4;\n              return _regeneratorRuntime.awrap(__EDIT_MESSAGE({\n                value: value,\n                e: encryptedMsg.encryptedMSG,\n                d: encryptedMsg.decryptedMSG\n              }, isKey === null || isKey === void 0 ? void 0 : isKey.index, {\n                idUser: (_this$props$activeUse10 = this.props.activeUser) === null || _this$props$activeUse10 === void 0 ? void 0 : _this$props$activeUse10.id,\n                myId: (_this$props$loggedUse = this.props.loggedUser) === null || _this$props$loggedUse === void 0 ? void 0 : _this$props$loggedUse.id\n              }).next());\n\n            case 4:\n              Bus.dispatch('endEditing');\n              Bus.dispatch('messageSendingFinish');\n              return _context3.abrupt(\"return\");\n\n            case 9:\n              if (!isKey) {\n                _context3.next = 12;\n                break;\n              }\n\n              this.__handleSubmitMessage('crypt', 'crypt', 'crypt');\n\n              return _context3.abrupt(\"return\");\n\n            case 12:\n              warning = '';\n              this.setState({\n                sendMessage: value\n              }, function () {\n                var _this5$props$encryptD;\n\n                var encryptMsg = _this5.__encryptCommon.call(_this5, value, (_this5$props$encryptD = _this5.props.encryptData) === null || _this5$props$encryptD === void 0 ? void 0 : _this5$props$encryptD.key, _this5.props.encryptData.type, function (msg) {\n                  warning = msg;\n                });\n\n                if (_this5.props.isShowModal) {\n                  _this5.setState({\n                    modalData: _objectSpread({\n                      yourMessage: value\n                    }, warning && {\n                      warningMsg: warning\n                    }, {}, encryptMsg.encryptedMSG && {\n                      encryptText: encryptMsg.encryptedMSG\n                    }, {}, encryptMsg.decryptedMSG && {\n                      decryptText: encryptMsg.decryptedMSG\n                    }),\n                    showModal: true\n                  });\n                } else if (encryptMsg.encryptedMSG && encryptMsg.decryptedMSG) _this5.__handleSubmitMessage(value, encryptMsg.encryptedMSG, encryptMsg.decryptedMSG);\n              });\n\n            case 14:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, null, this, null, Promise);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this6 = this,\n          _this$props$loggedUse2;\n\n      return __jsx(\"div\", {\n        className: \"jsx-610849184\" + \" \" + \"message-content-right \\n                \".concat(this.state.skeletonLoading ? 'skeleton-loading-content' : '', \" \\n                \").concat(!this.state.noChatUser ? 'hidden-overlay' : '', \" \\n                \").concat(this.state.startMessageNotify ? 'empty-message-content' : '', \"\\n                \").concat(this.state.noChatUser ? 'no-chat-user' : '', \"\\n                \"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 274,\n          columnNumber: 13\n        }\n      }, this.state.skeletonLoading && !this.state.noChatUser ? new Array(6).fill('').map(function (_, i) {\n        return __jsx(\"div\", {\n          key: i + Math.random().toString(16).slice(2, 6),\n          style: {\n            opacity: (6 - i) * 0.10\n          },\n          className: \"jsx-610849184\" + \" \" + \"skeleton-container-messages \".concat(i % 2 !== 0 ? 'odd-container-skeleton' : ''),\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 284,\n            columnNumber: 33\n          }\n        }, __jsx(Skeleton, {\n          width: \"35px\",\n          height: \"35px\",\n          margin: ['5px', '10px', '0px', '10px'],\n          radius: \"50%\",\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 287,\n            columnNumber: 37\n          }\n        }), __jsx(\"div\", {\n          className: \"jsx-610849184\" + \" \" + \"line-wrap\",\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 293,\n            columnNumber: 37\n          }\n        }, __jsx(Skeleton, {\n          width: \"55%\",\n          height: \"52px\",\n          margin: ['5px', '0px', '0px', i % 2 !== 0 ? 'auto' : '0px'],\n          radius: \"0%\",\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 294,\n            columnNumber: 41\n          }\n        }), i % 2 !== 0 ? __jsx(Skeleton, {\n          width: \"55%\",\n          height: \"52px\",\n          margin: ['5px', '0px', '0px', 'auto'],\n          radius: \"0%\",\n          __self: _this6,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 301,\n            columnNumber: 45\n          }\n        }) : ''));\n      }) : this.state.startMessageNotify ? __jsx(\"div\", {\n        className: \"jsx-610849184\" + \" \" + \"send-first-message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 55\n        }\n      }, this.state.startMessageNotify) : !this.state.noChatUser && __jsx(PrivateMessageContent, {\n        messagesHaveBeenDeleted: this.__messagesHaveBeenDeleted,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 314,\n          columnNumber: 21\n        }\n      }), !this.state.skeletonLoading && __jsx(TextAreaMessage, {\n        activeUser: this.props.activeUser,\n        loggedUserId: (_this$props$loggedUse2 = this.props.loggedUser) === null || _this$props$loggedUse2 === void 0 ? void 0 : _this$props$loggedUse2.id,\n        isTyping: this.__isTyping,\n        sendMessage: this.__sendMessage,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 49\n        }\n      }), __jsx(Modal, {\n        show: this.state.showModal,\n        beforeClose: this.state.beforeClose,\n        close: this.__closeModal,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322,\n          columnNumber: 17\n        }\n      }, __jsx(\"div\", {\n        className: \"jsx-610849184\" + \" \" + \"scroll-content\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 326,\n          columnNumber: 21\n        }\n      }, __jsx(\"h2\", {\n        className: \"jsx-610849184\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327,\n          columnNumber: 25\n        }\n      }, \"Please confirm message\"), __jsx(\"h4\", {\n        className: \"jsx-610849184\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 25\n        }\n      }, \"Your included text\"), __jsx(\"p\", {\n        className: \"jsx-610849184\" + \" \" + \"message-p\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 25\n        }\n      }, this.state.modalData.yourMessage), __jsx(\"h4\", {\n        className: \"jsx-610849184\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 330,\n          columnNumber: 25\n        }\n      }, \"Encrypted text\"), this.state.modalData.warningMsg ? __jsx(\"p\", {\n        className: \"jsx-610849184\" + \" \" + \"warning-message\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 60\n        }\n      }, this.state.modalData.warningMsg) : __jsx(\"p\", {\n        className: \"jsx-610849184\" + \" \" + \"message-p\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 29\n        }\n      }, this.state.modalData.encryptText)), __jsx(UI_ELEMENTS.Button, {\n        background: \"#37415c\",\n        color: \"#fff\",\n        fontSize: 11,\n        type: \"button\",\n        text: 'Send',\n        width: 100,\n        margin: ['20px', '0', '0', 'auto'],\n        onClick: this.__handleSuccess,\n        size: \"sm\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 335,\n          columnNumber: 21\n        }\n      })), __jsx(_JSXStyle, {\n        id: \"610849184\",\n        __self: this\n      }, \".scroll-content.jsx-610849184{max-height:70vh;overflow-x:hidden;}.message-p.jsx-610849184{word-break:break-all;}.warning-message.jsx-610849184{color:#ffa100;}.skeleton-container-messages.jsx-610849184 .line-wrap.jsx-610849184{width:calc(100% - 70px);margin-bottom:10px;}.odd-container-skeleton.jsx-610849184{-webkit-flex-direction:row-reverse;-ms-flex-direction:row-reverse;flex-direction:row-reverse;}.skeleton-container-messages.jsx-610849184{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}.message-content-right.hidden-overlay.jsx-610849184{overflow:hidden;}.message-content-right.skeleton-loading-content.jsx-610849184{overflow:hidden;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;}.message-content-right.jsx-610849184{height:calc(100% - 42px);display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}.empty-message-content.jsx-610849184{-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}.send-first-message.jsx-610849184{text-align:center;font-size:20px;margin-bottom:16px;}.no-chat-user.jsx-610849184{background-image:url('./assets/images/nochat.png');background-position:center;background-repeat:no-repeat;opacity:.2;}\\n/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6XFxVc2Vyc1xccnVhbGFcXERlc2t0b3BcXEFTYWhha1xcZGFzZXJcXG5leHRcXENyeXB0b0dyYXBoeVxcY29tcG9uZW50c1xcTWVzc2FnZXMuanN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQXlWNkIsQUFHeUMsQUFJSyxBQUdQLEFBR1UsQUFJRyxBQUdkLEFBR0csQUFHQSxBQUlTLEFBTUEsQUFHUCxBQUtpQyxjQWpDdkQsRUFQc0IsQUFvQnRCLEFBRytCLEVBYVosR0FoQ25CLEdBTXVCLENBaUJOLFFBVU0sQ0FwQ3ZCLFNBVUEsUUE4QitCLENBSC9CLHNCQXJCQSxJQXlCZ0MsZUE1QmhDLElBbUJBLEVBTDBCLE9BZVgsV0FDZixJQXBCQSx3REFLa0MsbUhBQ2xDIiwiZmlsZSI6IkM6XFxVc2Vyc1xccnVhbGFcXERlc2t0b3BcXEFTYWhha1xcZGFzZXJcXG5leHRcXENyeXB0b0dyYXBoeVxcY29tcG9uZW50c1xcTWVzc2FnZXMuanN4Iiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IFJlYWN0IGZyb20gJ3JlYWN0JztcclxuaW1wb3J0IHtjb25uZWN0fSBmcm9tIFwicmVhY3QtcmVkdXhcIjtcclxuaW1wb3J0IHtcclxuICAgIF9fR0VUX0FDVElWRV9VU0VSU19NRVNTQUdFUyxcclxuICAgIF9fQUREX01FU1NBR0UsXHJcbiAgICBfX0dFVF9DSEFUX1VTRVJTLFxyXG4gICAgX19JU19UWVBJTkdfVE9fQUNUSVZFX1VTRVIsXHJcbiAgICBfX0VESVRfTUVTU0FHRSxcclxufSBmcm9tICdzdG9yZS9zYWdhJztcclxuaW1wb3J0IHtcclxuICAgIF9fU0VUX0VOQ1JZUFRfREFUQSxcclxufSBmcm9tICdzdG9yZS9hY3Rpb25zJztcclxuaW1wb3J0IFRleHRBcmVhTWVzc2FnZSBmcm9tICdjb21wb25lbnRzL2VsZW1lbnRzL1RleHRBcmVhTWVzc2FnZSc7XHJcbmltcG9ydCBTa2VsZXRvbiBmcm9tIFwiLi9Ta2VsZXRvblwiO1xyXG5pbXBvcnQgUHJpdmF0ZU1lc3NhZ2VDb250ZW50IGZyb20gXCJjb21wb25lbnRzL2VsZW1lbnRzL1ByaXZhdGVNZXNzYWdlQ29udGVudFwiO1xyXG5pbXBvcnQgeyBNb2RhbCB9IGZyb20gJ2NvbXBvbmVudHMvc2hhcmVkL1VJL01vZGFsJztcclxuaW1wb3J0IFVJX0VMRU1FTlRTIGZyb20gXCIuL3NoYXJlZC9VSVwiO1xyXG5pbXBvcnQgeyBCdXMgfSBmcm9tIFwiY29tcG9uZW50cy9zaGFyZWQvaGVscGVycy9CdXNcIjtcclxuaW1wb3J0IHtcclxuICAgIFZpZ2VuZXJlLFxyXG4gICAgUlNBLFxyXG4gICAgQ2Flc2FyLFxyXG4gICAgUGxheWZhaXIsXHJcbiAgICBWZXJuYW0sXHJcbiAgICBTdWJzdGl0dXRpb24sXHJcbn0gZnJvbSAnbGlicmFyaWVzJztcclxuXHJcblxyXG5jbGFzcyBNZXNzYWdlcyBleHRlbmRzIFJlYWN0LkNvbXBvbmVudCB7XHJcbiAgICBjb25zdHJ1Y3RvciAocHJvcHMpIHtcclxuICAgICAgICBzdXBlcihwcm9wcyk7XHJcbiAgICAgICAgdGhpcy5zdGF0ZSA9IHtcclxuICAgICAgICAgICAgc3RhcnRNZXNzYWdlTm90aWZ5OiAnJyxcclxuICAgICAgICAgICAgc2tlbGV0b25Mb2FkaW5nOiB0cnVlLFxyXG4gICAgICAgICAgICBub0NoYXRVc2VyOiBmYWxzZSxcclxuICAgICAgICAgICAgYWN0aXZlVXNlckRhdGE6IHt9LFxyXG4gICAgICAgICAgICBzaG93TW9kYWw6IGZhbHNlLFxyXG4gICAgICAgICAgICBiZWZvcmVDbG9zZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNlbmRNZXNzYWdlOiAnJyxcclxuICAgICAgICAgICAgbW9kYWxEYXRhOiB7XHJcbiAgICAgICAgICAgICAgICB5b3VyTWVzc2FnZTogJycsXHJcbiAgICAgICAgICAgICAgICBlbmNyeXB0VGV4dDogJycsXHJcbiAgICAgICAgICAgICAgICB3YXJuaW5nTXNnOiAnJyxcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICAgICAgdGhpcy5fX3NlbmRNZXNzYWdlICAgICAgICAgICAgICA9IHRoaXMuX19zZW5kTWVzc2FnZS5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX19pc1R5cGluZyAgICAgICAgICAgICAgICAgPSB0aGlzLl9faXNUeXBpbmcuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9faGFuZGxlU3VjY2VzcyAgICAgICAgICAgID0gdGhpcy5fX2hhbmRsZVN1Y2Nlc3MuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9fY2xvc2VNb2RhbCAgICAgICAgICAgICAgID0gdGhpcy5fX2Nsb3NlTW9kYWwuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9faGFuZGxlU3VibWl0TWVzc2FnZSAgICAgID0gdGhpcy5fX2hhbmRsZVN1Ym1pdE1lc3NhZ2UuYmluZCh0aGlzKTtcclxuICAgICAgICB0aGlzLl9fdXBkYXRlU3RhdGVDb250ZW50ICAgICAgID0gdGhpcy5fX3VwZGF0ZVN0YXRlQ29udGVudC5iaW5kKHRoaXMpO1xyXG4gICAgICAgIHRoaXMuX19tZXNzYWdlc0hhdmVCZWVuRGVsZXRlZCAgPSB0aGlzLl9fbWVzc2FnZXNIYXZlQmVlbkRlbGV0ZWQuYmluZCh0aGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBjb21wb25lbnREaWRVcGRhdGUocHJldlByb3BzLCBwcmV2U3RhdGUsIHNuYXBzaG90KSB7XHJcbiAgICAgICAgLy8gV29ya2luZyB3aGVuIG15IGNoYXQgbGlzdCBpcyBlbXB0eVxyXG4gICAgICAgIGlmICghdGhpcy5zdGF0ZS5ub0NoYXRVc2VyICYmIHRoaXMucHJvcHMudXNlcnNMaXN0ICYmIHRoaXMucHJvcHMudXNlcnNMaXN0Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIG5vQ2hhdFVzZXI6IHRydWVcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9IGVsc2UgaWYgKHRoaXMuc3RhdGUubm9DaGF0VXNlciAmJiB0aGlzLnByb3BzLnVzZXJzTGlzdCAmJiB0aGlzLnByb3BzLnVzZXJzTGlzdC5sZW5ndGggIT09IDApIHtcclxuICAgICAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgICAgICBub0NoYXRVc2VyOiBmYWxzZVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoIXByZXZQcm9wcy5hY3RpdmVVc2VyPy5pZCAmJiB0aGlzLnByb3BzLmFjdGl2ZVVzZXI/LmlkICYmIHByZXZQcm9wcy5hY3RpdmVVc2VyPy5pZCAhPT0gdGhpcy5wcm9wcy5hY3RpdmVVc2VyPy5pZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0TWVzc2FnZU5vdGlmeTogJycsXHJcbiAgICAgICAgICAgICAgICBza2VsZXRvbkxvYWRpbmc6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBnZW5NZXNzYWdlcyA9IGF3YWl0IF9fR0VUX0FDVElWRV9VU0VSU19NRVNTQUdFUyh0aGlzLnByb3BzLmFjdGl2ZVVzZXI/LmlkKS5uZXh0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuICAgICAgICAgICAgdGhpcy5fX3VwZGF0ZVN0YXRlQ29udGVudChnZW5NZXNzYWdlcy52YWx1ZS5sZXR0ZXJzWzBdLm1lc3NhZ2UsIGVuZFRpbWUsIHN0YXJ0VGltZSk7XHJcbiAgICAgICAgfSBlbHNlIGlmIChwcmV2UHJvcHMuYWN0aXZlVXNlcj8uaWQgIT09IHRoaXMucHJvcHMuYWN0aXZlVXNlcj8uaWQgJiYgdGhpcy5wcm9wcy5hY3RpdmVVc2VyPy5pZCkge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0TWVzc2FnZU5vdGlmeTogJycsXHJcbiAgICAgICAgICAgICAgICBza2VsZXRvbkxvYWRpbmc6IHRydWVcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGNvbnN0IHN0YXJ0VGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpO1xyXG4gICAgICAgICAgICBjb25zdCBnZW5NZXNzYWdlcyA9IGF3YWl0IF9fR0VUX0FDVElWRV9VU0VSU19NRVNTQUdFUyh0aGlzLnByb3BzLmFjdGl2ZVVzZXI/LmlkKS5uZXh0KCk7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuZFRpbWUgPSBuZXcgRGF0ZSgpLmdldFRpbWUoKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuX191cGRhdGVTdGF0ZUNvbnRlbnQoZ2VuTWVzc2FnZXMudmFsdWUubGV0dGVyc1swXS5tZXNzYWdlLCBlbmRUaW1lLCBzdGFydFRpbWUpO1xyXG4gICAgICAgIH0gZWxzZSBpZiAocHJldlByb3BzLm1lc3NhZ2VzLmxlbmd0aCA9PT0gMSAmJiBwcmV2UHJvcHMubWVzc2FnZXNbMF0ubWVzc2FnZSA9PT0gJycgJiYgdGhpcy5wcm9wcy5tZXNzYWdlcy5sZW5ndGggPT09IDEgJiYgdGhpcy5wcm9wcy5tZXNzYWdlc1swXS5tZXNzYWdlICE9PSAnJykge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIHN0YXJ0TWVzc2FnZU5vdGlmeTogJycsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBfX21lc3NhZ2VzSGF2ZUJlZW5EZWxldGVkICgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgc3RhcnRNZXNzYWdlTm90aWZ5OiAnU2VuZCB0aGUgZmlyc3QgbGV0dGVyJ1xyXG4gICAgICAgIH0pXHJcbiAgICB9XHJcblxyXG4gICAgX191cGRhdGVTdGF0ZUNvbnRlbnQgKG1lc3NhZ2UsIGVuZFRpbWUsIHN0YXJ0VGltZSkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoey8vSWYgdGhlcmUgYXJlbid0IGFueSBtZXNzYWdlc1xyXG4gICAgICAgICAgICAuLi4obWVzc2FnZSA9PT0gJycgJiYge3N0YXJ0TWVzc2FnZU5vdGlmeTogJ1NlbmQgdGhlIGZpcnN0IGxldHRlcid9KVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAoZW5kVGltZSAtIHN0YXJ0VGltZSA8IDEwMDApIHtcclxuICAgICAgICAgICAgc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBub0NoYXRVc2VyOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBza2VsZXRvbkxvYWRpbmc6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgfSwgMTAwMClcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgIG5vQ2hhdFVzZXI6IGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgc2tlbGV0b25Mb2FkaW5nOiBmYWxzZSxcclxuICAgICAgICAgICAgfSlcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgX19pc1R5cGluZyAoaGludCkge1xyXG4gICAgICAgIF9fSVNfVFlQSU5HX1RPX0FDVElWRV9VU0VSKGhpbnQsIHRoaXMucHJvcHMuYWN0aXZlVXNlcj8uaWQsIHRoaXMucHJvcHMubG9nZ2VkVXNlci5pZCkubmV4dCgpXHJcbiAgICB9XHJcblxyXG4gICAgX19oYW5kbGVTdWNjZXNzICgpIHtcclxuICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgYmVmb3JlQ2xvc2U6IHRydWVcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBfX2Nsb3NlTW9kYWwgKCkge1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBiZWZvcmVDbG9zZTogZmFsc2UsXHJcbiAgICAgICAgICAgIHNob3dNb2RhbDogZmFsc2VcclxuICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnN0YXRlLm1vZGFsRGF0YS5lbmNyeXB0VGV4dCkgdGhpcy5fX2hhbmRsZVN1Ym1pdE1lc3NhZ2UodGhpcy5zdGF0ZS5zZW5kTWVzc2FnZSwgdGhpcy5zdGF0ZS5tb2RhbERhdGEuZW5jcnlwdFRleHQsIHRoaXMuc3RhdGUubW9kYWxEYXRhLmRlY3J5cHRUZXh0KTtcclxuICAgICAgICB9KTtcclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfX2hhbmRsZVN1Ym1pdE1lc3NhZ2UgKHZhbHVlLCBlbmNyeXB0ZWRNc2csIGRlY3J5cHRNc2cpIHtcclxuICAgICAgICBjb25zdCBpc0tleSA9ICh2YWx1ZSA9PT0gJ2NyeXB0JyAmJiB2YWx1ZSA9PT0gZW5jcnlwdGVkTXNnICYmIHZhbHVlID09PSBkZWNyeXB0TXNnICYmIChpc05hTihkZWNyeXB0TXNnKSkpO1xyXG4gICAgICAgIGNvbnN0IG1lc3NhZ2VEYXRhID0ge1xyXG4gICAgICAgICAgICB0aW1lOiBuZXcgRGF0ZSgpLmdldFRpbWUoKSxcclxuICAgICAgICAgICAgbWVzc2FnZTogdmFsdWUsXHJcbiAgICAgICAgICAgIGVuY3J5cHRlZE1zZzogZW5jcnlwdGVkTXNnLFxyXG4gICAgICAgICAgICBkZWNyeXB0ZWRNc2c6IGRlY3J5cHRNc2csXHJcbiAgICAgICAgICAgIGtleTogaXNLZXkgPyAnY3J5cHQnIDogdGhpcy5wcm9wcy5lbmNyeXB0RGF0YT8ua2V5LFxyXG4gICAgICAgICAgICBlbmNyeXB0VHlwZTogaXNLZXkgPyAnY3J5cHQnIDogdGhpcy5wcm9wcy5lbmNyeXB0RGF0YS50eXBlXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgYXdhaXQgX19BRERfTUVTU0FHRSh7XHJcbiAgICAgICAgICAgIGZyaWVuZDoge1xyXG4gICAgICAgICAgICAgICAgZnJpZW5kSWQ6IHRoaXMucHJvcHMuYWN0aXZlVXNlcj8uaWQsXHJcbiAgICAgICAgICAgICAgICBsb2dnZWRVc2VyOiB0aGlzLnByb3BzLmxvZ2dlZFVzZXIsXHJcbiAgICAgICAgICAgICAgICBtc2dEYXRhOiB7Li4ubWVzc2FnZURhdGEsIG93bmVyOiB0aGlzLnByb3BzLmxvZ2dlZFVzZXIuaWR9XHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIG15OiB7XHJcbiAgICAgICAgICAgICAgICBmcmllbmRJZDogdGhpcy5wcm9wcy5hY3RpdmVVc2VyPy5pZCxcclxuICAgICAgICAgICAgICAgIGxvZ2dlZFVzZXI6IHRoaXMucHJvcHMubG9nZ2VkVXNlcixcclxuICAgICAgICAgICAgICAgIG1zZ0RhdGE6IHsuLi5tZXNzYWdlRGF0YSwgb3duZXI6ICdNZSd9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KS5uZXh0KCk7XHJcblxyXG4gICAgICAgIF9fR0VUX0NIQVRfVVNFUlMoKS5uZXh0KCk7XHJcbiAgICAgICAgdGhpcy5zZXRTdGF0ZSh7XHJcbiAgICAgICAgICAgIHN0YXJ0TWVzc2FnZU5vdGlmeTogJydcclxuICAgICAgICB9KTtcclxuICAgICAgICBCdXMuZGlzcGF0Y2goJ21lc3NhZ2VTZW5kaW5nRmluaXNoJyk7XHJcbiAgICB9XHJcblxyXG4gICAgX19lbmNyeXB0Q29tbW9uICh2YWx1ZSwga2V5LCB0eXBlLCBjYWxsYmFjayA9ICgpID0+IHt9KSB7XHJcbiAgICAgICAgbGV0IHNlbmRNU0cgPSB7fTtcclxuICAgICAgICBzd2l0Y2ggKHR5cGUpIHtcclxuICAgICAgICAgICAgY2FzZSAndmlnZW5lcmUnOlxyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkTXNnViA9IFZpZ2VuZXJlLmRvQ3J5cHRWaWdlbmVyZShmYWxzZSwgdmFsdWUsIGtleSwgKG1zZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG1zZyk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5fX1NFVF9FTkNSWVBUX0RBVEEoe3R5cGU6ICd3YXJuaW5nJywgdmFsdWU6IHRydWV9KTtcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRNU0cgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGVkTVNHOiBlbmNyeXB0ZWRNc2dWLFxyXG4gICAgICAgICAgICAgICAgICAgIGRlY3J5cHRlZE1TRzogVmlnZW5lcmUuZG9DcnlwdFZpZ2VuZXJlKHRydWUsIGVuY3J5cHRlZE1zZ1YsIGtleSwgKG1zZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnByb3BzLl9fU0VUX0VOQ1JZUFRfREFUQSh7dHlwZTogJ3dhcm5pbmcnLCB2YWx1ZTogdHJ1ZX0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pLFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY2FzZSAnc3Vic3RpdHV0aW9uJyA6XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRNc2dTID0gU3Vic3RpdHV0aW9uKHZhbHVlKTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZW5kTVNHID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZE1TRzogZW5jcnlwdGVkTXNnUy5lbmNyeXB0LFxyXG4gICAgICAgICAgICAgICAgICAgIGRlY3J5cHRlZE1TRzogZW5jcnlwdGVkTXNnUy5kZWNyeXB0XHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjYXNlICdyc2EnIDpcclxuICAgICAgICAgICAgICAgIC8vIE1lc3NhZ2VcclxuICAgICAgICAgICAgICAgIGNvbnN0IG1lc3NhZ2UgPSB2YWx1ZTtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBHZW5lcmF0ZSBSU0Ega2V5c1xyXG4gICAgICAgICAgICAgICAgY29uc3Qga2V5cyA9IFJTQS5nZW5lcmF0ZShrZXkpO1xyXG5cclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuY29kZWRfbWVzc2FnZSA9IFJTQS5lbmNvZGUobWVzc2FnZSk7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBlbmNyeXB0ZWRfbWVzc2FnZSA9IFJTQS5lbmNyeXB0KGVuY29kZWRfbWVzc2FnZSwga2V5cy5uLCBrZXlzLmUpO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVjcnlwdGVkX21lc3NhZ2UgPSBSU0EuZGVjcnlwdChlbmNyeXB0ZWRfbWVzc2FnZSwga2V5cy5kLCBrZXlzLm4pO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZGVjb2RlZF9tZXNzYWdlID0gUlNBLmRlY29kZShkZWNyeXB0ZWRfbWVzc2FnZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHNlbmRNU0cgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZW5jcnlwdGVkTVNHOiBlbmNvZGVkX21lc3NhZ2UudG9TdHJpbmcoKSxcclxuICAgICAgICAgICAgICAgICAgICBkZWNyeXB0ZWRNU0c6IGRlY29kZWRfbWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY2FzZSAnY2Flc2FyJzpcclxuICAgICAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRlZE1zZ0MgPSBDYWVzYXIuZG9DcnlwdChmYWxzZSwgdmFsdWUsIGtleSwgKG1zZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGNhbGxiYWNrKG1zZyk7XHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBzZW5kTVNHID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuY3J5cHRlZE1TRzogZW5jcnlwdGVkTXNnQyxcclxuICAgICAgICAgICAgICAgICAgICBkZWNyeXB0ZWRNU0c6IENhZXNhci5kb0NyeXB0KHRydWUsIGVuY3J5cHRlZE1zZ0MsIGtleSwgKG1zZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjYWxsYmFjayhtc2cpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pXHJcbiAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBjYXNlICdwbGF5ZmFpcic6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZE1TRyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRNU0c6IFBsYXlmYWlyLmRvQ2lwaGVyKHZhbHVlLCBrZXksIChtc2cpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2sobXNnKTtcclxuICAgICAgICAgICAgICAgICAgICB9KSxcclxuICAgICAgICAgICAgICAgICAgICBkZWNyeXB0ZWRNU0c6IFBsYXlmYWlyLmRlQ29kZUNpcGhlcih2YWx1ZSwga2V5KVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgY2FzZSAndmVybmFtJzpcclxuICAgICAgICAgICAgICAgIGxldCBfa2V5RSA9ICcnO1xyXG4gICAgICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkTXNnVmVyID0gVmVybmFtLmRvRW5jcnlwdCh2YWx1ZSwgKF9rZXkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICBfa2V5RSA9IF9rZXk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5wcm9wcy5fX1NFVF9FTkNSWVBUX0RBVEEoe3R5cGU6ICdrZXknLCB2YWx1ZTogX2tleX0pXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gc2VuZE1TRyA9IHtcclxuICAgICAgICAgICAgICAgICAgICBlbmNyeXB0ZWRNU0c6IGVuY3J5cHRlZE1zZ1ZlcixcclxuICAgICAgICAgICAgICAgICAgICBkZWNyeXB0ZWRNU0c6IFZlcm5hbS5kb0RlY3J5cHQodmFsdWUsIF9rZXlFKVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgZGVmYXVsdCA6IGJyZWFrO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBfX3NlbmRNZXNzYWdlICh2YWx1ZSwgaXNLZXkpIHtcclxuICAgICAgICBpZiAoaXNLZXkgaW5zdGFuY2VvZiBPYmplY3QpIHtcclxuICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkTXNnID0gdGhpcy5fX2VuY3J5cHRDb21tb24uY2FsbCh0aGlzLCB2YWx1ZSwgaXNLZXkubWFpbk9iaj8ua2V5LCBpc0tleS5tYWluT2JqPy5lbmNyeXB0VHlwZSk7XHJcbiAgICAgICAgICAgIGF3YWl0IF9fRURJVF9NRVNTQUdFKFxyXG4gICAgICAgICAgICAgICAge3ZhbHVlLCBlOiBlbmNyeXB0ZWRNc2cuZW5jcnlwdGVkTVNHLCBkOiBlbmNyeXB0ZWRNc2cuZGVjcnlwdGVkTVNHfSxcclxuICAgICAgICAgICAgICAgIGlzS2V5Py5pbmRleCxcclxuICAgICAgICAgICAgICAgIHtpZFVzZXI6IHRoaXMucHJvcHMuYWN0aXZlVXNlcj8uaWQsIG15SWQ6IHRoaXMucHJvcHMubG9nZ2VkVXNlcj8uaWR9KS5uZXh0KCk7XHJcbiAgICAgICAgICAgIEJ1cy5kaXNwYXRjaCgnZW5kRWRpdGluZycpO1xyXG4gICAgICAgICAgICBCdXMuZGlzcGF0Y2goJ21lc3NhZ2VTZW5kaW5nRmluaXNoJyk7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH0gZWxzZSBpZiAoaXNLZXkpIHtcclxuICAgICAgICAgICAgdGhpcy5fX2hhbmRsZVN1Ym1pdE1lc3NhZ2UoJ2NyeXB0JywgJ2NyeXB0JywgJ2NyeXB0Jyk7XHJcbiAgICAgICAgICAgIHJldHVyblxyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgd2FybmluZyA9ICcnO1xyXG4gICAgICAgIHRoaXMuc2V0U3RhdGUoe1xyXG4gICAgICAgICAgICBzZW5kTWVzc2FnZTogdmFsdWVcclxuICAgICAgICB9LCAoKSA9PiB7XHJcbiAgICAgICAgICAgIGNvbnN0IGVuY3J5cHRNc2cgPSB0aGlzLl9fZW5jcnlwdENvbW1vbi5jYWxsKHRoaXMsIHZhbHVlLCB0aGlzLnByb3BzLmVuY3J5cHREYXRhPy5rZXksIHRoaXMucHJvcHMuZW5jcnlwdERhdGEudHlwZSwgKG1zZykgPT4ge1xyXG4gICAgICAgICAgICAgICAgd2FybmluZyA9IG1zZztcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLnByb3BzLmlzU2hvd01vZGFsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLnNldFN0YXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBtb2RhbERhdGE6IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeW91ck1lc3NhZ2U6IHZhbHVlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4od2FybmluZyAmJiB7d2FybmluZ01zZzogd2FybmluZ30pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oZW5jcnlwdE1zZy5lbmNyeXB0ZWRNU0cgJiYge2VuY3J5cHRUZXh0OiBlbmNyeXB0TXNnLmVuY3J5cHRlZE1TR30pLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAuLi4oZW5jcnlwdE1zZy5kZWNyeXB0ZWRNU0cgJiYge2RlY3J5cHRUZXh0OiBlbmNyeXB0TXNnLmRlY3J5cHRlZE1TR30pLFxyXG4gICAgICAgICAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd01vZGFsOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfSBlbHNlIGlmIChlbmNyeXB0TXNnLmVuY3J5cHRlZE1TRyAmJiBlbmNyeXB0TXNnLmRlY3J5cHRlZE1TRykgdGhpcy5fX2hhbmRsZVN1Ym1pdE1lc3NhZ2UodmFsdWUsIGVuY3J5cHRNc2cuZW5jcnlwdGVkTVNHLCBlbmNyeXB0TXNnLmRlY3J5cHRlZE1TRyk7XHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgcmVuZGVyICgpIHtcclxuICAgICAgICByZXR1cm4gKFxyXG4gICAgICAgICAgICA8ZGl2XHJcbiAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2BtZXNzYWdlLWNvbnRlbnQtcmlnaHQgXHJcbiAgICAgICAgICAgICAgICAke3RoaXMuc3RhdGUuc2tlbGV0b25Mb2FkaW5nID8gJ3NrZWxldG9uLWxvYWRpbmctY29udGVudCcgOiAnJ30gXHJcbiAgICAgICAgICAgICAgICAkeyF0aGlzLnN0YXRlLm5vQ2hhdFVzZXIgPyAnaGlkZGVuLW92ZXJsYXknIDogJyd9IFxyXG4gICAgICAgICAgICAgICAgJHt0aGlzLnN0YXRlLnN0YXJ0TWVzc2FnZU5vdGlmeSA/ICdlbXB0eS1tZXNzYWdlLWNvbnRlbnQnIDogJyd9XHJcbiAgICAgICAgICAgICAgICAke3RoaXMuc3RhdGUubm9DaGF0VXNlciA/ICduby1jaGF0LXVzZXInOiAnJ31cclxuICAgICAgICAgICAgICAgIGB9PlxyXG4gICAgICAgICAgICAgICAge3RoaXMuc3RhdGUuc2tlbGV0b25Mb2FkaW5nICYmICF0aGlzLnN0YXRlLm5vQ2hhdFVzZXIgP1xyXG4gICAgICAgICAgICAgICAgICAgIG5ldyBBcnJheSg2KS5maWxsKCcnKS5tYXAoKF8sIGkpID0+IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAoXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPGRpdlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBjbGFzc05hbWU9e2Bza2VsZXRvbi1jb250YWluZXItbWVzc2FnZXMgJHtpICUgMiAhPT0gMCA/ICdvZGQtY29udGFpbmVyLXNrZWxldG9uJyA6ICcnfWB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGtleT17aSArIE1hdGgucmFuZG9tKCkudG9TdHJpbmcoMTYpLnNsaWNlKDIsIDYpfSBzdHlsZT17e29wYWNpdHk6ICg2IC0gaSkgKiAwLjEwfX0+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTa2VsZXRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCIzNXB4XCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjM1cHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luPXtbJzVweCcsICcxMHB4JywgJzBweCcsICcxMHB4J119XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpdXM9XCI1MCVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAvPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cImxpbmUtd3JhcFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPFNrZWxldG9uXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9XCI1NSVcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjUycHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbj17Wyc1cHgnLCAnMHB4JywgJzBweCcsIGkgJSAyICE9PSAwID8gJ2F1dG8nIDogJzBweCddfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJhZGl1cz1cIjAlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIC8+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB7aSAlIDIgIT09IDAgP1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDxTa2VsZXRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB3aWR0aD1cIjU1JVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlaWdodD1cIjUycHhcIlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBtYXJnaW49e1snNXB4JywgJzBweCcsICcwcHgnLCAnYXV0byddfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByYWRpdXM9XCIwJVwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgLz46ICcnXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDwvZGl2PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICAgICAgICAgIDogdGhpcy5zdGF0ZS5zdGFydE1lc3NhZ2VOb3RpZnkgPyA8ZGl2IGNsYXNzTmFtZT1cInNlbmQtZmlyc3QtbWVzc2FnZVwiPnt0aGlzLnN0YXRlLnN0YXJ0TWVzc2FnZU5vdGlmeX08L2Rpdj46XHJcbiAgICAgICAgICAgICAgICAgICAgIXRoaXMuc3RhdGUubm9DaGF0VXNlciAmJlxyXG4gICAgICAgICAgICAgICAgICAgIDxQcml2YXRlTWVzc2FnZUNvbnRlbnQgbWVzc2FnZXNIYXZlQmVlbkRlbGV0ZWQ9e3RoaXMuX19tZXNzYWdlc0hhdmVCZWVuRGVsZXRlZH0gLz5cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHshdGhpcy5zdGF0ZS5za2VsZXRvbkxvYWRpbmcgJiYgPFRleHRBcmVhTWVzc2FnZVxyXG4gICAgICAgICAgICAgICAgICAgIGFjdGl2ZVVzZXI9e3RoaXMucHJvcHMuYWN0aXZlVXNlcn1cclxuICAgICAgICAgICAgICAgICAgICBsb2dnZWRVc2VySWQ9e3RoaXMucHJvcHMubG9nZ2VkVXNlcj8uaWR9XHJcbiAgICAgICAgICAgICAgICAgICAgaXNUeXBpbmc9e3RoaXMuX19pc1R5cGluZ31cclxuICAgICAgICAgICAgICAgICAgICBzZW5kTWVzc2FnZT17dGhpcy5fX3NlbmRNZXNzYWdlfS8+fVxyXG5cclxuICAgICAgICAgICAgICAgIDxNb2RhbFxyXG4gICAgICAgICAgICAgICAgICAgIHNob3c9e3RoaXMuc3RhdGUuc2hvd01vZGFsfVxyXG4gICAgICAgICAgICAgICAgICAgIGJlZm9yZUNsb3NlPXt0aGlzLnN0YXRlLmJlZm9yZUNsb3NlfVxyXG4gICAgICAgICAgICAgICAgICAgIGNsb3NlPXt0aGlzLl9fY2xvc2VNb2RhbH0+XHJcbiAgICAgICAgICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzY3JvbGwtY29udGVudFwiPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDI+UGxlYXNlIGNvbmZpcm0gbWVzc2FnZTwvaDI+XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIDxoND5Zb3VyIGluY2x1ZGVkIHRleHQ8L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtZXNzYWdlLXBcIj57dGhpcy5zdGF0ZS5tb2RhbERhdGEueW91ck1lc3NhZ2V9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICA8aDQ+RW5jcnlwdGVkIHRleHQ8L2g0PlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB7dGhpcy5zdGF0ZS5tb2RhbERhdGEud2FybmluZ01zZyA/IDxwIGNsYXNzTmFtZT1cIndhcm5pbmctbWVzc2FnZVwiPnt0aGlzLnN0YXRlLm1vZGFsRGF0YS53YXJuaW5nTXNnfTwvcD46XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJtZXNzYWdlLXBcIj57dGhpcy5zdGF0ZS5tb2RhbERhdGEuZW5jcnlwdFRleHR9PC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgPC9kaXY+XHJcbiAgICAgICAgICAgICAgICAgICAgPFVJX0VMRU1FTlRTLkJ1dHRvblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kPVwiIzM3NDE1Y1wiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yPVwiI2ZmZlwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbnRTaXplPXsxMX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgdHlwZT1cImJ1dHRvblwiXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRleHQ9eydTZW5kJ31cclxuICAgICAgICAgICAgICAgICAgICAgICAgd2lkdGg9ezEwMH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgbWFyZ2luPXtbJzIwcHgnLCAnMCcsICcwJywgJ2F1dG8nXX1cclxuICAgICAgICAgICAgICAgICAgICAgICAgb25DbGljaz17dGhpcy5fX2hhbmRsZVN1Y2Nlc3N9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNpemU9XCJzbVwiLz5cclxuICAgICAgICAgICAgICAgIDwvTW9kYWw+XHJcbiAgICAgICAgICAgICAgICA8c3R5bGUganN4ID57YFxyXG4gICAgICAgICAgICAgICAgICAgIC5zY3JvbGwtY29udGVudCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1heC1oZWlnaHQ6IDcwdmg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG92ZXJmbG93LXg6IGhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLm1lc3NhZ2UtcCB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmQtYnJlYWs6IGJyZWFrLWFsbDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLndhcm5pbmctbWVzc2FnZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbG9yOiAjZmZhMTAwO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuc2tlbGV0b24tY29udGFpbmVyLW1lc3NhZ2VzIC5saW5lLXdyYXAge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3aWR0aDogY2FsYygxMDAlIC0gNzBweCk7ICAgXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDEwcHg7ICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLm9kZC1jb250YWluZXItc2tlbGV0b24ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogcm93LXJldmVyc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5za2VsZXRvbi1jb250YWluZXItbWVzc2FnZXMge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAubWVzc2FnZS1jb250ZW50LXJpZ2h0LmhpZGRlbi1vdmVybGF5IHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3ZlcmZsb3c6IGhpZGRlbjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgLm1lc3NhZ2UtY29udGVudC1yaWdodC5za2VsZXRvbi1sb2FkaW5nLWNvbnRlbnQge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtc3RhcnQ7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5tZXNzYWdlLWNvbnRlbnQtcmlnaHQge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBoZWlnaHQ6IGNhbGMoMTAwJSAtIDQycHgpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBkaXNwbGF5OiBmbGV4O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5lbXB0eS1tZXNzYWdlLWNvbnRlbnQge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGZsZXgtZW5kO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAuc2VuZC1maXJzdC1tZXNzYWdlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250LXNpemU6IDIwcHg7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDE2cHg7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIC5uby1jaGF0LXVzZXIge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBiYWNrZ3JvdW5kLWltYWdlOiB1cmwoJy4vYXNzZXRzL2ltYWdlcy9ub2NoYXQucG5nJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhY2tncm91bmQtcG9zaXRpb246IGNlbnRlcjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmFja2dyb3VuZC1yZXBlYXQ6IG5vLXJlcGVhdDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb3BhY2l0eTogLjI7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgYH08L3N0eWxlPlxyXG4gICAgICAgICAgICA8L2Rpdj5cclxuICAgICAgICApXHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IG1hcFN0YXRlVG9Qcm9wcyA9IHN0YXRlID0+ICh7XHJcbiAgICBsb2dnZWRVc2VyOiBzdGF0ZS5jaGF0LmxvZ2dlZFVzZXIsXHJcbiAgICBhY3RpdmVVc2VyOiBzdGF0ZS5jaGF0LmFjdGl2ZVVzZXIsXHJcbiAgICB1c2Vyc0xpc3Q6IHN0YXRlLmNoYXQubXlDaGF0VXNlcnMsXHJcbiAgICBpc1Nob3dNb2RhbDogc3RhdGUuY2hhdC5pc1Nob3dNb2RhbCxcclxuICAgIGVuY3J5cHREYXRhOiBzdGF0ZS5jaGF0LmVuY3J5cHREYXRhLFxyXG4gICAgbWVzc2FnZXM6IHN0YXRlLmNoYXQuYWN0aXZlVXNlck1lc3NhZ2VzLFxyXG59KTtcclxuXHJcbmNvbnN0IG1hcERpc3BhdGNoVG9Qcm9wcyA9IHtcclxuICAgIF9fU0VUX0VOQ1JZUFRfREFUQSxcclxufTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGNvbm5lY3QoXHJcbiAgICBtYXBTdGF0ZVRvUHJvcHMsXHJcbiAgICBtYXBEaXNwYXRjaFRvUHJvcHNcclxuKShNZXNzYWdlcyk7XHJcbiJdfQ== */\\n/*@ sourceURL=C:\\\\\\\\Users\\\\\\\\ruala\\\\\\\\Desktop\\\\\\\\ASahak\\\\\\\\daser\\\\\\\\next\\\\\\\\CryptoGraphy\\\\\\\\components\\\\\\\\Messages.jsx */\"));\n    }\n  }]);\n\n  return Messages;\n}(React.Component);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    loggedUser: state.chat.loggedUser,\n    activeUser: state.chat.activeUser,\n    usersList: state.chat.myChatUsers,\n    isShowModal: state.chat.isShowModal,\n    encryptData: state.chat.encryptData,\n    messages: state.chat.activeUserMessages\n  };\n};\n\nvar mapDispatchToProps = {\n  __SET_ENCRYPT_DATA: __SET_ENCRYPT_DATA\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(Messages);","map":{"version":3,"sources":["C:/Users/ruala/Desktop/ASahak/daser/next/CryptoGraphy/components/Messages.jsx"],"names":["React","connect","__GET_ACTIVE_USERS_MESSAGES","__ADD_MESSAGE","__GET_CHAT_USERS","__IS_TYPING_TO_ACTIVE_USER","__EDIT_MESSAGE","__SET_ENCRYPT_DATA","TextAreaMessage","Skeleton","PrivateMessageContent","Modal","UI_ELEMENTS","Bus","Vigenere","RSA","Caesar","Playfair","Vernam","Substitution","Messages","props","state","startMessageNotify","skeletonLoading","noChatUser","activeUserData","showModal","beforeClose","sendMessage","modalData","yourMessage","encryptText","warningMsg","__sendMessage","bind","__isTyping","__handleSuccess","__closeModal","__handleSubmitMessage","__updateStateContent","__messagesHaveBeenDeleted","prevProps","prevState","snapshot","usersList","length","setState","activeUser","id","startTime","Date","getTime","next","genMessages","endTime","value","letters","message","messages","setTimeout","hint","loggedUser","decryptText","encryptedMsg","decryptMsg","isKey","isNaN","messageData","time","decryptedMsg","key","encryptData","encryptType","type","friend","friendId","msgData","owner","my","dispatch","callback","sendMSG","encryptedMsgV","doCryptVigenere","msg","encryptedMSG","decryptedMSG","encryptedMsgS","encrypt","decrypt","keys","generate","encoded_message","encode","encrypted_message","n","e","decrypted_message","d","decoded_message","decode","toString","encryptedMsgC","doCrypt","doCipher","deCodeCipher","_keyE","encryptedMsgVer","doEncrypt","_key","doDecrypt","Object","__encryptCommon","call","mainObj","index","idUser","myId","warning","encryptMsg","isShowModal","Array","fill","map","_","i","Math","random","slice","opacity","Component","mapStateToProps","chat","myChatUsers","activeUserMessages","mapDispatchToProps"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport {connect} from \"react-redux\";\r\nimport {\r\n    __GET_ACTIVE_USERS_MESSAGES,\r\n    __ADD_MESSAGE,\r\n    __GET_CHAT_USERS,\r\n    __IS_TYPING_TO_ACTIVE_USER,\r\n    __EDIT_MESSAGE,\r\n} from 'store/saga';\r\nimport {\r\n    __SET_ENCRYPT_DATA,\r\n} from 'store/actions';\r\nimport TextAreaMessage from 'components/elements/TextAreaMessage';\r\nimport Skeleton from \"./Skeleton\";\r\nimport PrivateMessageContent from \"components/elements/PrivateMessageContent\";\r\nimport { Modal } from 'components/shared/UI/Modal';\r\nimport UI_ELEMENTS from \"./shared/UI\";\r\nimport { Bus } from \"components/shared/helpers/Bus\";\r\nimport {\r\n    Vigenere,\r\n    RSA,\r\n    Caesar,\r\n    Playfair,\r\n    Vernam,\r\n    Substitution,\r\n} from 'libraries';\r\n\r\n\r\nclass Messages extends React.Component {\r\n    constructor (props) {\r\n        super(props);\r\n        this.state = {\r\n            startMessageNotify: '',\r\n            skeletonLoading: true,\r\n            noChatUser: false,\r\n            activeUserData: {},\r\n            showModal: false,\r\n            beforeClose: false,\r\n            sendMessage: '',\r\n            modalData: {\r\n                yourMessage: '',\r\n                encryptText: '',\r\n                warningMsg: '',\r\n            }\r\n        };\r\n        this.__sendMessage              = this.__sendMessage.bind(this);\r\n        this.__isTyping                 = this.__isTyping.bind(this);\r\n        this.__handleSuccess            = this.__handleSuccess.bind(this);\r\n        this.__closeModal               = this.__closeModal.bind(this);\r\n        this.__handleSubmitMessage      = this.__handleSubmitMessage.bind(this);\r\n        this.__updateStateContent       = this.__updateStateContent.bind(this);\r\n        this.__messagesHaveBeenDeleted  = this.__messagesHaveBeenDeleted.bind(this);\r\n    }\r\n\r\n    async componentDidUpdate(prevProps, prevState, snapshot) {\r\n        // Working when my chat list is empty\r\n        if (!this.state.noChatUser && this.props.usersList && this.props.usersList.length === 0) {\r\n            this.setState({\r\n                noChatUser: true\r\n            })\r\n        } else if (this.state.noChatUser && this.props.usersList && this.props.usersList.length !== 0) {\r\n            this.setState({\r\n                noChatUser: false\r\n            })\r\n        }\r\n        if (!prevProps.activeUser?.id && this.props.activeUser?.id && prevProps.activeUser?.id !== this.props.activeUser?.id) {\r\n            this.setState({\r\n                startMessageNotify: '',\r\n                skeletonLoading: true\r\n            });\r\n            const startTime = new Date().getTime();\r\n            const genMessages = await __GET_ACTIVE_USERS_MESSAGES(this.props.activeUser?.id).next();\r\n            const endTime = new Date().getTime();\r\n            this.__updateStateContent(genMessages.value.letters[0].message, endTime, startTime);\r\n        } else if (prevProps.activeUser?.id !== this.props.activeUser?.id && this.props.activeUser?.id) {\r\n            this.setState({\r\n                startMessageNotify: '',\r\n                skeletonLoading: true\r\n            });\r\n            const startTime = new Date().getTime();\r\n            const genMessages = await __GET_ACTIVE_USERS_MESSAGES(this.props.activeUser?.id).next();\r\n            const endTime = new Date().getTime();\r\n\r\n            this.__updateStateContent(genMessages.value.letters[0].message, endTime, startTime);\r\n        } else if (prevProps.messages.length === 1 && prevProps.messages[0].message === '' && this.props.messages.length === 1 && this.props.messages[0].message !== '') {\r\n            this.setState({\r\n                startMessageNotify: '',\r\n            });\r\n        }\r\n    }\r\n\r\n    __messagesHaveBeenDeleted () {\r\n        this.setState({\r\n            startMessageNotify: 'Send the first letter'\r\n        })\r\n    }\r\n\r\n    __updateStateContent (message, endTime, startTime) {\r\n        this.setState({//If there aren't any messages\r\n            ...(message === '' && {startMessageNotify: 'Send the first letter'})\r\n        });\r\n\r\n        if (endTime - startTime < 1000) {\r\n            setTimeout(() => {\r\n                this.setState({\r\n                    noChatUser: false,\r\n                    skeletonLoading: false,\r\n                })\r\n            }, 1000)\r\n        } else {\r\n            this.setState({\r\n                noChatUser: false,\r\n                skeletonLoading: false,\r\n            })\r\n        }\r\n    }\r\n\r\n    __isTyping (hint) {\r\n        __IS_TYPING_TO_ACTIVE_USER(hint, this.props.activeUser?.id, this.props.loggedUser.id).next()\r\n    }\r\n\r\n    __handleSuccess () {\r\n        this.setState({\r\n            beforeClose: true\r\n        });\r\n    }\r\n\r\n    __closeModal () {\r\n        this.setState({\r\n            beforeClose: false,\r\n            showModal: false\r\n        }, () => {\r\n            if (this.state.modalData.encryptText) this.__handleSubmitMessage(this.state.sendMessage, this.state.modalData.encryptText, this.state.modalData.decryptText);\r\n        });\r\n    }\r\n\r\n    async __handleSubmitMessage (value, encryptedMsg, decryptMsg) {\r\n        const isKey = (value === 'crypt' && value === encryptedMsg && value === decryptMsg && (isNaN(decryptMsg)));\r\n        const messageData = {\r\n            time: new Date().getTime(),\r\n            message: value,\r\n            encryptedMsg: encryptedMsg,\r\n            decryptedMsg: decryptMsg,\r\n            key: isKey ? 'crypt' : this.props.encryptData?.key,\r\n            encryptType: isKey ? 'crypt' : this.props.encryptData.type\r\n        };\r\n\r\n        await __ADD_MESSAGE({\r\n            friend: {\r\n                friendId: this.props.activeUser?.id,\r\n                loggedUser: this.props.loggedUser,\r\n                msgData: {...messageData, owner: this.props.loggedUser.id}\r\n            },\r\n            my: {\r\n                friendId: this.props.activeUser?.id,\r\n                loggedUser: this.props.loggedUser,\r\n                msgData: {...messageData, owner: 'Me'}\r\n            }\r\n        }).next();\r\n\r\n        __GET_CHAT_USERS().next();\r\n        this.setState({\r\n            startMessageNotify: ''\r\n        });\r\n        Bus.dispatch('messageSendingFinish');\r\n    }\r\n\r\n    __encryptCommon (value, key, type, callback = () => {}) {\r\n        let sendMSG = {};\r\n        switch (type) {\r\n            case 'vigenere':\r\n                const encryptedMsgV = Vigenere.doCryptVigenere(false, value, key, (msg) => {\r\n                    callback(msg);\r\n                    this.props.__SET_ENCRYPT_DATA({type: 'warning', value: true});\r\n                });\r\n                return sendMSG = {\r\n                    encryptedMSG: encryptedMsgV,\r\n                    decryptedMSG: Vigenere.doCryptVigenere(true, encryptedMsgV, key, (msg) => {\r\n                        callback(msg);\r\n                        this.props.__SET_ENCRYPT_DATA({type: 'warning', value: true});\r\n                    }),\r\n                };\r\n            case 'substitution' :\r\n                const encryptedMsgS = Substitution(value);\r\n                return sendMSG = {\r\n                    encryptedMSG: encryptedMsgS.encrypt,\r\n                    decryptedMSG: encryptedMsgS.decrypt\r\n                };\r\n            case 'rsa' :\r\n                // Message\r\n                const message = value;\r\n\r\n                // Generate RSA keys\r\n                const keys = RSA.generate(key);\r\n\r\n                const encoded_message = RSA.encode(message);\r\n                const encrypted_message = RSA.encrypt(encoded_message, keys.n, keys.e);\r\n                const decrypted_message = RSA.decrypt(encrypted_message, keys.d, keys.n);\r\n                const decoded_message = RSA.decode(decrypted_message);\r\n\r\n                return sendMSG = {\r\n                    encryptedMSG: encoded_message.toString(),\r\n                    decryptedMSG: decoded_message\r\n                };\r\n            case 'caesar':\r\n                const encryptedMsgC = Caesar.doCrypt(false, value, key, (msg) => {\r\n                    callback(msg);\r\n                });\r\n                return sendMSG = {\r\n                    encryptedMSG: encryptedMsgC,\r\n                    decryptedMSG: Caesar.doCrypt(true, encryptedMsgC, key, (msg) => {\r\n                        callback(msg);\r\n                    })\r\n                };\r\n            case 'playfair':\r\n                return sendMSG = {\r\n                    encryptedMSG: Playfair.doCipher(value, key, (msg) => {\r\n                        callback(msg);\r\n                    }),\r\n                    decryptedMSG: Playfair.deCodeCipher(value, key)\r\n                };\r\n            case 'vernam':\r\n                let _keyE = '';\r\n                const encryptedMsgVer = Vernam.doEncrypt(value, (_key) => {\r\n                    _keyE = _key;\r\n                    this.props.__SET_ENCRYPT_DATA({type: 'key', value: _key})\r\n                });\r\n\r\n                return sendMSG = {\r\n                    encryptedMSG: encryptedMsgVer,\r\n                    decryptedMSG: Vernam.doDecrypt(value, _keyE)\r\n                };\r\n            default : break;\r\n        }\r\n    }\r\n\r\n    async __sendMessage (value, isKey) {\r\n        if (isKey instanceof Object) {\r\n            const encryptedMsg = this.__encryptCommon.call(this, value, isKey.mainObj?.key, isKey.mainObj?.encryptType);\r\n            await __EDIT_MESSAGE(\r\n                {value, e: encryptedMsg.encryptedMSG, d: encryptedMsg.decryptedMSG},\r\n                isKey?.index,\r\n                {idUser: this.props.activeUser?.id, myId: this.props.loggedUser?.id}).next();\r\n            Bus.dispatch('endEditing');\r\n            Bus.dispatch('messageSendingFinish');\r\n            return\r\n        } else if (isKey) {\r\n            this.__handleSubmitMessage('crypt', 'crypt', 'crypt');\r\n            return\r\n        }\r\n        let warning = '';\r\n        this.setState({\r\n            sendMessage: value\r\n        }, () => {\r\n            const encryptMsg = this.__encryptCommon.call(this, value, this.props.encryptData?.key, this.props.encryptData.type, (msg) => {\r\n                warning = msg;\r\n            });\r\n            if (this.props.isShowModal) {\r\n                this.setState({\r\n                    modalData: {\r\n                        yourMessage: value,\r\n                        ...(warning && {warningMsg: warning}),\r\n                        ...(encryptMsg.encryptedMSG && {encryptText: encryptMsg.encryptedMSG}),\r\n                        ...(encryptMsg.decryptedMSG && {decryptText: encryptMsg.decryptedMSG}),\r\n                    },\r\n                    showModal: true\r\n                });\r\n            } else if (encryptMsg.encryptedMSG && encryptMsg.decryptedMSG) this.__handleSubmitMessage(value, encryptMsg.encryptedMSG, encryptMsg.decryptedMSG);\r\n        });\r\n    }\r\n\r\n    render () {\r\n        return (\r\n            <div\r\n                className={`message-content-right \r\n                ${this.state.skeletonLoading ? 'skeleton-loading-content' : ''} \r\n                ${!this.state.noChatUser ? 'hidden-overlay' : ''} \r\n                ${this.state.startMessageNotify ? 'empty-message-content' : ''}\r\n                ${this.state.noChatUser ? 'no-chat-user': ''}\r\n                `}>\r\n                {this.state.skeletonLoading && !this.state.noChatUser ?\r\n                    new Array(6).fill('').map((_, i) => {\r\n                            return (\r\n                                <div\r\n                                    className={`skeleton-container-messages ${i % 2 !== 0 ? 'odd-container-skeleton' : ''}`}\r\n                                    key={i + Math.random().toString(16).slice(2, 6)} style={{opacity: (6 - i) * 0.10}}>\r\n                                    <Skeleton\r\n                                        width=\"35px\"\r\n                                        height=\"35px\"\r\n                                        margin={['5px', '10px', '0px', '10px']}\r\n                                        radius=\"50%\"\r\n                                    />\r\n                                    <div className=\"line-wrap\">\r\n                                        <Skeleton\r\n                                            width=\"55%\"\r\n                                            height=\"52px\"\r\n                                            margin={['5px', '0px', '0px', i % 2 !== 0 ? 'auto' : '0px']}\r\n                                            radius=\"0%\"\r\n                                        />\r\n                                        {i % 2 !== 0 ?\r\n                                            <Skeleton\r\n                                                width=\"55%\"\r\n                                                height=\"52px\"\r\n                                                margin={['5px', '0px', '0px', 'auto']}\r\n                                                radius=\"0%\"\r\n                                            />: ''\r\n                                        }\r\n                                    </div>\r\n                                </div>\r\n                            )\r\n                        })\r\n                    : this.state.startMessageNotify ? <div className=\"send-first-message\">{this.state.startMessageNotify}</div>:\r\n                    !this.state.noChatUser &&\r\n                    <PrivateMessageContent messagesHaveBeenDeleted={this.__messagesHaveBeenDeleted} />\r\n                }\r\n                {!this.state.skeletonLoading && <TextAreaMessage\r\n                    activeUser={this.props.activeUser}\r\n                    loggedUserId={this.props.loggedUser?.id}\r\n                    isTyping={this.__isTyping}\r\n                    sendMessage={this.__sendMessage}/>}\r\n\r\n                <Modal\r\n                    show={this.state.showModal}\r\n                    beforeClose={this.state.beforeClose}\r\n                    close={this.__closeModal}>\r\n                    <div className=\"scroll-content\">\r\n                        <h2>Please confirm message</h2>\r\n                        <h4>Your included text</h4>\r\n                        <p className=\"message-p\">{this.state.modalData.yourMessage}</p>\r\n                        <h4>Encrypted text</h4>\r\n                        {this.state.modalData.warningMsg ? <p className=\"warning-message\">{this.state.modalData.warningMsg}</p>:\r\n                            <p className=\"message-p\">{this.state.modalData.encryptText}</p>\r\n                        }\r\n                    </div>\r\n                    <UI_ELEMENTS.Button\r\n                        background=\"#37415c\"\r\n                        color=\"#fff\"\r\n                        fontSize={11}\r\n                        type=\"button\"\r\n                        text={'Send'}\r\n                        width={100}\r\n                        margin={['20px', '0', '0', 'auto']}\r\n                        onClick={this.__handleSuccess}\r\n                        size=\"sm\"/>\r\n                </Modal>\r\n                <style jsx >{`\r\n                    .scroll-content {\r\n                        max-height: 70vh;\r\n                        overflow-x: hidden;\r\n                    }\r\n                    .message-p {\r\n                        word-break: break-all;\r\n                    }\r\n                    .warning-message {\r\n                        color: #ffa100;\r\n                    }\r\n                    .skeleton-container-messages .line-wrap {\r\n                        width: calc(100% - 70px);   \r\n                        margin-bottom: 10px;                 \r\n                    }\r\n                    .odd-container-skeleton {\r\n                        flex-direction: row-reverse;\r\n                    }\r\n                    .skeleton-container-messages {\r\n                        display: flex;\r\n                    }\r\n                    .message-content-right.hidden-overlay {\r\n                        overflow: hidden;\r\n                    }\r\n                    .message-content-right.skeleton-loading-content {\r\n                        overflow: hidden;\r\n                        justify-content: flex-start;\r\n                    }\r\n                    .message-content-right {\r\n                        height: calc(100% - 42px);\r\n                        display: flex;\r\n                        flex-direction: column;\r\n                        justify-content: space-between;\r\n                    }\r\n                    .empty-message-content {\r\n                        justify-content: flex-end;\r\n                    }\r\n                    .send-first-message {\r\n                        text-align: center;\r\n                        font-size: 20px;\r\n                        margin-bottom: 16px;\r\n                    }\r\n                    .no-chat-user {\r\n                        background-image: url('./assets/images/nochat.png');\r\n                        background-position: center;\r\n                        background-repeat: no-repeat;\r\n                        opacity: .2;\r\n                    }\r\n                `}</style>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nconst mapStateToProps = state => ({\r\n    loggedUser: state.chat.loggedUser,\r\n    activeUser: state.chat.activeUser,\r\n    usersList: state.chat.myChatUsers,\r\n    isShowModal: state.chat.isShowModal,\r\n    encryptData: state.chat.encryptData,\r\n    messages: state.chat.activeUserMessages,\r\n});\r\n\r\nconst mapDispatchToProps = {\r\n    __SET_ENCRYPT_DATA,\r\n};\r\n\r\nexport default connect(\r\n    mapStateToProps,\r\n    mapDispatchToProps\r\n)(Messages);\r\n"]},"metadata":{},"sourceType":"module"}