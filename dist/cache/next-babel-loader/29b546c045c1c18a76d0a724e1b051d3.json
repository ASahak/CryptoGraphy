{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ruala\\\\Desktop\\\\ASahak\\\\daser\\\\next\\\\CryptoGraphy\\\\utils\\\\auth.js\";\nvar __jsx = React.createElement;\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport Login from '../pages/login';\nimport * as authService from './auth-service';\nimport { __bodyLoading } from 'components/shared/helpers/global-functions';\nexport default function withAuth(AuthComponent) {\n  return class Authenticated extends Component {\n    constructor(props) {\n      super(props);\n      this.state = {\n        isAuth: false,\n        isLoading: true\n      };\n\n      __bodyLoading(this.state.isLoading);\n\n      authService.__isLogged().then(res => {\n        if (res) {\n          if (Router.pathname === '/login' || Router.pathname === '/register') {\n            Router.push('/');\n            this.setState({\n              isAuth: true\n            });\n          } else {\n            this.setState({\n              isAuth: true,\n              isLoading: false\n            }, () => __bodyLoading(this.state.isLoading, this.state.isAuth));\n          }\n        } else {\n          this.setState({\n            isLoading: false\n          }, () => {\n            __bodyLoading(this.state.isLoading, this.state.isAuth);\n\n            Router.replace('/login');\n          });\n        }\n      });\n    }\n\n    render() {\n      return __jsx(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 17\n        }\n      }, !this.state.isLoading && (this.state.isAuth ? __jsx(AuthComponent, _extends({}, this.props, {\n        auth: authService,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 68\n        }\n      })) : __jsx(Login, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 123\n        }\n      })));\n    }\n\n  };\n}\n;","map":{"version":3,"sources":["C:/Users/ruala/Desktop/ASahak/daser/next/CryptoGraphy/utils/auth.js"],"names":["React","Component","Router","Login","authService","__bodyLoading","withAuth","AuthComponent","Authenticated","constructor","props","state","isAuth","isLoading","__isLogged","then","res","pathname","push","setState","replace","render"],"mappings":";;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAO,KAAKC,WAAZ,MAA6B,gBAA7B;AACA,SAASC,aAAT,QAA8B,4CAA9B;AAEA,eAAe,SAASC,QAAT,CAAkBC,aAAlB,EAAiC;AAE5C,SAAO,MAAMC,aAAN,SAA4BP,SAA5B,CAAsC;AACzCQ,IAAAA,WAAW,CAACC,KAAD,EAAQ;AACf,YAAMA,KAAN;AACA,WAAKC,KAAL,GAAa;AACTC,QAAAA,MAAM,EAAE,KADC;AAETC,QAAAA,SAAS,EAAE;AAFF,OAAb;;AAIAR,MAAAA,aAAa,CAAC,KAAKM,KAAL,CAAWE,SAAZ,CAAb;;AACAT,MAAAA,WAAW,CAACU,UAAZ,GAAyBC,IAAzB,CAA8BC,GAAG,IAAI;AACjC,YAAIA,GAAJ,EAAS;AACL,cAAId,MAAM,CAACe,QAAP,KAAoB,QAApB,IAAgCf,MAAM,CAACe,QAAP,KAAoB,WAAxD,EAAqE;AACjEf,YAAAA,MAAM,CAACgB,IAAP,CAAY,GAAZ;AACA,iBAAKC,QAAL,CAAc;AACVP,cAAAA,MAAM,EAAE;AADE,aAAd;AAGH,WALD,MAKO;AACH,iBAAKO,QAAL,CAAc;AACVP,cAAAA,MAAM,EAAE,IADE;AAEVC,cAAAA,SAAS,EAAE;AAFD,aAAd,EAGG,MAAMR,aAAa,CAAC,KAAKM,KAAL,CAAWE,SAAZ,EAAuB,KAAKF,KAAL,CAAWC,MAAlC,CAHtB;AAIH;AACJ,SAZD,MAYO;AACH,eAAKO,QAAL,CAAc;AACVN,YAAAA,SAAS,EAAE;AADD,WAAd,EAEG,MAAM;AACLR,YAAAA,aAAa,CAAC,KAAKM,KAAL,CAAWE,SAAZ,EAAuB,KAAKF,KAAL,CAAWC,MAAlC,CAAb;;AACAV,YAAAA,MAAM,CAACkB,OAAP,CAAe,QAAf;AACH,WALD;AAMH;AACJ,OArBD;AAsBH;;AAEDC,IAAAA,MAAM,GAAG;AACL,aACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACK,CAAC,KAAKV,KAAL,CAAWE,SAAZ,KAA0B,KAAKF,KAAL,CAAWC,MAAX,GAAoB,MAAC,aAAD,eAAmB,KAAKF,KAAxB;AAA+B,QAAA,IAAI,EAAEN,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAApB,GAA2E,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAArG,CADL,CADJ;AAKH;;AAtCwC,GAA7C;AAwCH;AAAA","sourcesContent":["import React, {Component} from 'react'\r\nimport Router from 'next/router'\r\nimport Login from '../pages/login';\r\nimport * as authService from './auth-service';\r\nimport { __bodyLoading } from 'components/shared/helpers/global-functions';\r\n\r\nexport default function withAuth(AuthComponent) {\r\n\r\n    return class Authenticated extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = {\r\n                isAuth: false,\r\n                isLoading: true\r\n            };\r\n            __bodyLoading(this.state.isLoading);\r\n            authService.__isLogged().then(res => {\r\n                if (res) {\r\n                    if (Router.pathname === '/login' || Router.pathname === '/register') {\r\n                        Router.push('/');\r\n                        this.setState({\r\n                            isAuth: true,\r\n                        });\r\n                    } else {\r\n                        this.setState({\r\n                            isAuth: true,\r\n                            isLoading: false\r\n                        }, () => __bodyLoading(this.state.isLoading, this.state.isAuth))\r\n                    }\r\n                } else {\r\n                    this.setState({\r\n                        isLoading: false\r\n                    }, () => {\r\n                        __bodyLoading(this.state.isLoading, this.state.isAuth);\r\n                        Router.replace('/login')\r\n                    });\r\n                }\r\n            })\r\n        }\r\n\r\n        render() {\r\n            return (\r\n                <div>\r\n                    {!this.state.isLoading && (this.state.isAuth ? <AuthComponent {...this.props} auth={authService} /> : <Login />)}\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n};"]},"metadata":{},"sourceType":"module"}