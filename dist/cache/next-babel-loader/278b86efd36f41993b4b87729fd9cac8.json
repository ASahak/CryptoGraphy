{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { connect } from \"react-redux\";\nimport UI_ELEMENTS from \"components/shared/UI\";\nimport * as moment from 'moment';\nimport Icon from 'components/Icons/icon';\nimport debounce from \"lodash.debounce\";\nimport { __LOAD_MORE_MESSAGES } from 'store/actions';\nimport { Bus } from 'components/shared/helpers/Bus';\nimport { _EVERY_PAGE_LIMIT_MESSAGES } from 'components/shared/helpers/constants';\nimport { __getUserMessages } from 'store/reselect';\nimport { __detectCryptIcon } from 'components/shared/helpers/global-functions';\nimport { __EDIT_MESSAGE, __REMOVE_MESSAGE } from \"store/saga\";\n\nvar PrivateMessageContent = /*#__PURE__*/function (_React$PureComponent) {\n  _inherits(PrivateMessageContent, _React$PureComponent);\n\n  var _super = _createSuper(PrivateMessageContent);\n\n  function PrivateMessageContent(props) {\n    var _this$props$activeUse, _this$props$loggedUse;\n\n    var _this;\n\n    _classCallCheck(this, PrivateMessageContent);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      leftColor: _this.props.activeUser && ((_this$props$activeUse = _this.props.activeUser) === null || _this$props$activeUse === void 0 ? void 0 : _this$props$activeUse.color) || '#0C4651',\n      rightColor: _this.props.activeUser && ((_this$props$loggedUse = _this.props.loggedUser) === null || _this$props$loggedUse === void 0 ? void 0 : _this$props$loggedUse.color) || '#1BBC9B',\n      scrollLoadingAllow: true,\n      messagesSelector: [],\n      encryptIcon: true,\n      scrollPosition: null,\n      previousScrollHeight: 0,\n      previousScrollTop: 0,\n      loadingMessages: false,\n      isEditing: false,\n      isRemoving: false,\n      editingMsgIndex: null\n    };\n    _this._messagesEnd = null;\n    _this._handleDomClick = null;\n    _this._handleClickRemove = null;\n    _this.__scrollToBottom = _this.__scrollToBottom.bind(_assertThisInitialized(_this));\n    _this.__handleScrollTop = _this.__handleScrollTop.bind(_assertThisInitialized(_this));\n    _this.__showEncryptPopUp = _this.__showEncryptPopUp.bind(_assertThisInitialized(_this));\n    _this.__doEncryptType = _this.__doEncryptType.bind(_assertThisInitialized(_this));\n    _this.__hidePopUpEncrypt = _this.__hidePopUpEncrypt.bind(_assertThisInitialized(_this));\n    _this.__editMessage = _this.__editMessage.bind(_assertThisInitialized(_this));\n    _this.__removeMessageConfirm = _this.__removeMessageConfirm.bind(_assertThisInitialized(_this));\n    _this.__removeMessage = _this.__removeMessage.bind(_assertThisInitialized(_this));\n    _this.__clickRemovePopUp = _this.__clickRemovePopUp.bind(_assertThisInitialized(_this));\n    _this._scrollContent = React.createRef();\n    Bus.subscribe('cancelEditing', function () {\n      _this.setState({\n        isEditing: false\n      });\n    });\n    Bus.subscribe('endEditing', function () {\n      _this.setState({\n        isEditing: false,\n        isRemoving: false,\n        editingMsgIndex: null\n      });\n    });\n    return _this;\n  }\n\n  _createClass(PrivateMessageContent, [{\n    key: \"__scrollToBottom\",\n    value: function __scrollToBottom(behavior) {\n      var _this2 = this;\n\n      setTimeout(function () {\n        var _this2$_messagesEnd;\n\n        (_this2$_messagesEnd = _this2._messagesEnd) === null || _this2$_messagesEnd === void 0 ? void 0 : _this2$_messagesEnd.scrollIntoView({\n          behavior: behavior ? 'smooth' : 'auto'\n        });\n      }, 0);\n    }\n  }, {\n    key: \"__handleScrollTop\",\n    value: function __handleScrollTop(e) {\n      var _this3 = this;\n\n      if (this.state.scrollLoadingAllow && e.target.scrollTop < 50) {\n        var _this$_scrollContent, _this$_scrollContent2;\n\n        this.setState({\n          previousScrollTop: (_this$_scrollContent = this._scrollContent) === null || _this$_scrollContent === void 0 ? void 0 : _this$_scrollContent.scrollTop,\n          previousScrollHeight: (_this$_scrollContent2 = this._scrollContent) === null || _this$_scrollContent2 === void 0 ? void 0 : _this$_scrollContent2.scrollHeight,\n          scrollLoadingAllow: false,\n          loadingMessages: true\n        }, function () {\n          setTimeout(function () {\n            _this3.props.__LOAD_MORE_MESSAGES(1);\n          }, 1000);\n        });\n      } else {\n        this.setState({\n          scrollLoadingAllow: true\n        });\n      }\n    }\n  }, {\n    key: \"__showEncryptPopUp\",\n    value: function __showEncryptPopUp(evt, index, isKey) {\n      var _this4 = this;\n\n      if (evt.target.closest('.remove-confirm-container')) return;\n\n      var _currentSrc = evt.target.closest('.separate-p');\n\n      if (document.body.querySelector('.opened-encryptPopUp') && document.body.querySelector('.opened-encryptPopUp') !== _currentSrc) {\n        document.body.querySelector('.opened-encryptPopUp').setAttribute('data-hint-encrypt', false);\n        document.body.querySelector('.opened-encryptPopUp').classList.remove('opened-encryptPopUp');\n      }\n\n      if (isKey) return;\n\n      if (_currentSrc) {\n        var dataIcon = _currentSrc.getAttribute('data-hint-encrypt');\n\n        this.state.messagesSelector = _toConsumableArray(this.state.messagesSelector);\n        this.state.messagesSelector[index].isEncrypt = false;\n        this.setState({\n          encryptIcon: JSON.parse(dataIcon),\n          messagesSelector: this.state.messagesSelector\n        }, function () {\n          return _this4.forceUpdate();\n        });\n\n        _currentSrc.classList.toggle('opened-encryptPopUp');\n      }\n\n      setTimeout(function () {\n        addEventListener('click', _this4._handleDomClick = _this4.__hidePopUpEncrypt.bind(_this4, index));\n      }, 0);\n    }\n  }, {\n    key: \"__hidePopUpEncrypt\",\n    value: function __hidePopUpEncrypt(index, e) {\n      var _this5 = this;\n\n      this.state.messagesSelector = _toConsumableArray(this.state.messagesSelector);\n      delete this.state.messagesSelector[index].isEncrypt;\n      this.setState({\n        messagesSelector: this.state.messagesSelector\n      }, function () {\n        return _this5.forceUpdate();\n      });\n      removeEventListener('click', this._handleDomClick);\n\n      if (!e.target.closest('div[data-hint-encrypt]') && document.body.querySelector('.opened-encryptPopUp')) {\n        document.body.querySelector('.opened-encryptPopUp').setAttribute('data-hint-encrypt', false);\n        document.body.querySelector('.opened-encryptPopUp').classList.remove('opened-encryptPopUp');\n      }\n    }\n  }, {\n    key: \"__doEncryptType\",\n    value: function __doEncryptType(e, index) {\n      var _this6 = this;\n\n      var _currentSrc = e.target.closest('.separate-p');\n\n      e.stopPropagation();\n      this.setState({\n        encryptIcon: !this.state.encryptIcon\n      }, function () {\n        _currentSrc.setAttribute('data-hint-encrypt', _this6.state.encryptIcon);\n\n        var newEncryption = _toConsumableArray(_this6.state.messagesSelector);\n\n        newEncryption[index].isEncrypt = _this6.state.encryptIcon;\n\n        _this6.setState({\n          messagesSelector: newEncryption\n        });\n      });\n    }\n  }, {\n    key: \"__editMessage\",\n    value: function __editMessage(evt, msg, time) {\n      var _this$props$activeUse2, _this$props$loggedUse2;\n\n      var index = this.props.messages.findIndex(function (msg) {\n        return msg.time === time;\n      });\n\n      __EDIT_MESSAGE(null, index, {\n        idUser: (_this$props$activeUse2 = this.props.activeUser) === null || _this$props$activeUse2 === void 0 ? void 0 : _this$props$activeUse2.id,\n        myId: (_this$props$loggedUse2 = this.props.loggedUser) === null || _this$props$loggedUse2 === void 0 ? void 0 : _this$props$loggedUse2.id\n      }).next();\n\n      evt.stopPropagation();\n      this.setState({\n        isEditing: true,\n        editingMsgIndex: index\n      }, function () {\n        Bus.dispatch('editMessage', {\n          msg: msg,\n          index: index\n        });\n      });\n    }\n  }, {\n    key: \"__removeMessageConfirm\",\n    value: function __removeMessageConfirm(evt) {\n      var _evt$target$closest,\n          _this7 = this;\n\n      evt.stopPropagation();\n\n      var _currentSrc = evt.target.closest('.separate-p');\n\n      var alreadyDeclared = (_evt$target$closest = evt.target.closest('.messages-content')) === null || _evt$target$closest === void 0 ? void 0 : _evt$target$closest.querySelector('.opened-pop-confirm-remove');\n\n      if (alreadyDeclared) {\n        alreadyDeclared.classList.remove('opened-pop-confirm-remove');\n      }\n\n      _currentSrc.classList.add('opened-pop-confirm-remove');\n\n      setTimeout(function () {\n        addEventListener('click', _this7._handleClickRemove = _this7.__clickRemovePopUp.bind(_this7));\n      }, 0);\n    }\n  }, {\n    key: \"__removeMessage\",\n    value: function __removeMessage(time) {\n      var _this$props$activeUse3, _this$props$loggedUse3;\n\n      __REMOVE_MESSAGE(time, {\n        idUser: (_this$props$activeUse3 = this.props.activeUser) === null || _this$props$activeUse3 === void 0 ? void 0 : _this$props$activeUse3.id,\n        myId: (_this$props$loggedUse3 = this.props.loggedUser) === null || _this$props$loggedUse3 === void 0 ? void 0 : _this$props$loggedUse3.id\n      }).next();\n    }\n  }, {\n    key: \"__clickRemovePopUp\",\n    value: function __clickRemovePopUp(evt) {\n      var _evt$target$closest2;\n\n      var alreadyDeclared = (_evt$target$closest2 = evt.target.closest('.messages-content')) === null || _evt$target$closest2 === void 0 ? void 0 : _evt$target$closest2.querySelector('.opened-pop-confirm-remove');\n\n      if (alreadyDeclared && !evt.target.closest('.remove-confirm-container') || evt.target.closest('.trigger-close-dialog')) {\n        alreadyDeclared.classList.remove('opened-pop-confirm-remove');\n        removeEventListener('click', this._handleClickRemove);\n      }\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState, snapshot) {\n      var _this$props$activeUse4,\n          _prevProps$messages$t,\n          _this$props$messages$,\n          _this8 = this,\n          _this$props$activeUse5,\n          _this$props$activeUse6,\n          _this$props$activeUse7;\n\n      // if (prevProps.activeUser.isTyping !== this.props.activeUser.isTyping) { todo\n      //     this.props.activeUser.isTyping && this.__scrollToBottom('behavior');\n      // }\n      // Detect if there are removed message\n      if (((_this$props$activeUse4 = this.props.activeUser) === null || _this$props$activeUse4 === void 0 ? void 0 : _this$props$activeUse4.removedMessageIndex) >= 0 && (((_prevProps$messages$t = prevProps.messages[this.props.activeUser.removedMessageIndex]) === null || _prevProps$messages$t === void 0 ? void 0 : _prevProps$messages$t.removed) !== ((_this$props$messages$ = this.props.messages[this.props.activeUser.removedMessageIndex]) === null || _this$props$messages$ === void 0 ? void 0 : _this$props$messages$.removed) || !function () {\n        var _this8$state$messages;\n\n        var currentIndex = _this8.state.messagesSelector.length - (_this8.props.messages.length - _this8.props.activeUser.removedMessageIndex);\n        if (currentIndex < 0) return false;\n        return (_this8$state$messages = _this8.state.messagesSelector[currentIndex]) === null || _this8$state$messages === void 0 ? void 0 : _this8$state$messages.removed;\n      }())) {\n        var currentIndex = this.state.messagesSelector.length - (this.props.messages.length - this.props.activeUser.removedMessageIndex);\n\n        if (currentIndex >= 0) {\n          var newEncryption = _toConsumableArray(this.state.messagesSelector);\n\n          if (newEncryption[currentIndex]) {\n            newEncryption[currentIndex].removed = true;\n            this.setState({\n              messagesSelector: newEncryption\n            });\n          }\n        }\n      } // when editing have been finished\n\n\n      if (((_this$props$activeUse5 = this.props.activeUser) === null || _this$props$activeUse5 === void 0 ? void 0 : _this$props$activeUse5.editedMsgIndex) >= 0 && (this.props.messages[(_this$props$activeUse6 = this.props.activeUser) === null || _this$props$activeUse6 === void 0 ? void 0 : _this$props$activeUse6.editedMsgIndex].message !== prevProps.messages[(_this$props$activeUse7 = this.props.activeUser) === null || _this$props$activeUse7 === void 0 ? void 0 : _this$props$activeUse7.editedMsgIndex].message || function () {\n        var _this8$props$activeUs, _this8$props$activeUs2;\n\n        var currentIndex = _this8.state.messagesSelector.length - (_this8.props.messages.length - ((_this8$props$activeUs = _this8.props.activeUser) === null || _this8$props$activeUs === void 0 ? void 0 : _this8$props$activeUs.editedMsgIndex));\n        if (currentIndex < 0) return false;\n        return _this8.state.messagesSelector[currentIndex].message !== _this8.props.messages[(_this8$props$activeUs2 = _this8.props.activeUser) === null || _this8$props$activeUs2 === void 0 ? void 0 : _this8$props$activeUs2.editedMsgIndex].message;\n      }())) {\n        var _this$props$activeUse8;\n\n        var _currentIndex = this.state.messagesSelector.length - (this.props.messages.length - ((_this$props$activeUse8 = this.props.activeUser) === null || _this$props$activeUse8 === void 0 ? void 0 : _this$props$activeUse8.editedMsgIndex));\n\n        if (_currentIndex >= 0) {\n          var _this$props$activeUse9;\n\n          var editedArray = _toConsumableArray(this.state.messagesSelector);\n\n          editedArray[_currentIndex] = this.props.messages[(_this$props$activeUse9 = this.props.activeUser) === null || _this$props$activeUse9 === void 0 ? void 0 : _this$props$activeUse9.editedMsgIndex];\n          this.setState({\n            isEditing: false,\n            isRemoving: false,\n            editingMsgIndex: null,\n            messagesSelector: editedArray\n          });\n        }\n      } // Sending notification when there was not any messages\n\n\n      if (this.props.messages.length === 1 && this.props.messages[0].message === '' || prevProps.messages.length === 1 && prevProps.messages[0].message === '') {\n        this.props.messagesHaveBeenDeleted();\n      } // Update message list\n\n\n      if (prevProps.messagesPage !== this.props.messagesPage || prevProps.messages.length !== this.props.messages.length) {\n        if ((this.props.messagesPage - 1) * _EVERY_PAGE_LIMIT_MESSAGES <= this.props.messages.length) {\n          this.setState({\n            scrollLoadingAllow: true,\n            loadingMessages: false,\n            messagesSelector: __getUserMessages({\n              data: this.props.messages,\n              page: this.props.messagesPage\n            })\n          }, function () {\n            if (prevProps.messages.length !== _this8.props.messages.length) {\n              _this8.__scrollToBottom('behavior');\n            } else {\n              _this8._scrollContent.scrollTo(0, _this8._scrollContent.scrollHeight - _this8.state.previousScrollHeight + _this8.state.previousScrollTop - 45);\n            }\n          });\n        } else {\n          this.props.__LOAD_MORE_MESSAGES(-1);\n        }\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this9 = this;\n\n      this.setState({\n        messagesSelector: __getUserMessages({\n          data: this.props.messages,\n          page: this.props.messagesPage\n        })\n      }, function () {\n        _this9._scrollContent.onscroll = debounce(function (e) {\n          if (_this9.props.messages.length > _EVERY_PAGE_LIMIT_MESSAGES) {\n            _this9.__handleScrollTop(e);\n          }\n        }, 100);\n\n        _this9.__scrollToBottom();\n      });\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      removeEventListener('click', this._handleClickRemove);\n      removeEventListener('click', this._handleDomClick);\n      Bus.unsubscribe('cancelEditing');\n      Bus.unsubscribe('endEditing');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this10 = this;\n\n      return __jsx(React.Fragment, null, __jsx(\"div\", {\n        ref: function ref(el) {\n          return _this10._scrollContent = el;\n        },\n        className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"messages-content \".concat(this.state.loadingMessages ? 'scroll-disable' : '')\n      }, this.state.loadingMessages && __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"sbl-circ\"\n      }), this.state.messagesSelector.map(function (message, index) {\n        var _isOwner = message.owner === 'Me';\n\n        var _dataMSG = _isOwner ? _this10.props.loggedUser : _this10.props.activeUser;\n\n        if (!_dataMSG) return '';\n        return __jsx(\"div\", {\n          key: message.time + index,\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + ((_isOwner ? 'content-right_owner' : 'content-left_owner') || \"\")\n        }, __jsx(UI_ELEMENTS.UserImage, {\n          firstName: _dataMSG.fullName.split(' ')[0],\n          lastName: _dataMSG.fullName.split(' ')[1] || '',\n          fill: _dataMSG.color\n        }), message.removed ? __jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"removed-message\"\n        }, \"Removed message\") : __jsx(\"div\", {\n          \"data-message-type\": message.encryptType,\n          \"data-message-key\": message.key,\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"message-time \".concat(__detectCryptIcon(message) ? 'crypt-message' : '')\n        }, __jsx(\"div\", {\n          onClick: function onClick(e) {\n            return _this10.__showEncryptPopUp(e, index, __detectCryptIcon(message));\n          },\n          \"data-hint-encrypt\": false,\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"separate-p\"\n        }, _isOwner && !__detectCryptIcon(message) && !_this10.state.isEditing && !_this10.state.isRemoving && __jsx(\"span\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"edit-remove\"\n        }, __jsx(\"i\", {\n          onClick: function onClick(e) {\n            return _this10.__editMessage(e, message, message.time);\n          },\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"lnr lnr-pencil\"\n        }), __jsx(\"i\", {\n          onClick: function onClick(e) {\n            return _this10.__removeMessageConfirm(e);\n          },\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"lnr lnr-cross\"\n        }), __jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"remove-confirm-container\"\n        }, \"Are you sure?\", __jsx(\"p\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]])\n        }, __jsx(\"a\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"trigger-close-dialog\"\n        }, \"No\"), __jsx(\"a\", {\n          onClick: function onClick() {\n            return _this10.__removeMessage(message.time);\n          },\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]])\n        }, \"Yes\")))), __jsx(\"span\", {\n          onClick: function onClick(e) {\n            return _this10.__doEncryptType(e, index);\n          },\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"encryptPopUp\"\n        }, _this10.state.encryptIcon ? __jsx(Icon, {\n          name: \"unlocked\"\n        }) : __jsx(Icon, {\n          name: \"locked\"\n        })), __detectCryptIcon(message) ? __jsx(\"img\", {\n          src: \"./assets/images/key.png\",\n          alt: \"iconSend\",\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]])\n        }) : __jsx(\"span\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]])\n        }, message.isEncrypt === false ? message.decryptedMsg : //there will be some case which is equal undefined\n        message.isEncrypt === true ? message.encryptedMsg : message.message, \" \"), \" \", message.edited && __jsx(\"span\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"edited-msg\"\n        }, \"(edited)\")), __jsx(\"span\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"time-wrap\"\n        }, moment(+message.time).format('lll')), _isOwner ? index === _this10.state.messagesSelector.length - 1 ? _this10.props.activeUser.isSeen ? __jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"status-message\"\n        }, \"Seen\") : __jsx(\"div\", {\n          className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"status-message\"\n        }, \"Delivered\") : '' : ''));\n      }), __jsx(\"div\", {\n        ref: function ref(el) {\n          _this10._messagesEnd = el;\n        },\n        className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]])\n      })), this.props.activeUser.isTyping && __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + \"is-typing-wrap\"\n      }, this.FN + this.LN + ' is typing ', __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + 'spinner'\n      }, __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + 'bounce1'\n      }), __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + 'bounce2'\n      }), __jsx(\"div\", {\n        className: _JSXStyle.dynamic([[\"2020876622\", [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]]]) + \" \" + 'bounce3'\n      }))), __jsx(_JSXStyle, {\n        id: \"2020876622\",\n        dynamic: [_this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.rightColor, _this10.state.leftColor, _this10.state.rightColor, _this10.state.leftColor]\n      }, [\".sbl-circ{height:35px;width:35px;color:#5a5a5a;position:relative;display:block;border:2px solid;border-radius:50%;border-top-color:transparent;-webkit-animation:rotate 1s linear infinite;animation:rotate 1s linear infinite;margin:5px auto;}\", \"@-webkit-keyframes rotate{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}\", \"@keyframes rotate{0%{-webkit-transform:rotate(0);-ms-transform:rotate(0);transform:rotate(0);}100%{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}\", \".messages-content{height:100%;overflow-x:hidden;position:relative;padding-top:10px;}\", \".scroll-disable{overflow:hidden;}\", \".messages-content::-webkit-scrollbar{width:0px;height:10px;}\", \".messages-content::-webkit-scrollbar-thumb{background:transparent;}\", \".messages-content::-webkit-scrollbar-track{background:transparent;}\", \".content-right_owner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;-ms-flex-pack:start;justify-content:flex-start;-webkit-flex-flow:row-reverse;-ms-flex-flow:row-reverse;flex-flow:row-reverse;text-align:right;padding:0 10px;margin:7px;}\", \".content-left_owner{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:end;-ms-flex-pack:end;justify-content:end;text-align:left;padding:0 10px;margin:7px;}\", \".content-left_owner .message-time{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-start;-webkit-box-align:flex-start;-ms-flex-align:flex-start;align-items:flex-start;padding:5px 10px;max-width:50%;position:relative;}\", \".content-left_owner .removed-message,.content-right_owner .removed-message{padding:5px 10px;max-width:50%;position:relative;background-color:#d9d7d7;border-radius:6px;font-size:14px;height:27px;font-style:italic;color:#767575;margin-top:5px;margin-bottom:10px;}\", \".content-left_owner .removed-message{margin-left:10px;}\", \".content-right_owner .removed-message{margin-right:10px;}\", \".content-right_owner .message-time{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-align-items:flex-end;-webkit-box-align:flex-end;-ms-flex-align:flex-end;align-items:flex-end;padding:5px 10px;max-width:50%;position:relative;}\", \".content-left_owner .message-time>div.separate-p .edited-msg,.content-right_owner .message-time>div.separate-p .edited-msg{font-size:10px;font-family:sans-serif;font-style:italic;}\", \".content-left_owner .crypt-message>div.separate-p,.content-right_owner .crypt-message>div.separate-p{background-color:transparent !important;padding:0 !important;height:27px;}\", \".content-left_owner .crypt-message>div.separate-p img,.content-right_owner .crypt-message>div.separate-p img{width:30px;}\", \".content-left_owner .crypt-message>div.separate-p:before,.content-right_owner .crypt-message>div.separate-p:before{border-color:transparent !important;}\", \".message-time .status-message{font-size:12px;color:#424242;}\", \".message-time:hover>span{opacity:1 !important;visibility:visible !important;}\", \".content-right_owner .message-time>span,.content-left_owner .message-time>span{opacity:0;-webkit-transition:.4s;transition:.4s;font-size:9px;font-family:sans-serif;position:absolute;top:-13px;text-align:center;min-width:-webkit-fit-content;min-width:-moz-fit-content;min-width:fit-content;background-color:red;padding:3px 5px;color:#fff;-webkit-flex-shrink:0;-ms-flex-negative:0;flex-shrink:0;white-space:nowrap;border-radius:4px;visibility:hidden;}\", \".content-right_owner .message-time>div.separate-p .edit-remove i{padding:2px 4px;position:relative;}\", \".content-right_owner .message-time>div.separate-p .edit-remove i.lnr-pencil:after{content:'';position:absolute;width:5px;height:5px;background:\".concat(_this10.state.rightColor, \";top:0;right:-5px;}\"), \".content-right_owner .message-time>div.separate-p .edit-remove i.lnr-cross:after{content:'';position:absolute;width:5px;height:5px;background:\".concat(_this10.state.rightColor, \";bottom:0;right:-5px;}\"), \".content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container p{margin:4px 0 0;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}\", \".content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container p>a:first-child{height:19px;display:inline-block;border:1px solid #ccc;width:25px;border-radius:2px;text-align:center;font-size:12px;vertical-align:middle;margin-right:7px;background-color:\".concat(_this10.state.rightColor, \";color:#fff;cursor:pointer;}\"), \".opened-pop-confirm-remove .edit-remove{opacity:1 !important;visibility:visible !important;left:-18px !important;}\", \".content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container p>a:last-child{height:19px;display:inline-block;border:1px solid #ccc;width:25px;border-radius:2px;text-align:center;font-size:12px;vertical-align:middle;background-color:#c5cbca;color:#fff;cursor:pointer;}\", \".content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container{position:absolute;width:120px;right:24px;padding:6px;color:#000;font-size:13px;border:1px solid #ccc;border-radius:3px;top:14px;bottom:0;margin:auto;height:55px;opacity:0;z-index:22;background:#fff;-webkit-transition:.4s;transition:.4s;visibility:hidden;cursor:default;}\", \".content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container:after{content:'';width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:4px solid #dcdcdc;position:absolute;right:-4px;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);top:21px;}\", \".content-right_owner .message-time>div.separate-p .edit-remove .remove-confirm-container:before{content:'';width:0;height:0;border-top:3px solid transparent;border-bottom:3px solid transparent;border-left:3px solid #fff;position:absolute;right:-3px;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);top:22px;z-index:22;}\", \".opened-pop-confirm-remove .remove-confirm-container{opacity:1 !important;visibility:visible !important;}\", \".opened-pop-confirm-remove+.time-wrap{display:none;}\", \".content-right_owner .message-time>div.separate-p .edit-remove{position:absolute;left:-15px;background:\".concat(_this10.state.rightColor, \";display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;top:0;width:18px;font-size:9px;height:27px;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-right:1px solid;opacity:0;-webkit-transition:.2s;transition:.2s;visibility:hidden;}\"), \".content-right_owner .message-time>div.separate-p:hover .edit-remove{opacity:1;visibility:visible;left:-18px;}\", \".content-right_owner .message-time>div.separate-p .edit-remove:after{content:'';position:absolute;top:0;bottom:0;left:0;right:0;height:0.8px;width:18px;margin:auto;background:#fff;}\", \".content-right_owner .message-time>div.separate-p .edit-remove:before{content:'';position:absolute;top:0;bottom:0;right:-1px;height:27px;width:0.8px;margin:auto;background:#fff;z-index:2;}\", \".opened-encryptPopUp .edit-remove{display:none !important;}\", \".content-right_owner .message-time>div.separate-p .encryptPopUp,.content-left_owner .message-time>div.separate-p .encryptPopUp{position:absolute;height:25px;display:none;width:25px;padding:2px;bottom:0;top:0;margin:auto;cursor:pointer;border-radius:5px;}\", \".content-right_owner .message-time>div.separate-p .encryptPopUp{left:-30px;}\", \".content-left_owner .message-time>div.separate-p .encryptPopUp{right:-30px;}\", \".opened-encryptPopUp{background-color:#e7e7e7 !important;color:#000 !important;}\", \".opened-encryptPopUp:before{border-left-color:#e7e7e7 !important;}\", \".opened-encryptPopUp .encryptPopUp{display:block !important;}\", \".content-right_owner .message-time>div.separate-p,.content-left_owner .message-time>div.separate-p{cursor:pointer;text-align:left;margin:0 0 5px 0;display:inline-block;padding:5px 10px;color:#fff;font-size:13px;border-radius:5px;position:relative;min-height:27px;word-break:break-all;}\", \".content-right_owner .message-time>div.separate-p,.content-right_owner .message-time>span{background-color:\".concat(_this10.state.rightColor, \";}\"), \".content-left_owner .message-time>div.separate-p,.content-left_owner .message-time>span{background-color:\".concat(_this10.state.leftColor, \";}\"), \".content-right_owner .message-time>div.separate-p:before{content:'';width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:4px solid \".concat(_this10.state.rightColor, \";position:absolute;right:-3px;-webkit-transform:rotate(0deg);-ms-transform:rotate(0deg);transform:rotate(0deg);top:7px;}\"), \".content-left_owner .message-time>div.separate-p:before{content:'';width:0;height:0;border-top:4px solid transparent;border-bottom:4px solid transparent;border-left:4px solid \".concat(_this10.state.leftColor, \";position:absolute;left:-3px;-webkit-transform:rotate(-180deg);-ms-transform:rotate(-180deg);transform:rotate(-180deg);top:7px;}\"), \".is-typing-wrap{margin-left:20px;margin-bottom:7px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;font-size:13px;}\", \".is-typing-wrap .spinner{margin-top:5px;margin-left:10px;}\"]));\n    }\n  }, {\n    key: \"FN\",\n    get: function get() {\n      return this.props.activeUser ? this.props.activeUser.fullName.split(' ')[0].slice(0, 1).toUpperCase() : '';\n    }\n  }, {\n    key: \"LN\",\n    get: function get() {\n      return this.props.activeUser ? this.props.activeUser.fullName.split(' ')[1].slice(0, 1) || ''.toUpperCase() : '';\n    }\n  }]);\n\n  return PrivateMessageContent;\n}(React.PureComponent);\n\nvar mapStateToProps = function mapStateToProps(state) {\n  return {\n    loggedUser: state.chat.loggedUser,\n    activeUser: state.chat.activeUser,\n    messages: state.chat.activeUserMessages,\n    messagesPage: state.chat.messagesPage\n  };\n};\n\nvar mapDispatchToProps = {\n  __LOAD_MORE_MESSAGES: __LOAD_MORE_MESSAGES\n};\nexport default connect(mapStateToProps, mapDispatchToProps)(PrivateMessageContent);","map":null,"metadata":{},"sourceType":"module"}