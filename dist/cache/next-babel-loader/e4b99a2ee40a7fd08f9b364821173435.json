{"ast":null,"code":"import _extends from \"@babel/runtime/helpers/esm/extends\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"@babel/runtime/helpers/esm/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/esm/getPrototypeOf\";\nvar _jsxFileName = \"C:\\\\Users\\\\ruala\\\\Desktop\\\\ASahak\\\\daser\\\\next\\\\CryptoGraphy\\\\utils\\\\auth.js\";\nvar __jsx = React.createElement;\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function () { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport Router from 'next/router';\nimport Login from '../pages/login';\nimport * as authService from './auth-service';\nimport { __bodyLoading } from 'components/shared/helpers/global-functions';\nexport default function withAuth(AuthComponent) {\n  return /*#__PURE__*/function (_Component) {\n    _inherits(Authenticated, _Component);\n\n    var _super = _createSuper(Authenticated);\n\n    function Authenticated(props) {\n      var _this;\n\n      _classCallCheck(this, Authenticated);\n\n      _this = _super.call(this, props);\n      _this.state = {\n        isAuth: false,\n        isLoading: true\n      };\n\n      __bodyLoading(_this.state.isLoading);\n\n      authService.__isLogged().then(function (res) {\n        if (res) {\n          if (Router.pathname === '/login' || Router.pathname === '/register') {\n            Router.push('/');\n\n            _this.setState({\n              isAuth: true\n            });\n          } else {\n            _this.setState({\n              isAuth: true,\n              isLoading: false\n            }, function () {\n              return __bodyLoading(_this.state.isLoading, _this.state.isAuth);\n            });\n          }\n        } else {\n          _this.setState({\n            isLoading: false\n          }, function () {\n            __bodyLoading(_this.state.isLoading, _this.state.isAuth);\n\n            Router.replace('/login');\n          });\n        }\n      });\n\n      return _this;\n    }\n\n    _createClass(Authenticated, [{\n      key: \"render\",\n      value: function render() {\n        return __jsx(\"div\", {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 17\n          }\n        }, !this.state.isLoading && (this.state.isAuth ? __jsx(AuthComponent, _extends({}, this.props, {\n          auth: authService,\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 68\n          }\n        })) : __jsx(Login, {\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 123\n          }\n        })));\n      }\n    }]);\n\n    return Authenticated;\n  }(Component);\n}\n;","map":{"version":3,"sources":["C:/Users/ruala/Desktop/ASahak/daser/next/CryptoGraphy/utils/auth.js"],"names":["React","Component","Router","Login","authService","__bodyLoading","withAuth","AuthComponent","props","state","isAuth","isLoading","__isLogged","then","res","pathname","push","setState","replace"],"mappings":";;;;;;;;;;;;;AAAA,OAAOA,KAAP,IAAeC,SAAf,QAA+B,OAA/B;AACA,OAAOC,MAAP,MAAmB,aAAnB;AACA,OAAOC,KAAP,MAAkB,gBAAlB;AACA,OAAO,KAAKC,WAAZ,MAA6B,gBAA7B;AACA,SAASC,aAAT,QAA8B,4CAA9B;AAEA,eAAe,SAASC,QAAT,CAAkBC,aAAlB,EAAiC;AAE5C;AAAA;;AAAA;;AACI,2BAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AACf,gCAAMA,KAAN;AACA,YAAKC,KAAL,GAAa;AACTC,QAAAA,MAAM,EAAE,KADC;AAETC,QAAAA,SAAS,EAAE;AAFF,OAAb;;AAIAN,MAAAA,aAAa,CAAC,MAAKI,KAAL,CAAWE,SAAZ,CAAb;;AACAP,MAAAA,WAAW,CAACQ,UAAZ,GAAyBC,IAAzB,CAA8B,UAAAC,GAAG,EAAI;AACjC,YAAIA,GAAJ,EAAS;AACL,cAAIZ,MAAM,CAACa,QAAP,KAAoB,QAApB,IAAgCb,MAAM,CAACa,QAAP,KAAoB,WAAxD,EAAqE;AACjEb,YAAAA,MAAM,CAACc,IAAP,CAAY,GAAZ;;AACA,kBAAKC,QAAL,CAAc;AACVP,cAAAA,MAAM,EAAE;AADE,aAAd;AAGH,WALD,MAKO;AACH,kBAAKO,QAAL,CAAc;AACVP,cAAAA,MAAM,EAAE,IADE;AAEVC,cAAAA,SAAS,EAAE;AAFD,aAAd,EAGG;AAAA,qBAAMN,aAAa,CAAC,MAAKI,KAAL,CAAWE,SAAZ,EAAuB,MAAKF,KAAL,CAAWC,MAAlC,CAAnB;AAAA,aAHH;AAIH;AACJ,SAZD,MAYO;AACH,gBAAKO,QAAL,CAAc;AACVN,YAAAA,SAAS,EAAE;AADD,WAAd,EAEG,YAAM;AACLN,YAAAA,aAAa,CAAC,MAAKI,KAAL,CAAWE,SAAZ,EAAuB,MAAKF,KAAL,CAAWC,MAAlC,CAAb;;AACAR,YAAAA,MAAM,CAACgB,OAAP,CAAe,QAAf;AACH,WALD;AAMH;AACJ,OArBD;;AAPe;AA6BlB;;AA9BL;AAAA;AAAA,+BAgCa;AACL,eACI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WACK,CAAC,KAAKT,KAAL,CAAWE,SAAZ,KAA0B,KAAKF,KAAL,CAAWC,MAAX,GAAoB,MAAC,aAAD,eAAmB,KAAKF,KAAxB;AAA+B,UAAA,IAAI,EAAEJ,WAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,WAApB,GAA2E,MAAC,KAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UAArG,CADL,CADJ;AAKH;AAtCL;;AAAA;AAAA,IAAmCH,SAAnC;AAwCH;AAAA","sourcesContent":["import React, {Component} from 'react'\r\nimport Router from 'next/router'\r\nimport Login from '../pages/login';\r\nimport * as authService from './auth-service';\r\nimport { __bodyLoading } from 'components/shared/helpers/global-functions';\r\n\r\nexport default function withAuth(AuthComponent) {\r\n\r\n    return class Authenticated extends Component {\r\n        constructor(props) {\r\n            super(props);\r\n            this.state = {\r\n                isAuth: false,\r\n                isLoading: true\r\n            };\r\n            __bodyLoading(this.state.isLoading);\r\n            authService.__isLogged().then(res => {\r\n                if (res) {\r\n                    if (Router.pathname === '/login' || Router.pathname === '/register') {\r\n                        Router.push('/');\r\n                        this.setState({\r\n                            isAuth: true,\r\n                        });\r\n                    } else {\r\n                        this.setState({\r\n                            isAuth: true,\r\n                            isLoading: false\r\n                        }, () => __bodyLoading(this.state.isLoading, this.state.isAuth))\r\n                    }\r\n                } else {\r\n                    this.setState({\r\n                        isLoading: false\r\n                    }, () => {\r\n                        __bodyLoading(this.state.isLoading, this.state.isAuth);\r\n                        Router.replace('/login')\r\n                    });\r\n                }\r\n            })\r\n        }\r\n\r\n        render() {\r\n            return (\r\n                <div>\r\n                    {!this.state.isLoading && (this.state.isAuth ? <AuthComponent {...this.props} auth={authService} /> : <Login />)}\r\n                </div>\r\n            )\r\n        }\r\n    }\r\n};"]},"metadata":{},"sourceType":"module"}